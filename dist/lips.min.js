/**@license
 *   __ __                          __
 *  / / \ \       _    _  ___  ___  \ \
 * | |   \ \     | |  | || . \/ __>  | |
 * | |    > \    | |_ | ||  _/\__ \  | |
 * | |   / ^ \   |___||_||_|  <___/  | |
 *  \_\ /_/ \_\                     /_/ v. DEV
 *
 * LIPS is Pretty Simple - Scheme based Powerful LISP in JavaScript
 *
 * Copyright (c) 2018-2024 Jakub T. Jankiewicz <https://jcubic.pl/me>
 * Released under the MIT license
 *
 * includes:
 *
 * unfetch by Jason Miller (@developit) MIT License
 *
 * contentloaded.js
 *
 * Author: Diego Perini (diego.perini at gmail.com)
 * Summary: cross-browser wrapper for DOMContentLoaded
 * Updated: 20101020
 * License: MIT
 * Version: 1.2
 *
 * URL:
 * http://javascript.nwbox.com/ContentLoaded/
 * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
 *
 * dist file generated by Babel includes code
 * Copyright (c) 2014-present, Facebook, Inc.
 * released under MIT license
 *
 * build: Fri, 09 Feb 2024 15:49:45 +0000
 */
(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t(exports):typeof define==="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!=="undefined"?globalThis:e||self,t(e.lips={}))})(this,function(e){"use strict";var o=typeof document!=="undefined"?document.currentScript:null;function n(e,t){if(t.get){return t.get.call(e)}return t.value}function i(e,t,r){if(!t.has(e)){throw new TypeError("attempted to "+r+" private field on non-instance")}return t.get(e)}function t(e,t){var r=i(e,t,"get");return n(e,r)}function u(e,t,r){if(t.set){t.set.call(e,r)}else{if(!t.writable){throw new TypeError("attempted to set read only private field")}t.value=r}}function I(e,t,r){var n=i(e,t,"set");u(e,n,r);return r}function P(e){P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)};return P(e)}function N(e,t){N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){t.__proto__=r;return t};return N(e,t)}function R(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch(e){return typeof t==="function"}}function T(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(T=function e(){return!!t})()}function L(e,t,r){if(T())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var i=new(e.bind.apply(e,n));return r&&N(i,r.prototype),i}function r(e){var n=typeof Map==="function"?new Map:undefined;r=function e(t){if(t===null||!R(t))return t;if(typeof t!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof n!=="undefined"){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return L(t,arguments,P(this).constructor)}r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:false,writable:true,configurable:true}});return N(r,t)};return r(e)}function p(e){"@babel/helpers - typeof";return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function M(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function W(e,t){if(t&&(p(t)==="object"||typeof t==="function")){return t}else if(t!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return M(e)}function G(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(t)N(e,t)}function Q(e){if(Array.isArray(e))return e}function Z(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function X(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ee(e,t){if(!e)return;if(typeof e==="string")return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}function te(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function re(e){return Q(e)||Z(e)||ee(e)||te()}function ne(e,t,r,n,i,a,u){try{var o=e[a](u);var s=o.value}catch(e){r(e);return}if(o.done){t(s)}else{Promise.resolve(s).then(n,i)}}function ie(o){return function(){var e=this,u=arguments;return new Promise(function(t,r){var n=o.apply(e,u);function i(e){ne(n,t,r,i,a,"next",e)}function a(e){ne(n,t,r,i,a,"throw",e)}i(undefined)})}}function ae(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function ue(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function oe(e){var t=ue(e,"string");return"symbol"==p(t)?t:String(t)}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,oe(n.key),n)}}function ce(e,t,r){if(t)se(e.prototype,t);if(r)se(e,r);Object.defineProperty(e,"prototype",{writable:false});return e}function fe(e,t,r){t=oe(t);if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function le(e,t){if(e==null)return{};var r={};var n=Object.keys(e);var i,a;for(a=0;a<n.length;a++){i=n[a];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function he(e,t){if(e==null)return{};var r=le(e,t);var n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++){n=a[i];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function pe(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,u,o=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(c)throw i}}return o}}function b(e,t){return Q(e)||pe(e,t)||ee(e,t)||te()}function _e(e){if(Array.isArray(e))return X(e)}function de(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(e){return _e(e)||Z(e)||ee(e)||de()}function ve(e,t){this.v=e,this.k=t}function ye(e){return new ve(e,0)}function me(u){var a,o;function s(r,e){try{var n=u[r](e),i=n.value,a=i instanceof ve;Promise.resolve(a?i.v:i).then(function(e){if(a){var t="return"===r?"return":"next";if(!i.k||e.done)return s(t,e);e=u[t](e).value}c(n.done?"return":"normal",e)},function(e){s("throw",e)})}catch(e){c("throw",e)}}function c(e,t){switch(e){case"return":a.resolve({value:t,done:!0});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:!1})}(a=a.next)?s(a.key,a.arg):o=null}this._invoke=function(n,i){return new Promise(function(e,t){var r={key:n,arg:i,resolve:e,reject:t,next:null};o?o=o.next=r:(a=o=r,s(n,i))})},"function"!=typeof u["return"]&&(this["return"]=void 0)}me.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},me.prototype.next=function(e){return this._invoke("next",e)},me.prototype["throw"]=function(e){return this._invoke("throw",e)},me.prototype["return"]=function(e){return this._invoke("return",e)};function ge(e){return function(){return new me(e.apply(this,arguments))}}function be(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var we={exports:{}};var De={exports:{}};(function(t){function r(e){"@babel/helpers - typeof";return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=true,t.exports["default"]=t.exports,r(e)}t.exports=r,t.exports.__esModule=true,t.exports["default"]=t.exports})(De);var Ee=De.exports;(function(j){var I=Ee["default"];function P(){j.exports=P=function e(){return u},j.exports.__esModule=true,j.exports["default"]=j.exports;var c,u={},e=Object.prototype,f=e.hasOwnProperty,l=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch(c){a=function e(t,r,n){return t[r]=n}}function o(e,t,r,n){var i=t&&t.prototype instanceof s?t:s,a=Object.create(i.prototype),u=new S(n||[]);return l(a,"_invoke",{value:F(e,r,u)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}u.wrap=o;var p="suspendedStart",_="suspendedYield",d="executing",v="completed",y={};function s(){}function m(){}function g(){}var b={};a(b,i,function(){return this});var w=Object.getPrototypeOf,D=w&&w(w(B([])));D&&D!==e&&f.call(D,i)&&(b=D);var E=g.prototype=s.prototype=Object.create(b);function A(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function x(o,s){function c(e,t,r,n){var i=h(o[e],o,t);if("throw"!==i.type){var a=i.arg,u=a.value;return u&&"object"==I(u)&&f.call(u,"__await")?s.resolve(u.__await).then(function(e){c("next",e,r,n)},function(e){c("throw",e,r,n)}):s.resolve(u).then(function(e){a.value=e,r(a)},function(e){return c("throw",e,r,n)})}n(i.arg)}var i;l(this,"_invoke",{value:function e(r,n){function t(){return new s(function(e,t){c(r,n,e,t)})}return i=i?i.then(t,t):t()}})}function F(a,u,o){var s=p;return function(e,t){if(s===d)throw new Error("Generator is already running");if(s===v){if("throw"===e)throw t;return{value:c,done:!0}}for(o.method=e,o.arg=t;;){var r=o.delegate;if(r){var n=k(r,o);if(n){if(n===y)continue;return n}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===p)throw s=v,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=d;var i=h(a,u,o);if("normal"===i.type){if(s=o.done?v:_,i.arg===y)continue;return{value:i.arg,done:o.done}}"throw"===i.type&&(s=v,o.method="throw",o.arg=i.arg)}}}function k(e,t){var r=t.method,n=e.iterator[r];if(n===c)return t.delegate=null,"throw"===r&&e.iterator["return"]&&(t.method="return",t.arg=c,k(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=h(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,y;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=c),t.delegate=null,y):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function B(t){if(t||""===t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(f.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=c,e.done=!0,e};return n.next=n}}throw new TypeError(I(t)+" is not iterable")}return m.prototype=g,l(E,"constructor",{value:g,configurable:!0}),l(g,"constructor",{value:m,configurable:!0}),m.displayName=a(g,n,"GeneratorFunction"),u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,a(e,n,"GeneratorFunction")),e.prototype=Object.create(E),e},u.awrap=function(e){return{__await:e}},A(x.prototype),a(x.prototype,r,function(){return this}),u.AsyncIterator=x,u.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var a=new x(o(e,t,r,n),i);return u.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},A(E),a(E,n,"Generator"),a(E,i,function(){return this}),a(E,"toString",function(){return"[object Generator]"}),u.keys=function(e){var r=Object(e),n=[];for(var t in r)n.push(t);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},u.values=B,S.prototype={constructor:S,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&f.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=c)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(r){if(this.done)throw r;var n=this;function t(e,t){return u.type="throw",u.arg=r,n.next=e,t&&(n.method="next",n.arg=c),!!t}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var o=f.call(a,"catchLoc"),s=f.call(a,"finallyLoc");if(o&&s){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function e(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&f.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=t,u.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(u)},complete:function e(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),y}},catch:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var a=i.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function e(t,r,n){return this.delegate={iterator:B(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=c),y}},u}j.exports=P,j.exports.__esModule=true,j.exports["default"]=j.exports})(we);var Ae=we.exports;var xe=Ae();var Fe=xe;try{regeneratorRuntime=xe}catch(e){if(typeof globalThis==="object"){globalThis.regeneratorRuntime=xe}else{Function("r","regeneratorRuntime = r")(xe)}}var C=be(Fe);var ke=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};var Ce=[];var Oe=[];var Se=typeof Uint8Array!=="undefined"?Uint8Array:Array;var Be=false;function je(){Be=true;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var t=0,r=e.length;t<r;++t){Ce[t]=e[t];Oe[e.charCodeAt(t)]=t}Oe["-".charCodeAt(0)]=62;Oe["_".charCodeAt(0)]=63}function Ie(e){if(!Be){je()}var t,r,n,i,a,u;var o=e.length;if(o%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}a=e[o-2]==="="?2:e[o-1]==="="?1:0;u=new Se(o*3/4-a);n=a>0?o-4:o;var s=0;for(t=0,r=0;t<n;t+=4,r+=3){i=Oe[e.charCodeAt(t)]<<18|Oe[e.charCodeAt(t+1)]<<12|Oe[e.charCodeAt(t+2)]<<6|Oe[e.charCodeAt(t+3)];u[s++]=i>>16&255;u[s++]=i>>8&255;u[s++]=i&255}if(a===2){i=Oe[e.charCodeAt(t)]<<2|Oe[e.charCodeAt(t+1)]>>4;u[s++]=i&255}else if(a===1){i=Oe[e.charCodeAt(t)]<<10|Oe[e.charCodeAt(t+1)]<<4|Oe[e.charCodeAt(t+2)]>>2;u[s++]=i>>8&255;u[s++]=i&255}return u}function Pe(e){return Ce[e>>18&63]+Ce[e>>12&63]+Ce[e>>6&63]+Ce[e&63]}function Ne(e,t,r){var n;var i=[];for(var a=t;a<r;a+=3){n=(e[a]<<16)+(e[a+1]<<8)+e[a+2];i.push(Pe(n))}return i.join("")}function Re(e){if(!Be){je()}var t;var r=e.length;var n=r%3;var i="";var a=[];var u=16383;for(var o=0,s=r-n;o<s;o+=u){a.push(Ne(e,o,o+u>s?s:o+u))}if(n===1){t=e[r-1];i+=Ce[t>>2];i+=Ce[t<<4&63];i+="=="}else if(n===2){t=(e[r-2]<<8)+e[r-1];i+=Ce[t>>10];i+=Ce[t>>4&63];i+=Ce[t<<2&63];i+="="}a.push(i);return a.join("")}function Te(e,t,r,n,i){var a,u;var o=i*8-n-1;var s=(1<<o)-1;var c=s>>1;var f=-7;var l=r?i-1:0;var h=r?-1:1;var p=e[t+l];l+=h;a=p&(1<<-f)-1;p>>=-f;f+=o;for(;f>0;a=a*256+e[t+l],l+=h,f-=8){}u=a&(1<<-f)-1;a>>=-f;f+=n;for(;f>0;u=u*256+e[t+l],l+=h,f-=8){}if(a===0){a=1-c}else if(a===s){return u?NaN:(p?-1:1)*Infinity}else{u=u+Math.pow(2,n);a=a-c}return(p?-1:1)*u*Math.pow(2,a-n)}function Le(e,t,r,n,i,a){var u,o,s;var c=a*8-i-1;var f=(1<<c)-1;var l=f>>1;var h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var p=n?0:a-1;var _=n?1:-1;var d=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){o=isNaN(t)?1:0;u=f}else{u=Math.floor(Math.log(t)/Math.LN2);if(t*(s=Math.pow(2,-u))<1){u--;s*=2}if(u+l>=1){t+=h/s}else{t+=h*Math.pow(2,1-l)}if(t*s>=2){u++;s/=2}if(u+l>=f){o=0;u=f}else if(u+l>=1){o=(t*s-1)*Math.pow(2,i);u=u+l}else{o=t*Math.pow(2,l-1)*Math.pow(2,i);u=0}}for(;i>=8;e[r+p]=o&255,p+=_,o/=256,i-=8){}u=u<<i|o;c+=i;for(;c>0;e[r+p]=u&255,p+=_,u/=256,c-=8){}e[r+p-_]|=d*128}var Me={}.toString;var Ue=Array.isArray||function(e){return Me.call(e)=="[object Array]"};
/*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   */var qe=50;c.TYPED_ARRAY_SUPPORT=ke.TYPED_ARRAY_SUPPORT!==undefined?ke.TYPED_ARRAY_SUPPORT:true;ze();function ze(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Ye(e,t){if(ze()<t){throw new RangeError("Invalid typed array length")}if(c.TYPED_ARRAY_SUPPORT){e=new Uint8Array(t);e.__proto__=c.prototype}else{if(e===null){e=new c(t)}e.length=t}return e}function c(e,t,r){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c)){return new c(e,t,r)}if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return Ke(this,e)}return Ve(this,e,t,r)}c.poolSize=8192;c._augment=function(e){e.__proto__=c.prototype;return e};function Ve(e,t,r,n){if(typeof t==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&t instanceof ArrayBuffer){return Ge(e,t,r,n)}if(typeof t==="string"){return He(e,t,r)}return Qe(e,t)}c.from=function(e,t,r){return Ve(null,e,t,r)};if(c.TYPED_ARRAY_SUPPORT){c.prototype.__proto__=Uint8Array.prototype;c.__proto__=Uint8Array}function $e(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be a number')}else if(e<0){throw new RangeError('"size" argument must not be negative')}}function Je(e,t,r,n){$e(t);if(t<=0){return Ye(e,t)}if(r!==undefined){return typeof n==="string"?Ye(e,t).fill(r,n):Ye(e,t).fill(r)}return Ye(e,t)}c.alloc=function(e,t,r){return Je(null,e,t,r)};function Ke(e,t){$e(t);e=Ye(e,t<0?0:Ze(t)|0);if(!c.TYPED_ARRAY_SUPPORT){for(var r=0;r<t;++r){e[r]=0}}return e}c.allocUnsafe=function(e){return Ke(null,e)};c.allocUnsafeSlow=function(e){return Ke(null,e)};function He(e,t,r){if(typeof r!=="string"||r===""){r="utf8"}if(!c.isEncoding(r)){throw new TypeError('"encoding" must be a valid string encoding')}var n=et(t,r)|0;e=Ye(e,n);var i=e.write(t,r);if(i!==n){e=e.slice(0,i)}return e}function We(e,t){var r=t.length<0?0:Ze(t.length)|0;e=Ye(e,r);for(var n=0;n<r;n+=1){e[n]=t[n]&255}return e}function Ge(e,t,r,n){t.byteLength;if(r<0||t.byteLength<r){throw new RangeError("'offset' is out of bounds")}if(t.byteLength<r+(n||0)){throw new RangeError("'length' is out of bounds")}if(r===undefined&&n===undefined){t=new Uint8Array(t)}else if(n===undefined){t=new Uint8Array(t,r)}else{t=new Uint8Array(t,r,n)}if(c.TYPED_ARRAY_SUPPORT){e=t;e.__proto__=c.prototype}else{e=We(e,t)}return e}function Qe(e,t){if(Xe(t)){var r=Ze(t.length)|0;e=Ye(e,r);if(e.length===0){return e}t.copy(e,0,0,r);return e}if(t){if(typeof ArrayBuffer!=="undefined"&&t.buffer instanceof ArrayBuffer||"length"in t){if(typeof t.length!=="number"||Nt(t.length)){return Ye(e,0)}return We(e,t)}if(t.type==="Buffer"&&Ue(t.data)){return We(e,t.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Ze(e){if(e>=ze()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+ze().toString(16)+" bytes")}return e|0}c.isBuffer=Rt;function Xe(e){return!!(e!=null&&e._isBuffer)}c.compare=function e(t,r){if(!Xe(t)||!Xe(r)){throw new TypeError("Arguments must be Buffers")}if(t===r)return 0;var n=t.length;var i=r.length;for(var a=0,u=Math.min(n,i);a<u;++a){if(t[a]!==r[a]){n=t[a];i=r[a];break}}if(n<i)return-1;if(i<n)return 1;return 0};c.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};c.concat=function e(t,r){if(!Ue(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return c.alloc(0)}var n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}var i=c.allocUnsafe(r);var a=0;for(n=0;n<t.length;++n){var u=t[n];if(!Xe(u)){throw new TypeError('"list" argument must be an Array of Buffers')}u.copy(i,a);a+=u.length}return i};function et(e,t){if(Xe(e)){return e.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){e=""+e}var r=e.length;if(r===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case undefined:return St(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return It(e).length;default:if(n)return St(e).length;t=(""+t).toLowerCase();n=true}}}c.byteLength=et;function tt(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return yt(this,t,r);case"utf8":case"utf-8":return ht(this,t,r);case"ascii":return dt(this,t,r);case"latin1":case"binary":return vt(this,t,r);case"base64":return lt(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mt(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}c.prototype._isBuffer=true;function rt(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}c.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){rt(this,r,r+1)}return this};c.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){rt(this,r,r+3);rt(this,r+1,r+2)}return this};c.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){rt(this,r,r+7);rt(this,r+1,r+6);rt(this,r+2,r+5);rt(this,r+3,r+4)}return this};c.prototype.toString=function e(){var t=this.length|0;if(t===0)return"";if(arguments.length===0)return ht(this,0,t);return tt.apply(this,arguments)};c.prototype.equals=function e(t){if(!Xe(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return c.compare(this,t)===0};c.prototype.inspect=function e(){var t="";var r=qe;if(this.length>0){t=this.toString("hex",0,r).match(/.{2}/g).join(" ");if(this.length>r)t+=" ... "}return"<Buffer "+t+">"};c.prototype.compare=function e(t,r,n,i,a){if(!Xe(t)){throw new TypeError("Argument must be a Buffer")}if(r===undefined){r=0}if(n===undefined){n=t?t.length:0}if(i===undefined){i=0}if(a===undefined){a=this.length}if(r<0||n>t.length||i<0||a>this.length){throw new RangeError("out of range index")}if(i>=a&&r>=n){return 0}if(i>=a){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;i>>>=0;a>>>=0;if(this===t)return 0;var u=a-i;var o=n-r;var s=Math.min(u,o);var c=this.slice(i,a);var f=t.slice(r,n);for(var l=0;l<s;++l){if(c[l]!==f[l]){u=c[l];o=f[l];break}}if(u<o)return-1;if(o<u)return 1;return 0};function nt(e,t,r,n,i){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(isNaN(r)){r=i?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(i)return-1;else r=e.length-1}else if(r<0){if(i)r=0;else return-1}if(typeof t==="string"){t=c.from(t,n)}if(Xe(t)){if(t.length===0){return-1}return it(e,t,r,n,i)}else if(typeof t==="number"){t=t&255;if(c.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return it(e,[t],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function it(e,t,r,n,i){var a=1;var u=e.length;var o=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}a=2;u/=2;o/=2;r/=2}}function s(e,t){if(a===1){return e[t]}else{return e.readUInt16BE(t*a)}}var c;if(i){var f=-1;for(c=r;c<u;c++){if(s(e,c)===s(t,f===-1?0:c-f)){if(f===-1)f=c;if(c-f+1===o)return f*a}else{if(f!==-1)c-=c-f;f=-1}}}else{if(r+o>u)r=u-o;for(c=r;c>=0;c--){var l=true;for(var h=0;h<o;h++){if(s(e,c+h)!==s(t,h)){l=false;break}}if(l)return c}}return-1}c.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};c.prototype.indexOf=function e(t,r,n){return nt(this,t,r,n,true)};c.prototype.lastIndexOf=function e(t,r,n){return nt(this,t,r,n,false)};function at(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");if(n>a/2){n=a/2}for(var u=0;u<n;++u){var o=parseInt(t.substr(u*2,2),16);if(isNaN(o))return u;e[r+u]=o}return u}function ut(e,t,r,n){return Pt(St(t,e.length-r),e,r,n)}function ot(e,t,r,n){return Pt(Bt(t),e,r,n)}function st(e,t,r,n){return ot(e,t,r,n)}function ct(e,t,r,n){return Pt(It(t),e,r,n)}function ft(e,t,r,n){return Pt(jt(t,e.length-r),e,r,n)}c.prototype.write=function e(t,r,n,i){if(r===undefined){i="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){i=r;n=this.length;r=0}else if(isFinite(r)){r=r|0;if(isFinite(n)){n=n|0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var a=this.length-r;if(n===undefined||n>a)n=a;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";var u=false;for(;;){switch(i){case"hex":return at(this,t,r,n);case"utf8":case"utf-8":return ut(this,t,r,n);case"ascii":return ot(this,t,r,n);case"latin1":case"binary":return st(this,t,r,n);case"base64":return ct(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ft(this,t,r,n);default:if(u)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();u=true}}};c.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function lt(e,t,r){if(t===0&&r===e.length){return Re(e)}else{return Re(e.slice(t,r))}}function ht(e,t,r){r=Math.min(e.length,r);var n=[];var i=t;while(i<r){var a=e[i];var u=null;var o=a>239?4:a>223?3:a>191?2:1;if(i+o<=r){var s,c,f,l;switch(o){case 1:if(a<128){u=a}break;case 2:s=e[i+1];if((s&192)===128){l=(a&31)<<6|s&63;if(l>127){u=l}}break;case 3:s=e[i+1];c=e[i+2];if((s&192)===128&&(c&192)===128){l=(a&15)<<12|(s&63)<<6|c&63;if(l>2047&&(l<55296||l>57343)){u=l}}break;case 4:s=e[i+1];c=e[i+2];f=e[i+3];if((s&192)===128&&(c&192)===128&&(f&192)===128){l=(a&15)<<18|(s&63)<<12|(c&63)<<6|f&63;if(l>65535&&l<1114112){u=l}}}}if(u===null){u=65533;o=1}else if(u>65535){u-=65536;n.push(u>>>10&1023|55296);u=56320|u&1023}n.push(u);i+=o}return _t(n)}var pt=4096;function _t(e){var t=e.length;if(t<=pt){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=pt))}return r}function dt(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i]&127)}return n}function vt(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i])}return n}function yt(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var i="";for(var a=t;a<r;++a){i+=Ot(e[a])}return i}function mt(e,t,r){var n=e.slice(t,r);var i="";for(var a=0;a<n.length;a+=2){i+=String.fromCharCode(n[a]+n[a+1]*256)}return i}c.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;var i;if(c.TYPED_ARRAY_SUPPORT){i=this.subarray(t,r);i.__proto__=c.prototype}else{var a=r-t;i=new c(a,undefined);for(var u=0;u<a;++u){i[u]=this[u+t]}}return i};function gt(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUIntLE=function e(t,r,n){t=t|0;r=r|0;if(!n)gt(t,r,this.length);var i=this[t];var a=1;var u=0;while(++u<r&&(a*=256)){i+=this[t+u]*a}return i};c.prototype.readUIntBE=function e(t,r,n){t=t|0;r=r|0;if(!n){gt(t,r,this.length)}var i=this[t+--r];var a=1;while(r>0&&(a*=256)){i+=this[t+--r]*a}return i};c.prototype.readUInt8=function e(t,r){if(!r)gt(t,1,this.length);return this[t]};c.prototype.readUInt16LE=function e(t,r){if(!r)gt(t,2,this.length);return this[t]|this[t+1]<<8};c.prototype.readUInt16BE=function e(t,r){if(!r)gt(t,2,this.length);return this[t]<<8|this[t+1]};c.prototype.readUInt32LE=function e(t,r){if(!r)gt(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};c.prototype.readUInt32BE=function e(t,r){if(!r)gt(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};c.prototype.readIntLE=function e(t,r,n){t=t|0;r=r|0;if(!n)gt(t,r,this.length);var i=this[t];var a=1;var u=0;while(++u<r&&(a*=256)){i+=this[t+u]*a}a*=128;if(i>=a)i-=Math.pow(2,8*r);return i};c.prototype.readIntBE=function e(t,r,n){t=t|0;r=r|0;if(!n)gt(t,r,this.length);var i=r;var a=1;var u=this[t+--i];while(i>0&&(a*=256)){u+=this[t+--i]*a}a*=128;if(u>=a)u-=Math.pow(2,8*r);return u};c.prototype.readInt8=function e(t,r){if(!r)gt(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};c.prototype.readInt16LE=function e(t,r){if(!r)gt(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};c.prototype.readInt16BE=function e(t,r){if(!r)gt(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};c.prototype.readInt32LE=function e(t,r){if(!r)gt(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};c.prototype.readInt32BE=function e(t,r){if(!r)gt(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};c.prototype.readFloatLE=function e(t,r){if(!r)gt(t,4,this.length);return Te(this,t,true,23,4)};c.prototype.readFloatBE=function e(t,r){if(!r)gt(t,4,this.length);return Te(this,t,false,23,4)};c.prototype.readDoubleLE=function e(t,r){if(!r)gt(t,8,this.length);return Te(this,t,true,52,8)};c.prototype.readDoubleBE=function e(t,r){if(!r)gt(t,8,this.length);return Te(this,t,false,52,8)};function bt(e,t,r,n,i,a){if(!Xe(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}c.prototype.writeUIntLE=function e(t,r,n,i){t=+t;r=r|0;n=n|0;if(!i){var a=Math.pow(2,8*n)-1;bt(this,t,r,n,a,0)}var u=1;var o=0;this[r]=t&255;while(++o<n&&(u*=256)){this[r+o]=t/u&255}return r+n};c.prototype.writeUIntBE=function e(t,r,n,i){t=+t;r=r|0;n=n|0;if(!i){var a=Math.pow(2,8*n)-1;bt(this,t,r,n,a,0)}var u=n-1;var o=1;this[r+u]=t&255;while(--u>=0&&(o*=256)){this[r+u]=t/o&255}return r+n};c.prototype.writeUInt8=function e(t,r,n){t=+t;r=r|0;if(!n)bt(this,t,r,1,255,0);if(!c.TYPED_ARRAY_SUPPORT)t=Math.floor(t);this[r]=t&255;return r+1};function wt(e,t,r,n){if(t<0)t=65535+t+1;for(var i=0,a=Math.min(e.length-r,2);i<a;++i){e[r+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}}c.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r|0;if(!n)bt(this,t,r,2,65535,0);if(c.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8}else{wt(this,t,r,true)}return r+2};c.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r|0;if(!n)bt(this,t,r,2,65535,0);if(c.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=t&255}else{wt(this,t,r,false)}return r+2};function Dt(e,t,r,n){if(t<0)t=4294967295+t+1;for(var i=0,a=Math.min(e.length-r,4);i<a;++i){e[r+i]=t>>>(n?i:3-i)*8&255}}c.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r|0;if(!n)bt(this,t,r,4,4294967295,0);if(c.TYPED_ARRAY_SUPPORT){this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255}else{Dt(this,t,r,true)}return r+4};c.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r|0;if(!n)bt(this,t,r,4,4294967295,0);if(c.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255}else{Dt(this,t,r,false)}return r+4};c.prototype.writeIntLE=function e(t,r,n,i){t=+t;r=r|0;if(!i){var a=Math.pow(2,8*n-1);bt(this,t,r,n,a-1,-a)}var u=0;var o=1;var s=0;this[r]=t&255;while(++u<n&&(o*=256)){if(t<0&&s===0&&this[r+u-1]!==0){s=1}this[r+u]=(t/o>>0)-s&255}return r+n};c.prototype.writeIntBE=function e(t,r,n,i){t=+t;r=r|0;if(!i){var a=Math.pow(2,8*n-1);bt(this,t,r,n,a-1,-a)}var u=n-1;var o=1;var s=0;this[r+u]=t&255;while(--u>=0&&(o*=256)){if(t<0&&s===0&&this[r+u+1]!==0){s=1}this[r+u]=(t/o>>0)-s&255}return r+n};c.prototype.writeInt8=function e(t,r,n){t=+t;r=r|0;if(!n)bt(this,t,r,1,127,-128);if(!c.TYPED_ARRAY_SUPPORT)t=Math.floor(t);if(t<0)t=255+t+1;this[r]=t&255;return r+1};c.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r|0;if(!n)bt(this,t,r,2,32767,-32768);if(c.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8}else{wt(this,t,r,true)}return r+2};c.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r|0;if(!n)bt(this,t,r,2,32767,-32768);if(c.TYPED_ARRAY_SUPPORT){this[r]=t>>>8;this[r+1]=t&255}else{wt(this,t,r,false)}return r+2};c.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r|0;if(!n)bt(this,t,r,4,2147483647,-2147483648);if(c.TYPED_ARRAY_SUPPORT){this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24}else{Dt(this,t,r,true)}return r+4};c.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r|0;if(!n)bt(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;if(c.TYPED_ARRAY_SUPPORT){this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255}else{Dt(this,t,r,false)}return r+4};function Et(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function At(e,t,r,n,i){if(!i){Et(e,t,r,4)}Le(e,t,r,n,23,4);return r+4}c.prototype.writeFloatLE=function e(t,r,n){return At(this,t,r,true,n)};c.prototype.writeFloatBE=function e(t,r,n){return At(this,t,r,false,n)};function xt(e,t,r,n,i){if(!i){Et(e,t,r,8)}Le(e,t,r,n,52,8);return r+8}c.prototype.writeDoubleLE=function e(t,r,n){return xt(this,t,r,true,n)};c.prototype.writeDoubleBE=function e(t,r,n){return xt(this,t,r,false,n)};c.prototype.copy=function e(t,r,n,i){if(!n)n=0;if(!i&&i!==0)i=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(t.length-r<i-n){i=t.length-r+n}var a=i-n;var u;if(this===t&&n<r&&r<i){for(u=a-1;u>=0;--u){t[u+r]=this[u+n]}}else if(a<1e3||!c.TYPED_ARRAY_SUPPORT){for(u=0;u<a;++u){t[u+r]=this[u+n]}}else{Uint8Array.prototype.set.call(t,this.subarray(n,n+a),r)}return a};c.prototype.fill=function e(t,r,n,i){if(typeof t==="string"){if(typeof r==="string"){i=r;r=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(t.length===1){var a=t.charCodeAt(0);if(a<256){t=a}}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!c.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}}else if(typeof t==="number"){t=t&255}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var u;if(typeof t==="number"){for(u=r;u<n;++u){this[u]=t}}else{var o=Xe(t)?t:St(new c(t,i).toString());var s=o.length;for(u=0;u<n-r;++u){this[u+r]=o[u%s]}}return this};var Ft=/[^+\/0-9A-Za-z-_]/g;function kt(e){e=Ct(e).replace(Ft,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function Ct(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function Ot(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function St(e,t){t=t||Infinity;var r;var n=e.length;var i=null;var a=[];for(var u=0;u<n;++u){r=e.charCodeAt(u);if(r>55295&&r<57344){if(!i){if(r>56319){if((t-=3)>-1)a.push(239,191,189);continue}else if(u+1===n){if((t-=3)>-1)a.push(239,191,189);continue}i=r;continue}if(r<56320){if((t-=3)>-1)a.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((t-=3)>-1)a.push(239,191,189)}i=null;if(r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return a}function Bt(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function jt(e,t){var r,n,i;var a=[];for(var u=0;u<e.length;++u){if((t-=2)<0)break;r=e.charCodeAt(u);n=r>>8;i=r%256;a.push(i);a.push(n)}return a}function It(e){return Ie(kt(e))}function Pt(e,t,r,n){for(var i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function Nt(e){return e!==e}function Rt(e){return e!=null&&(!!e._isBuffer||Tt(e)||Lt(e))}function Tt(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)}function Lt(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&Tt(e.slice(0,0))}let Mt;try{Mt=new TextDecoder}catch(e){}let v;let Ut;let y=0;const qt=105;const zt=57342;const Yt=57343;const Vt=57337;const $t=6;const Jt={};let _={};let Kt;let Ht;let Wt=0;let Gt=0;let Qt;let Zt;let Xt=[];let er=[];let tr;let rr;let nr;let ir={useRecords:false,mapsAsObjects:true};let ar=false;let ur=2;try{new Function("")}catch(e){ur=Infinity}class or{constructor(r){if(r){if((r.keyMap||r._keyMap)&&!r.useRecords){r.useRecords=false;r.mapsAsObjects=true}if(r.useRecords===false&&r.mapsAsObjects===undefined)r.mapsAsObjects=true;if(r.getStructures)r.getShared=r.getStructures;if(r.getShared&&!r.structures)(r.structures=[]).uninitialized=true;if(r.keyMap){this.mapKey=new Map;for(let[e,t]of Object.entries(r.keyMap))this.mapKey.set(t,e)}}Object.assign(this,r)}decodeKey(e){return this.keyMap?this.mapKey.get(e)||e:e}encodeKey(e){return this.keyMap&&this.keyMap.hasOwnProperty(e)?this.keyMap[e]:e}encodeKeys(r){if(!this._keyMap)return r;let n=new Map;for(let[e,t]of Object.entries(r))n.set(this._keyMap.hasOwnProperty(e)?this._keyMap[e]:e,t);return n}decodeKeys(e){if(!this._keyMap||e.constructor.name!="Map")return e;if(!this._mapKey){this._mapKey=new Map;for(let[e,t]of Object.entries(this._keyMap))this._mapKey.set(t,e)}let r={};e.forEach((e,t)=>r[lr(this._mapKey.has(t)?this._mapKey.get(t):t)]=e);return r}mapDecode(e,t){let r=this.decode(e);if(this._keyMap){switch(r.constructor.name){case"Array":return r.map(e=>this.decodeKeys(e))}}return r}decode(t,e){if(v){return Nr(()=>{Rr();return this?this.decode(t,e):or.prototype.decode.call(ir,t,e)})}Ut=e>-1?e:t.length;y=0;Gt=0;Ht=null;Qt=null;v=t;try{rr=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(e){v=null;if(t instanceof Uint8Array)throw e;throw new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof or){_=this;tr=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues);if(this.structures){Kt=this.structures;return sr()}else if(!Kt||Kt.length>0){Kt=[]}}else{_=ir;if(!Kt||Kt.length>0)Kt=[];tr=null}return sr()}decodeMultiple(r,n){let i,a=0;try{let e=r.length;ar=true;let t=this?this.decode(r,e):Mr.decode(r,e);if(n){if(n(t)===false){return}while(y<e){a=y;if(n(sr())===false){return}}}else{i=[t];while(y<e){a=y;i.push(sr())}return i}}catch(e){e.lastPosition=a;e.values=i;throw e}finally{ar=false;Rr()}}}function sr(){try{let e=a();if(Qt){if(y>=Qt.postBundlePosition){let e=new Error("Unexpected bundle position");e.incomplete=true;throw e}y=Qt.postBundlePosition;Qt=null}if(y==Ut){Kt=null;v=null;if(Zt)Zt=null}else if(y>Ut){let e=new Error("Unexpected end of CBOR data");e.incomplete=true;throw e}else if(!ar){throw new Error("Data read, but end of buffer not reached")}return e}catch(e){Rr();if(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")){e.incomplete=true}throw e}}function a(){let n=v[y++];let i=n>>5;n=n&31;if(n>23){switch(n){case 24:n=v[y++];break;case 25:if(i==7){return br()}n=rr.getUint16(y);y+=2;break;case 26:if(i==7){let t=rr.getFloat32(y);if(_.useFloat32>2){let e=Lr[(v[y]&127)<<1|v[y+1]>>7];y+=4;return(e*t+(t>0?.5:-.5)>>0)/e}y+=4;return t}n=rr.getUint32(y);y+=4;break;case 27:if(i==7){let e=rr.getFloat64(y);y+=8;return e}if(i>1){if(rr.getUint32(y)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");n=rr.getUint32(y+4)}else if(_.int64AsNumber){n=rr.getUint32(y)*4294967296;n+=rr.getUint32(y+4)}else n=rr.getBigUint64(y);y+=8;break;case 31:switch(i){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let e=[];let t,r=0;while((t=a())!=Jt){e[r++]=t}return i==4?e:i==3?e.join(""):c.concat(e);case 5:let n;if(_.mapsAsObjects){let e={};if(_.keyMap)while((n=a())!=Jt)e[lr(_.decodeKey(n))]=a();else while((n=a())!=Jt)e[lr(n)]=a();return e}else{if(nr){_.mapsAsObjects=true;nr=false}let e=new Map;if(_.keyMap)while((n=a())!=Jt)e.set(_.decodeKey(n),a());else while((n=a())!=Jt)e.set(n,a());return e}case 7:return Jt;default:throw new Error("Invalid major type for indefinite length "+i)}default:throw new Error("Unknown token "+n)}}switch(i){case 0:return n;case 1:return~n;case 2:return yr(n);case 3:if(Gt>=y){return Ht.slice(y-Wt,(y+=n)-Wt)}if(Gt==0&&Ut<140&&n<32){let e=n<16?vr(n):dr(n);if(e!=null)return e}return hr(n);case 4:let t=new Array(n);for(let e=0;e<n;e++)t[e]=a();return t;case 5:if(_.mapsAsObjects){let t={};if(_.keyMap)for(let e=0;e<n;e++)t[lr(_.decodeKey(a()))]=a();else for(let e=0;e<n;e++)t[lr(a())]=a();return t}else{if(nr){_.mapsAsObjects=true;nr=false}let t=new Map;if(_.keyMap)for(let e=0;e<n;e++)t.set(_.decodeKey(a()),a());else for(let e=0;e<n;e++)t.set(a(),a());return t}case 6:if(n>=Vt){let e=Kt[n&8191];if(e){if(!e.read)e.read=fr(e);return e.read()}if(n<65536){if(n==Yt){let e=Ir();let t=a();let r=a();Dr(t,r);let n={};if(_.keyMap)for(let t=2;t<e;t++){let e=_.decodeKey(r[t-2]);n[lr(e)]=a()}else for(let t=2;t<e;t++){let e=r[t-2];n[lr(e)]=a()}return n}else if(n==zt){let t=Ir();let r=a();for(let e=2;e<t;e++){Dr(r++,a())}return a()}else if(n==Vt){return jr()}if(_.getShared){Pr();e=Kt[n&8191];if(e){if(!e.read)e.read=fr(e);return e.read()}}}}let e=Xt[n];if(e){if(e.handlesRead)return e(a);else return e(a())}else{let r=a();for(let t=0;t<er.length;t++){let e=er[t](n,r);if(e!==undefined)return e}return new wr(r,n)}case 7:switch(n){case 20:return false;case 21:return true;case 22:return null;case 23:return;case 31:default:let e=(tr||Fr())[n];if(e!==undefined)return e;throw new Error("Unknown token "+n)}default:if(isNaN(n)){let e=new Error("Unexpected end of CBOR data");e.incomplete=true;throw e}throw new Error("Unknown CBOR token "+n)}}const cr=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function fr(e){function t(){let t=v[y++];t=t&31;if(t>23){switch(t){case 24:t=v[y++];break;case 25:t=rr.getUint16(y);y+=2;break;case 26:t=rr.getUint32(y);y+=4;break;default:throw new Error("Expected array header, but got "+v[y-1])}}let r=this.compiledReader;while(r){if(r.propertyCount===t)return r(a);r=r.next}if(this.slowReads++>=ur){let e=this.length==t?this:this.slice(0,t);r=_.keyMap?new Function("r","return {"+e.map(e=>_.decodeKey(e)).map(e=>cr.test(e)?lr(e)+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"}"):new Function("r","return {"+e.map(e=>cr.test(e)?lr(e)+":r()":"["+JSON.stringify(e)+"]:r()").join(",")+"}");if(this.compiledReader)r.next=this.compiledReader;r.propertyCount=t;this.compiledReader=r;return r(a)}let n={};if(_.keyMap)for(let e=0;e<t;e++)n[lr(_.decodeKey(this[e]))]=a();else for(let e=0;e<t;e++){n[lr(this[e])]=a()}return n}e.slowReads=0;return t}function lr(e){if(typeof e==="string")return e==="__proto__"?"__proto_":e;if(typeof e!=="object")return e.toString();throw new Error("Invalid property name type "+typeof e)}let hr=pr;function pr(e){let t;if(e<16){if(t=vr(e))return t}if(e>64&&Mt)return Mt.decode(v.subarray(y,y+=e));const r=y+e;const n=[];t="";while(y<r){const i=v[y++];if((i&128)===0){n.push(i)}else if((i&224)===192){const a=v[y++]&63;n.push((i&31)<<6|a)}else if((i&240)===224){const a=v[y++]&63;const u=v[y++]&63;n.push((i&31)<<12|a<<6|u)}else if((i&248)===240){const a=v[y++]&63;const u=v[y++]&63;const o=v[y++]&63;let e=(i&7)<<18|a<<12|u<<6|o;if(e>65535){e-=65536;n.push(e>>>10&1023|55296);e=56320|e&1023}n.push(e)}else{n.push(i)}if(n.length>=4096){t+=_r.apply(String,n);n.length=0}}if(n.length>0){t+=_r.apply(String,n)}return t}let _r=String.fromCharCode;function dr(t){let r=y;let n=new Array(t);for(let e=0;e<t;e++){const i=v[y++];if((i&128)>0){y=r;return}n[e]=i}return _r.apply(String,n)}function vr(d){if(d<4){if(d<2){if(d===0)return"";else{let e=v[y++];if((e&128)>1){y-=1;return}return _r(e)}}else{let e=v[y++];let t=v[y++];if((e&128)>0||(t&128)>0){y-=2;return}if(d<3)return _r(e,t);let r=v[y++];if((r&128)>0){y-=3;return}return _r(e,t,r)}}else{let l=v[y++];let h=v[y++];let p=v[y++];let _=v[y++];if((l&128)>0||(h&128)>0||(p&128)>0||(_&128)>0){y-=4;return}if(d<6){if(d===4)return _r(l,h,p,_);else{let e=v[y++];if((e&128)>0){y-=5;return}return _r(l,h,p,_,e)}}else if(d<8){let e=v[y++];let t=v[y++];if((e&128)>0||(t&128)>0){y-=6;return}if(d<7)return _r(l,h,p,_,e,t);let r=v[y++];if((r&128)>0){y-=7;return}return _r(l,h,p,_,e,t,r)}else{let o=v[y++];let s=v[y++];let c=v[y++];let f=v[y++];if((o&128)>0||(s&128)>0||(c&128)>0||(f&128)>0){y-=8;return}if(d<10){if(d===8)return _r(l,h,p,_,o,s,c,f);else{let e=v[y++];if((e&128)>0){y-=9;return}return _r(l,h,p,_,o,s,c,f,e)}}else if(d<12){let e=v[y++];let t=v[y++];if((e&128)>0||(t&128)>0){y-=10;return}if(d<11)return _r(l,h,p,_,o,s,c,f,e,t);let r=v[y++];if((r&128)>0){y-=11;return}return _r(l,h,p,_,o,s,c,f,e,t,r)}else{let n=v[y++];let i=v[y++];let a=v[y++];let u=v[y++];if((n&128)>0||(i&128)>0||(a&128)>0||(u&128)>0){y-=12;return}if(d<14){if(d===12)return _r(l,h,p,_,o,s,c,f,n,i,a,u);else{let e=v[y++];if((e&128)>0){y-=13;return}return _r(l,h,p,_,o,s,c,f,n,i,a,u,e)}}else{let e=v[y++];let t=v[y++];if((e&128)>0||(t&128)>0){y-=14;return}if(d<15)return _r(l,h,p,_,o,s,c,f,n,i,a,u,e,t);let r=v[y++];if((r&128)>0){y-=15;return}return _r(l,h,p,_,o,s,c,f,n,i,a,u,e,t,r)}}}}}function yr(e){return _.copyBuffers?Uint8Array.prototype.slice.call(v,y,y+=e):v.subarray(y,y+=e)}let mr=new Float32Array(1);let gr=new Uint8Array(mr.buffer,0,4);function br(){let t=v[y++];let r=v[y++];let e=(t&127)>>2;if(e===31){if(r||t&3)return NaN;return t&128?-Infinity:Infinity}if(e===0){let e=((t&3)<<8|r)/(1<<24);return t&128?-e:e}gr[3]=t&128|(e>>1)+56;gr[2]=(t&7)<<5|r>>3;gr[1]=r<<5;gr[0]=0;return mr[0]}new Array(4096);class wr{constructor(e,t){this.value=e;this.tag=t}}Xt[0]=e=>{return new Date(e)};Xt[1]=e=>{return new Date(Math.round(e*1e3))};Xt[2]=r=>{let n=BigInt(0);for(let e=0,t=r.byteLength;e<t;e++){n=BigInt(r[e])+n<<BigInt(8)}return n};Xt[3]=e=>{return BigInt(-1)-Xt[2](e)};Xt[4]=e=>{return+(e[1]+"e"+e[0])};Xt[5]=e=>{return e[1]*Math.exp(e[0]*Math.log(2))};const Dr=(e,t)=>{e=e-57344;let r=Kt[e];if(r&&r.isShared){(Kt.restoreStructures||(Kt.restoreStructures=[]))[e]=r}Kt[e]=t;t.read=fr(t)};Xt[qt]=r=>{let e=r.length;let n=r[1];Dr(r[0],n);let i={};for(let t=2;t<e;t++){let e=n[t-2];i[lr(e)]=r[t]}return i};Xt[14]=e=>{if(Qt)return Qt[0].slice(Qt.position0,Qt.position0+=e);return new wr(e,14)};Xt[15]=e=>{if(Qt)return Qt[1].slice(Qt.position1,Qt.position1+=e);return new wr(e,15)};let Er={Error:Error,RegExp:RegExp};Xt[27]=e=>{return(Er[e[0]]||Error)(e[1],e[2])};const Ar=e=>{if(v[y++]!=132){let e=new Error("Packed values structure must be followed by a 4 element array");if(v.length<y)e.incomplete=true;throw e}let t=e();if(!t||!t.length){let e=new Error("Packed values structure must be followed by a 4 element array");e.incomplete=true;throw e}tr=tr?t.concat(tr.slice(t.length)):t;tr.prefixes=e();tr.suffixes=e();return e()};Ar.handlesRead=true;Xt[51]=Ar;Xt[$t]=e=>{if(!tr){if(_.getShared)Pr();else return new wr(e,$t)}if(typeof e=="number")return tr[16+(e>=0?2*e:-2*e-1)];let t=new Error("No support for non-integer packed references yet");if(e===undefined)t.incomplete=true;throw t};Xt[28]=e=>{if(!Zt){Zt=new Map;Zt.id=0}let t=Zt.id++;let r=v[y];let n;if(r>>5==4)n=[];else n={};let i={target:n};Zt.set(t,i);let a=e();if(i.used)return Object.assign(n,a);i.target=a;return a};Xt[28].handlesRead=true;Xt[29]=e=>{let t=Zt.get(e);t.used=true;return t.target};Xt[258]=e=>new Set(e);(Xt[259]=e=>{if(_.mapsAsObjects){_.mapsAsObjects=false;nr=true}return e()}).handlesRead=true;function xr(e,t){if(typeof e==="string")return e+t;if(e instanceof Array)return e.concat(t);return Object.assign({},e,t)}function Fr(){if(!tr){if(_.getShared)Pr();else throw new Error("No packed values available")}return tr}const kr=1399353956;er.push((e,t)=>{if(e>=225&&e<=255)return xr(Fr().prefixes[e-224],t);if(e>=28704&&e<=32767)return xr(Fr().prefixes[e-28672],t);if(e>=1879052288&&e<=2147483647)return xr(Fr().prefixes[e-1879048192],t);if(e>=216&&e<=223)return xr(t,Fr().suffixes[e-216]);if(e>=27647&&e<=28671)return xr(t,Fr().suffixes[e-27639]);if(e>=1811940352&&e<=1879048191)return xr(t,Fr().suffixes[e-1811939328]);if(e==kr){return{packedValues:tr,structures:Kt.slice(0),version:t}}if(e==55799)return t});const Cr=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;const Or=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array=="undefined"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array=="undefined"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array];const Sr=[64,68,69,70,71,72,77,78,79,85,86];for(let e=0;e<Or.length;e++){Br(Or[e],Sr[e])}function Br(o,s){let c="get"+o.name.slice(0,-5);let t;if(typeof o==="function")t=o.BYTES_PER_ELEMENT;else o=null;for(let u=0;u<2;u++){if(!u&&t==1)continue;let a=t==2?1:t==4?2:3;Xt[u?s:s-4]=t==1||u==Cr?e=>{if(!o)throw new Error("Could not find typed array for code "+s);if(!_.copyBuffers){if(t===1||t===2&&!(e.byteOffset&1)||t===4&&!(e.byteOffset&3)||t===8&&!(e.byteOffset&7))return new o(e.buffer,e.byteOffset,e.byteLength)}return new o(Uint8Array.prototype.slice.call(e,0).buffer)}:e=>{if(!o)throw new Error("Could not find typed array for code "+s);let t=new DataView(e.buffer,e.byteOffset,e.byteLength);let r=e.length>>a;let n=new o(r);let i=t[c];for(let e=0;e<r;e++){n[e]=i.call(t,e<<a,u)}return n}}}function jr(){let t=Ir();let e=y+a();for(let e=2;e<t;e++){let e=Ir();y+=e}let r=y;y=e;Qt=[pr(Ir()),pr(Ir())];Qt.position0=0;Qt.position1=0;Qt.postBundlePosition=y;y=r;return a()}function Ir(){let e=v[y++]&31;if(e>23){switch(e){case 24:e=v[y++];break;case 25:e=rr.getUint16(y);y+=2;break;case 26:e=rr.getUint32(y);y+=4;break}}return e}function Pr(){if(_.getShared){let e=Nr(()=>{v=null;return _.getShared()})||{};let t=e.structures||[];_.sharedVersion=e.version;tr=_.sharedValues=e.packedValues;if(Kt===true)_.structures=Kt=t;else Kt.splice.apply(Kt,[0,t.length].concat(t))}}function Nr(e){let t=Ut;let r=y;let n=Wt;let i=Gt;let a=Ht;let u=Zt;let o=Qt;let s=new Uint8Array(v.slice(0,Ut));let c=Kt;let f=_;let l=ar;let h=e();Ut=t;y=r;Wt=n;Gt=i;Ht=a;Zt=u;Qt=o;v=s;ar=l;Kt=c;_=f;rr=new DataView(v.buffer,v.byteOffset,v.byteLength);return h}function Rr(){v=null;Zt=null;Kt=null}function Tr(e){Xt[e.tag]=e.decode}const Lr=new Array(147);for(let e=0;e<256;e++){Lr[e]=+("1e"+Math.floor(45.15-e*.30103))}let Mr=new or({useRecords:false});Mr.decode;Mr.decodeMultiple;let Ur;try{Ur=new TextEncoder}catch(e){}let qr,zr;const Yr=typeof globalThis==="object"&&globalThis.Buffer;const Vr=typeof Yr!=="undefined";const $r=Vr?Yr.allocUnsafeSlow:Uint8Array;const Jr=Vr?Yr:Uint8Array;const Kr=256;const Hr=Vr?4294967296:2144337920;let Wr;let O;let S;let B=0;let Gr;let Qr=null;const Zr=61440;const Xr=/[\u0080-\uFFFF]/;const en=Symbol("record-id");class tn extends or{constructor(r){super(r);this.offset=0;let s;let u;let f;let l;let n;r=r||{};let c=Jr.prototype.utf8Write?function(e,t,r){return O.utf8Write(e,t,r)}:Ur&&Ur.encodeInto?function(e,t){return Ur.encodeInto(e,O.subarray(t)).written}:false;let a=this;let e=r.structures||r.saveStructures;let h=r.maxSharedStructures;if(h==null)h=e?128:0;if(h>8190)throw new Error("Maximum maxSharedStructure is 8190");let i=r.sequential;if(i){h=0}if(!this.structures)this.structures=[];if(this.saveStructures)this.saveShared=this.saveStructures;let p,_,o=r.sharedValues;let d;if(o){d=Object.create(null);for(let e=0,t=o.length;e<t;e++){d[o[e]]=e}}let v=[];let y=0;let m=0;this.mapEncode=function(e,t){if(this._keyMap&&!this._mapped){switch(e.constructor.name){case"Array":e=e.map(e=>this.encodeKeys(e));break}}return this.encode(e,t)};this.encode=function(t,e){if(!O){O=new $r(8192);S=new DataView(O.buffer,0,8192);B=0}Gr=O.length-10;if(Gr-B<2048){O=new $r(O.length);S=new DataView(O.buffer,0,O.length);Gr=O.length-10;B=0}else if(e===vn)B=B+7&2147483640;s=B;if(a.useSelfDescribedHeader){S.setUint32(B,3654940416);B+=3}n=a.structuredClone?new Map:null;if(a.bundleStrings&&typeof t!=="string"){Qr=[];Qr.size=Infinity}else Qr=null;u=a.structures;if(u){if(u.uninitialized){let e=a.getShared()||{};a.structures=u=e.structures||[];a.sharedVersion=e.version;let r=a.sharedValues=e.packedValues;if(r){d={};for(let e=0,t=r.length;e<t;e++)d[r[e]]=e}}let e=u.length;if(e>h&&!i)e=h;if(!u.transitions){u.transitions=Object.create(null);for(let a=0;a<e;a++){let r=u[a];if(!r)continue;let n,i=u.transitions;for(let t=0,e=r.length;t<e;t++){if(i[en]===undefined)i[en]=a;let e=r[t];n=i[e];if(!n){n=i[e]=Object.create(null)}i=n}i[en]=a|1048576}}if(!i)u.nextId=e}if(f)f=false;l=u||[];_=d;if(r.pack){let e=new Map;e.values=[];e.encoder=a;e.maxValues=r.maxPrivatePackedValues||(d?16:Infinity);e.objectMap=d||false;e.samplingPackedValues=p;sn(t,e);if(e.values.length>0){O[B++]=216;O[B++]=51;an(4);let r=e.values;g(r);an(0);an(0);_=Object.create(d||null);for(let e=0,t=r.length;e<t;e++){_[r[e]]=e}}}Wr=e&mn;try{if(Wr)return;g(t);if(Qr){pn(s,g)}a.offset=B;if(n&&n.idsToInsert){B+=n.idsToInsert.length*2;if(B>Gr)w(B);a.offset=B;let e=hn(O.subarray(s,B),n.idsToInsert);n=null;return e}if(e&vn){O.start=s;O.end=B;return O}return O.subarray(s,B)}finally{if(u){if(m<10)m++;if(u.length>h)u.length=h;if(y>1e4){u.transitions=null;m=0;y=0;if(v.length>0)v=[]}else if(v.length>0&&!i){for(let e=0,t=v.length;e<t;e++){v[e][en]=undefined}v=[]}}if(f&&a.saveShared){if(a.structures.length>h){a.structures=a.structures.slice(0,h)}let e=O.subarray(s,B);if(a.updateSharedData()===false)return a.encode(t);return e}if(e&yn)B=s}};this.findCommonStringsToPack=()=>{p=new Map;if(!d)d=Object.create(null);return e=>{let r=e&&e.threshold||4;let n=this.pack?e.maxPrivatePackedValues||16:0;if(!o)o=this.sharedValues=[];for(let[e,t]of p){if(t.count>r){d[e]=n++;o.push(e);f=true}}while(this.saveShared&&this.updateSharedData()===false){}p=null}};const g=u=>{if(B>Gr)O=w(B);var e=typeof u;var o;if(e==="string"){if(_){let e=_[u];if(e>=0){if(e<16)O[B++]=e+224;else{O[B++]=198;if(e&1)g(15-e>>1);else g(e-16>>1)}return}else if(p&&!r.pack){let e=p.get(u);if(e)e.count++;else p.set(u,{count:1})}}let i=u.length;if(Qr&&i>=4&&i<1024){if((Qr.size+=i)>Zr){let e;let t=(Qr[0]?Qr[0].length*3+Qr[1].length:0)+10;if(B+t>Gr)O=w(B+t);O[B++]=217;O[B++]=223;O[B++]=249;O[B++]=Qr.position?132:130;O[B++]=26;e=B-s;B+=4;if(Qr.position){pn(s,g)}Qr=["",""];Qr.size=0;Qr.position=e}let e=Xr.test(u);Qr[e?0:1]+=u;O[B++]=e?206:207;g(i);return}let a;if(i<32){a=1}else if(i<256){a=2}else if(i<65536){a=3}else{a=5}let e=i*3;if(B+e>Gr)O=w(B+e);if(i<64||!c){let e,t,r,n=B+a;for(e=0;e<i;e++){t=u.charCodeAt(e);if(t<128){O[n++]=t}else if(t<2048){O[n++]=t>>6|192;O[n++]=t&63|128}else if((t&64512)===55296&&((r=u.charCodeAt(e+1))&64512)===56320){t=65536+((t&1023)<<10)+(r&1023);e++;O[n++]=t>>18|240;O[n++]=t>>12&63|128;O[n++]=t>>6&63|128;O[n++]=t&63|128}else{O[n++]=t>>12|224;O[n++]=t>>6&63|128;O[n++]=t&63|128}}o=n-B-a}else{o=c(u,B+a,e)}if(o<24){O[B++]=96|o}else if(o<256){if(a<2){O.copyWithin(B+2,B+1,B+1+o)}O[B++]=120;O[B++]=o}else if(o<65536){if(a<3){O.copyWithin(B+3,B+2,B+2+o)}O[B++]=121;O[B++]=o>>8;O[B++]=o&255}else{if(a<5){O.copyWithin(B+5,B+3,B+3+o)}O[B++]=122;S.setUint32(B,o);B+=4}B+=o}else if(e==="number"){if(!this.alwaysUseFloat&&u>>>0===u){if(u<24){O[B++]=u}else if(u<256){O[B++]=24;O[B++]=u}else if(u<65536){O[B++]=25;O[B++]=u>>8;O[B++]=u&255}else{O[B++]=26;S.setUint32(B,u);B+=4}}else if(!this.alwaysUseFloat&&u>>0===u){if(u>=-24){O[B++]=31-u}else if(u>=-256){O[B++]=56;O[B++]=~u}else if(u>=-65536){O[B++]=57;S.setUint16(B,~u);B+=2}else{O[B++]=58;S.setUint32(B,~u);B+=4}}else{let t;if((t=this.useFloat32)>0&&u<4294967296&&u>=-2147483648){O[B++]=250;S.setFloat32(B,u);let e;if(t<4||(e=u*Lr[(O[B]&127)<<1|O[B+1]>>7])>>0===e){B+=4;return}else B--}O[B++]=251;S.setFloat64(B,u);B+=8}}else if(e==="object"){if(!u)O[B++]=246;else{if(n){let t=n.get(u);if(t){O[B++]=216;O[B++]=29;O[B++]=25;if(!t.references){let e=n.idsToInsert||(n.idsToInsert=[]);t.references=[];e.push(t)}t.references.push(B-s);B+=2;return}else n.set(u,{offset:B-s})}let e=u.constructor;if(e===Object){b(u,true)}else if(e===Array){o=u.length;if(o<24){O[B++]=128|o}else{an(o)}for(let e=0;e<o;e++){g(u[e])}}else if(e===Map){if(this.mapsAsObjects?this.useTag259ForMaps!==false:this.useTag259ForMaps){O[B++]=217;O[B++]=1;O[B++]=3}o=u.size;if(o<24){O[B++]=160|o}else if(o<256){O[B++]=184;O[B++]=o}else if(o<65536){O[B++]=185;O[B++]=o>>8;O[B++]=o&255}else{O[B++]=186;S.setUint32(B,o);B+=4}if(a.keyMap){for(let[e,t]of u){g(a.encodeKey(e));g(t)}}else{for(let[e,t]of u){g(e);g(t)}}}else{for(let r=0,e=qr.length;r<e;r++){let e=zr[r];if(u instanceof e){let e=qr[r];let t=e.tag;if(t==undefined)t=e.getTag&&e.getTag.call(this,u);if(t<24){O[B++]=192|t}else if(t<256){O[B++]=216;O[B++]=t}else if(t<65536){O[B++]=217;O[B++]=t>>8;O[B++]=t&255}else if(t>-1){O[B++]=218;S.setUint32(B,t);B+=4}e.encode.call(this,u,g,w);return}}if(u[Symbol.iterator]){if(Wr){let e=new Error("Iterable should be serialized as iterator");e.iteratorNotHandled=true;throw e}O[B++]=159;for(let e of u){g(e)}O[B++]=255;return}if(u[Symbol.asyncIterator]||on(u)){let e=new Error("Iterable/blob should be serialized as iterator");e.iteratorNotHandled=true;throw e}if(this.useToJSON&&u.toJSON){const t=u.toJSON();if(t!==u)return g(t)}b(u,!u.hasOwnProperty)}}}else if(e==="boolean"){O[B++]=u?245:244}else if(e==="bigint"){if(u<BigInt(1)<<BigInt(64)&&u>=0){O[B++]=27;S.setBigUint64(B,u)}else if(u>-(BigInt(1)<<BigInt(64))&&u<0){O[B++]=59;S.setBigUint64(B,-u-BigInt(1))}else{if(this.largeBigIntToFloat){O[B++]=251;S.setFloat64(B,Number(u))}else{throw new RangeError(u+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64")}}B+=8}else if(e==="undefined"){O[B++]=247}else{throw new Error("Unknown type: "+e)}};const b=this.useRecords===false?this.variableMapSize?e=>{let t=Object.keys(e);let r=Object.values(e);let n=t.length;if(n<24){O[B++]=160|n}else if(n<256){O[B++]=184;O[B++]=n}else if(n<65536){O[B++]=185;O[B++]=n>>8;O[B++]=n&255}else{O[B++]=186;S.setUint32(B,n);B+=4}if(a.keyMap){for(let e=0;e<n;e++){g(a.encodeKey(t[e]));g(r[e])}}else{for(let e=0;e<n;e++){g(t[e]);g(r[e])}}}:(t,r)=>{O[B++]=185;let e=B-s;B+=2;let n=0;if(a.keyMap){for(let e in t)if(r||t.hasOwnProperty(e)){g(a.encodeKey(e));g(t[e]);n++}}else{for(let e in t)if(r||t.hasOwnProperty(e)){g(e);g(t[e]);n++}}O[e+++s]=n>>8;O[e+s]=n&255}:(t,r)=>{let n,i=l.transitions||(l.transitions=Object.create(null));let a=0;let u=0;let o;let s;if(this.keyMap){s=Object.keys(t).map(e=>this.encodeKey(e));u=s.length;for(let t=0;t<u;t++){let e=s[t];n=i[e];if(!n){n=i[e]=Object.create(null);a++}i=n}}else{for(let e in t)if(r||t.hasOwnProperty(e)){n=i[e];if(!n){if(i[en]&1048576){o=i[en]&65535}n=i[e]=Object.create(null);a++}i=n;u++}}let c=i[en];if(c!==undefined){c&=65535;O[B++]=217;O[B++]=c>>8|224;O[B++]=c&255}else{if(!s)s=i.__keys__||(i.__keys__=Object.keys(t));if(o===undefined){c=l.nextId++;if(!c){c=0;l.nextId=1}if(c>=Kr){l.nextId=(c=h)+1}}else{c=o}l[c]=s;if(c<h){O[B++]=217;O[B++]=c>>8|224;O[B++]=c&255;i=l.transitions;for(let e=0;e<u;e++){if(i[en]===undefined||i[en]&1048576)i[en]=c;i=i[s[e]]}i[en]=c|1048576;f=true}else{i[en]=c;S.setUint32(B,3655335680);B+=3;if(a)y+=m*a;if(v.length>=Kr-h)v.shift()[en]=undefined;v.push(i);an(u+2);g(57344+c);g(s);if(r===null)return;for(let e in t)if(r||t.hasOwnProperty(e))g(t[e]);return}}if(u<24){O[B++]=128|u}else{an(u)}if(r===null)return;for(let e in t)if(r||t.hasOwnProperty(e))g(t[e])};const w=e=>{let t;if(e>16777216){if(e-s>Hr)throw new Error("Encoded buffer would be larger than maximum buffer size");t=Math.min(Hr,Math.round(Math.max((e-s)*(e>67108864?1.25:2),4194304)/4096)*4096)}else t=(Math.max(e-s<<2,O.length-1)>>12)+1<<12;let r=new $r(t);S=new DataView(r.buffer,0,t);if(O.copy)O.copy(r,0,s,e);else r.set(O.slice(s,e));B-=s;s=0;Gr=r.length-10;return O=r};let D=100;let E=1e3;this.encodeAsIterable=function(e,t){return k(e,t,A)};this.encodeAsAsyncIterable=function(e,t){return k(e,t,C)};function*A(n,i,e){let t=n.constructor;if(t===Object){let r=a.useRecords!==false;if(r)b(n,null);else rn(Object.keys(n).length,160);for(let t in n){let e=n[t];if(!r)g(t);if(e&&typeof e==="object"){if(i[t])yield*A(e,i[t]);else yield*x(e,i,t)}else g(e)}}else if(t===Array){let e=n.length;an(e);for(let t=0;t<e;t++){let e=n[t];if(e&&(typeof e==="object"||B-s>D)){if(i.element)yield*A(e,i.element);else yield*x(e,i,"element")}else g(e)}}else if(n[Symbol.iterator]){O[B++]=159;for(let e of n){if(e&&(typeof e==="object"||B-s>D)){if(i.element)yield*A(e,i.element);else yield*x(e,i,"element")}else g(e)}O[B++]=255}else if(on(n)){rn(n.size,64);yield O.subarray(s,B);yield n;F()}else if(n[Symbol.asyncIterator]){O[B++]=159;yield O.subarray(s,B);yield n;F();O[B++]=255}else{g(n)}if(e&&B>s)yield O.subarray(s,B);else if(B-s>D){yield O.subarray(s,B);F()}}function*x(t,r,n){let i=B-s;try{g(t);if(B-s>D){yield O.subarray(s,B);F()}}catch(e){if(e.iteratorNotHandled){r[n]={};B=s+i;yield*A.call(this,t,r[n])}else throw e}}function F(){D=E;a.encode(null,mn)}function k(e,t,r){if(t&&t.chunkThreshold)D=E=t.chunkThreshold;else D=100;if(e&&typeof e==="object"){a.encode(null,mn);return r(e,a.iterateProperties||(a.iterateProperties={}),true)}return[a.encode(e)]}async function*C(e,t){for(let r of A(e,t,true)){let e=r.constructor;if(e===Jr||e===Uint8Array)yield r;else if(on(r)){let e=r.stream().getReader();let t;while(!(t=await e.read()).done){yield t.value}}else if(r[Symbol.asyncIterator]){for await(let e of r){F();if(e)yield*C(e,t.async||(t.async={}));else yield a.encode(e)}}else{yield r}}}}useBuffer(e){O=e;S=new DataView(O.buffer,O.byteOffset,O.byteLength);B=0}clearSharedData(){if(this.structures)this.structures=[];if(this.sharedValues)this.sharedValues=undefined}updateSharedData(){let t=this.sharedVersion||0;this.sharedVersion=t+1;let e=this.structures.slice(0);let r=new nn(e,this.sharedValues,this.sharedVersion);let n=this.saveShared(r,e=>(e&&e.version||0)==t);if(n===false){r=this.getShared()||{};this.structures=r.structures||[];this.sharedValues=r.packedValues;this.sharedVersion=r.version;this.structures.nextId=this.structures.length}else{e.forEach((e,t)=>this.structures[t]=e)}return n}}function rn(e,t){if(e<24)O[B++]=t|e;else if(e<256){O[B++]=t|24;O[B++]=e}else if(e<65536){O[B++]=t|25;O[B++]=e>>8;O[B++]=e&255}else{O[B++]=t|26;S.setUint32(B,e);B+=4}}class nn{constructor(e,t,r){this.structures=e;this.packedValues=t;this.version=r}}function an(e){if(e<24)O[B++]=128|e;else if(e<256){O[B++]=152;O[B++]=e}else if(e<65536){O[B++]=153;O[B++]=e>>8;O[B++]=e&255}else{O[B++]=154;S.setUint32(B,e);B+=4}}const un=typeof Blob==="undefined"?function(){}:Blob;function on(e){if(e instanceof un)return true;let t=e[Symbol.toStringTag];return t==="Blob"||t==="File"}function sn(r,n){switch(typeof r){case"string":if(r.length>3){if(n.objectMap[r]>-1||n.values.length>=n.maxValues)return;let e=n.get(r);if(e){if(++e.count==2){n.values.push(r)}}else{n.set(r,{count:1});if(n.samplingPackedValues){let e=n.samplingPackedValues.get(r);if(e)e.count++;else n.samplingPackedValues.set(r,{count:1})}}}break;case"object":if(r){if(r instanceof Array){for(let e=0,t=r.length;e<t;e++){sn(r[e],n)}}else{let e=!n.encoder.useRecords;for(var t in r){if(r.hasOwnProperty(t)){if(e)sn(t,n);sn(r[t],n)}}}}break;case"function":console.log(r)}}const cn=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;zr=[Date,Set,Error,RegExp,wr,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array=="undefined"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array=="undefined"?function(){}:BigInt64Array,Float32Array,Float64Array,nn];qr=[{tag:1,encode(e,t){let r=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296){O[B++]=26;S.setUint32(B,r);B+=4}else{O[B++]=251;S.setFloat64(B,r);B+=8}}},{tag:258,encode(e,t){let r=Array.from(e);t(r)}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{getTag(e){return e.tag},encode(e,t){t(e.value)}},{encode(e,t,r){ln(e,r)}},{getTag(e){if(e.constructor===Uint8Array){if(this.tagUint8Array||Vr&&this.tagUint8Array!==false)return 64}},encode(e,t,r){ln(e,r)}},fn(68,1),fn(69,2),fn(70,4),fn(71,8),fn(72,1),fn(77,2),fn(78,4),fn(79,8),fn(85,4),fn(86,8),{encode(t,n){let e=t.packedValues||[];let r=t.structures||[];if(e.values.length>0){O[B++]=216;O[B++]=51;an(4);let r=e.values;n(r);an(0);an(0);packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let e=0,t=r.length;e<t;e++){packedObjectMap[r[e]]=e}}if(r){S.setUint32(B,3655335424);B+=3;let e=r.slice(0);e.unshift(57344);e.push(new wr(t.version,1399353956));n(e)}else n(new wr(t.version,1399353956))}}];function fn(e,t){if(!cn&&t>1)e-=4;return{tag:e,encode:function e(t,r){let n=t.byteLength;let i=t.byteOffset||0;let a=t.buffer||t;r(Vr?Yr.from(a,i,n):new Uint8Array(a,i,n))}}}function ln(e,t){let r=e.byteLength;if(r<24){O[B++]=64+r}else if(r<256){O[B++]=88;O[B++]=r}else if(r<65536){O[B++]=89;O[B++]=r>>8;O[B++]=r&255}else{O[B++]=90;S.setUint32(B,r);B+=4}if(B+r>=O.length){t(B+r)}O.set(e.buffer?e:new Uint8Array(e),B);B+=r}function hn(n,e){let r;let i=e.length*2;let a=n.length-i;e.sort((e,t)=>e.offset>t.offset?1:-1);for(let r=0;r<e.length;r++){let t=e[r];t.id=r;for(let e of t.references){n[e++]=r>>8;n[e]=r&255}}while(r=e.pop()){let e=r.offset;n.copyWithin(e+i,e,a);i-=2;let t=e+i;n[t++]=216;n[t++]=28;a=e}return n}function pn(e,t){S.setUint32(Qr.position+e,B-Qr.position-e+1);let r=Qr;Qr=null;t(r[0]);t(r[1])}function _n(e){if(e.Class){if(!e.encode)throw new Error("Extension has no encode function");zr.unshift(e.Class);qr.unshift(e)}Tr(e)}let dn=new tn({useRecords:false});dn.encode;dn.encodeAsIterable;dn.encodeAsAsyncIterable;const vn=512;const yn=1024;const mn=2048;var gn={};
/**@license
   *
   * No Dependency fast and small LZJB Compression for Browser and Node
   *
   * Copyright (c) 2021 Jakub T. Jankiewicz https://jcubic.pl/me
   * Released under BSD-3-Clause License
   *
   * build: Wed, 27 Oct 2021 10:43:10 GMT
   */Object.defineProperty(gn,"__esModule",{value:true});const bn=8,wn=6,Dn=3,En=(1<<wn)+(Dn-1),An=(1<<16-wn)-1,xn=256;function Fn(e,t){var r=0,n=0,i=0,a=0,u=0,o=1<<bn-1,s=0,c=0,f=0,l=new Int32Array(xn),h=0;for(h=0;h<xn;h++){l[h]=-858993460}r=e.length;while(n<r){if((o<<=1)==1<<bn){o=1;u=i;t[i++]=0}if(n>r-En){t[i++]=e[n++];continue}f=(e[n]+13^e[n+1]-13^e[n+2])&xn-1;c=n-l[f]&An;l[f]=n;a=n-c;if(a>=0&&a!=n&&e[n]==e[a]&&e[n+1]==e[a+1]&&e[n+2]==e[a+2]){t[u]|=o;for(s=Dn;s<En;s++)if(e[n+s]!=e[a+s])break;t[i++]=s-Dn<<bn-wn|c>>bn;t[i++]=c;n+=s}else{t[i++]=e[n++]}}console.assert(e.length>=n);return i}function kn(e,t,r){t=t|0;var n=0,i=0,a=0,u=0,o=1<<(bn-1|0),s=0,c=0;while(n<t){if((o<<=1)===1<<bn){o=1;u=e[n];n=n+1|0}if(u&o){s=(e[n]>>(bn-wn|0))+Dn|0;c=(e[n]<<bn|e[n+1|0])&An;n=n+2|0;a=i-c|0;{while(s>4){r[i]=r[a];i=i+1|0;a=a+1|0;r[i]=r[a];i=i+1|0;a=a+1|0;r[i]=r[a];i=i+1|0;a=a+1|0;r[i]=r[a];i=i+1|0;a=a+1|0;s=s-4|0}while(s>0){r[i]=r[a];i=i+1|0;a=a+1|0;s=s-1|0}}}else{r[i]=e[n];i=i+1|0;n=n+1|0}}return i}function Cn(){const e=new TextEncoder("utf-8");return e.encode(On)}const On="@lzjb";const Sn=Cn();function Bn(...e){if(e.length>1){const r=e.reduce((e,t)=>e+t.length,0);const n=new Uint8Array(r);let t=0;e.forEach(e=>{n.set(e,t);t+=e.length});return n}else if(e.length){return e[0]}}function jn(t){const e=Math.ceil(Math.log2(t)/8);const r=new Uint8Array(e);for(let e=0;e<r.length;e++){const n=t&255;r[e]=n;t=(t-n)/256}return r}function In(t){let r=0;for(let e=t.length-1;e>=0;e--){r=r*256+t[e]}return r}function Pn(e,{magic:t=true}={}){const r=new Uint8Array(Math.max(e.length*1.5|0,16*1024));const n=Fn(e,r);const i=jn(e.length);const a=[Uint8Array.of(i.length),i,r.slice(0,n)];if(t){a.unshift(Sn)}return Bn(...a)}function Nn(t,{magic:e=true}={}){if(e){const e=new TextDecoder("utf-8");const s=e.decode(t.slice(0,Sn.length));if(s!==On){throw new Error("Invalid magic value")}}const r=e?Sn.length:0;const n=t[r];const i=r+1;const a=r+n+1;const u=In(t.slice(i,a));t=t.slice(a);const o=new Uint8Array(u);kn(t,t.length,o);return o}var Rn=gn.pack=Pn;var Tn=gn.unpack=Nn;function Ln(s,c){return c=c||{},new Promise(function(e,t){var r=new XMLHttpRequest,n=[],i=[],a={},u=function(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:u,headers:{keys:function(){return n},entries:function(){return i},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(var o in r.open(c.method||"get",s,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,r){n.push(t=t.toLowerCase()),i.push([t,r]),a[t]=a[t]?a[t]+","+r:r}),e(u())},r.onerror=t,r.withCredentials="include"==c.credentials,c.headers)r.setRequestHeader(o,c.headers[o]);r.send(c.body||null)})}var Mn=["token"],Un=["env"],qn=["stderr","stdin","stdout","command_line"],zn=["use_dynamic"],Yn=["use_dynamic"],Vn=["env","dynamic_env","use_dynamic","error"];function $n(e,t,r){Jn(e,t);t.set(e,r)}function Jn(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Kn(e,t,r){return t=P(t),W(e,Hn()?Reflect.construct(t,r||[],P(e).constructor):t.apply(e,r))}function Hn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Hn=function e(){return!!t})()}function Wn(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Gn(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var i=function e(){};return{s:i,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function e(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=true,u=false,o;return{s:function e(){r=r.call(t)},n:function e(){var t=r.next();a=t.done;return t},e:function e(t){u=true;o=t},f:function e(){try{if(!a&&r["return"]!=null)r["return"]()}finally{if(u)throw o}}}}function Gn(e,t){if(!e)return;if(typeof e==="string")return Qn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qn(e,t)}function Qn(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zn(Object(r),!0).forEach(function(e){fe(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zn(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Xn(e){var t,r,n,i=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new ei(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function ei(e){function n(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return ei=function e(t){this.s=t,this.n=t.next},ei.prototype={s:null,n:null,next:function e(){return n(this.n.apply(this.s,arguments))},return:function e(t){var r=this.s["return"];return void 0===r?Promise.resolve({value:t,done:!0}):n(r.apply(this.s,arguments))},throw:function e(t){var r=this.s["return"];return void 0===r?Promise.reject(t):n(r.apply(this.s,arguments))}},new ei(e)}var ti=typeof global!=="undefined"?global:self;if(!ti.fetch){ti.fetch=Ln}var ri={pair:$,symbol:Y,number:j,array:Array,nil:eu,character:h,values:vs,"input-port":Qo,"output-port":Zo,regex:RegExp,syntax:Cu,eof:ls,macro:J,string:D,"native-symbol":Symbol};var ni=new Map([[NaN,"NaN"],[null,"null"]]);var ii,ai,ui;var oi=ti.BN;function si(r,n){var i=false,e=true,a=r.document,u=a.documentElement,t=a.addEventListener,o=t?"addEventListener":"attachEvent",s=t?"removeEventListener":"detachEvent",c=t?"":"on",f=function e(t){if(t.type=="readystatechange"&&a.readyState!="complete")return;(t.type=="load"?r:a)[s](c+t.type,e,false);if(!i&&(i=true))n.call(r,t.type||t)},l=function t(){try{u.doScroll("left")}catch(e){setTimeout(t,50);return}f("poll")};if(a.readyState=="complete")n.call(r,"lazy");else{if(!t&&u.doScroll){try{e=!r.frameElement}catch(e){}if(e)l()}a[o](c+"DOMContentLoaded",f,false);a[o](c+"readystatechange",f,false);r[o](c+"load",f,false)}}function z(e){if(ci()){if(nu(e)){console.log(Wu(e,function(e){return vu(e,true)}))}else{var t;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}(t=console).log.apply(t,[vu(e,true)].concat(U(n.map(function(e){return vu(e,true)}))))}}}function ci(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=xs&&xs.get("DEBUG",{throwError:false});if(e===null){return t===true}return(t===null||t===void 0?void 0:t.valueOf())===e.valueOf()}function fi(e){return e?"(?:#".concat(e,"(?:#[ie])?|#[ie]#").concat(e,")"):"(?:#[ie])?"}function li(e,t){return"".concat(fi(e),"[+-]?").concat(t,"+/").concat(t,"+")}function hi(e,t){return"".concat(fi(e),"(?:[+-]?(?:").concat(t,"+/").concat(t,"+|nan.0|inf.0|").concat(t,"+))?(?:[+-]i|[+-]?(?:").concat(t,"+/").concat(t,"+|").concat(t,"+|nan.0|inf.0)i)(?=[()[\\]\\s]|$)")}function pi(e,t){return"".concat(fi(e),"[+-]?").concat(t,"+")}var _i=/^#\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimyus]*)$/;var di="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)";var vi="(?:#[ie])?(?:[+-]?(?:[0-9]+/[0-9]+|nan.0|inf.0|".concat(di,"|[+-]?[0-9]+))?(?:").concat(di,"|[+-](?:[0-9]+/[0-9]+|[0-9]+|nan.0|inf.0))i");var yi=new RegExp("^(#[ie])?".concat(di,"$"),"i");function mi(e,t){var r=e==="x"?"(?!\\+|".concat(t,")"):"(?!\\.|".concat(t,")");var n="";if(e===""){n="(?:[-+]?(?:[0-9]+(?:[eE][-+]?[0-9]+)|(?:\\.[0-9]+|[0-9]+\\.[0-9]+(?![0-9]))(?:[eE][-+]?[0-9]+)?))"}return new RegExp("^((?:(?:".concat(n,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+(?!").concat(t,")|[+-]?").concat(t,"+)").concat(r,")?)(").concat(n,"|[-+]?inf.0|[-+]?nan.0|[+-]?").concat(t,"+/").concat(t,"+|[+-]?").concat(t,"+|[+-])i$"),"i")}var gi=function(){var a={};[[10,"","[0-9]"],[16,"x","[0-9a-fA-F]"],[8,"o","[0-7]"],[2,"b","[01]"]].forEach(function(e){var t=b(e,3),r=t[0],n=t[1],i=t[2];a[r]=mi(n,i)});return a}();var bi={alarm:"",backspace:"\b",delete:"",escape:"",newline:"\n",null:"\0",return:"\r",space:" ",tab:"\t",dle:"",soh:"",dc1:"",stx:"",dc2:"",etx:"",dc3:"",eot:"",dc4:"",enq:"",nak:"",ack:"",syn:"",bel:"",etb:"",bs:"\b",can:"",ht:"\t",em:"",lf:"\n",sub:"",vt:"\v",esc:"",ff:"\f",fs:"",cr:"\r",gs:"",so:"",rs:"",si:"",us:"",del:""};function wi(e){var t=[];var r=0;var n=e.length;while(r<n){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var a=e.charCodeAt(r++);if((a&64512)===56320){t.push(((i&1023)<<10)+(a&1023)+65536)}else{t.push(i);r--}}else{t.push(i)}}return t}var Di=Object.keys(bi).join("|");var Ei="#\\\\(?:x[0-9a-f]+|".concat(Di,"|[\\s\\S])");var Ai=new RegExp("^".concat(Ei,"$"),"i");function xi(i){var e=[["o","[0-7]"],["x","[0-9a-fA-F]"],["b","[01]"],["d","[0-9]"],["","[0-9]"]];var t=e.map(function(e){var t=b(e,2),r=t[0],n=t[1];return i(r,n)}).join("|");if(i===hi){t=vi+"|"+t}return t}function Fi(e){return new RegExp("^(?:"+xi(e)+")$","i")}var ki=Fi(hi);var Ci=Fi(li);var Oi=Fi(pi);var Si=new RegExp("^(?:"+pi("","[0-9a-f]")+")$","i");var Bi=new RegExp("^(?:"+li("","[0-9a-f]")+")$","i");var ji=new RegExp("^(?:"+hi("","[0-9a-f]")+")$","i");var Ii=mi("","[0-9a-fA-F]");var Pi=/((?:#[xodbie]){0,2})(.*)/i;function Ni(e){var t=e.match(Pi);var r={};if(t[1]){var n=t[1].replace(/#/g,"").toLowerCase().split("");if(n.includes("x")){r.radix=16}else if(n.includes("o")){r.radix=8}else if(n.includes("b")){r.radix=2}else if(n.includes("d")){r.radix=10}if(n.includes("i")){r.inexact=true}if(n.includes("e")){r.exact=true}}r.number=t[2];return r}function Ri(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var r=Ni(e);var n=r.number.split("/");var i=E({num:j([n[0],r.radix||t]),denom:j([n[1],r.radix||t])});if(r.inexact){return i.valueOf()}else{return i}}function Ti(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var r=Ni(e);if(r.inexact){return g(parseInt(r.number,r.radix||t))}return j([r.number,r.radix||t])}function Li(e){var t=e.match(/#\\x([0-9a-f]+)$/i);var r;if(t){var n=parseInt(t[1],16);r=String.fromCodePoint(n)}else{t=e.match(/#\\([\s\S]+)$/);if(t){r=t[1]}}if(r){return h(r)}throw new Error("Parse: invalid character")}function Mi(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;function t(e){var t;if(e==="+"){t=j(1)}else if(e==="-"){t=j(-1)}else if(e.match(Si)){t=j([e,i])}else if(e.match(Bi)){var r=e.split("/");t=E({num:j([r[0],i]),denom:j([r[1],i])})}else if(e.match(yi)){var n=Yi(e);if(a.exact){return n.toRational()}return n}else if(e.match(/nan.0$/)){return j(NaN)}else if(e.match(/inf.0$/)){if(e[0]==="-"){return j(Number.NEGATIVE_INFINITY)}return j(Number.POSITIVE_INFINITY)}else{throw new Error("Internal Parser Error")}if(a.inexact){return g(t.valueOf())}return t}var a=Ni(e);i=a.radix||i;var r;var n=a.number.match(Ii);if(i!==10&&n){r=n}else{r=a.number.match(gi[i])}var u,o;o=t(r[2]);if(r[1]){u=t(r[1])}else{u=j(0)}if(o.cmp(0)===0&&o.__type__==="bigint"){return u}return m({im:o,re:u})}function Ui(e){return parseInt(e.toString(),10)===e}function qi(e){var t=e.match(/^(([-+]?[0-9]*)(?:\.([0-9]+))?)e([-+]?[0-9]+)/i);if(t){var r=parseInt(t[4],10);var n;var i=t[1].replace(/[-+]?([0-9]*)\..+$/,"$1").length;var a=t[3]&&t[3].length;if(i<Math.abs(r)){n=j([t[1].replace(/\./,""),10]);if(a){r-=a}}}return{exponent:r,mantisa:n}}function zi(e){if(e.match(/e/i)){var t=e.split("e"),r=b(t,2),n=r[0],i=r[1];var a=Math.abs(parseInt(i));if(a<7&&i<0){var u="0".repeat(a-1);var o=n[0]==="-"?"-":"+";var s=n.replace(/(^[-+])|\./g,"");var c="".concat(o,"0.").concat(u).concat(s);return parseFloat(c)}}return parseFloat(e)}function Yi(e){var t=Ni(e);var r=zi(t.number);var n=(t.number.match(/\.0$/)||!t.number.match(/\./))&&!t.number.match(/e/i);if(!t.inexact){if(t.exact&&n){return j(r)}if(Ui(r)&&Number.isSafeInteger(r)&&t.number.match(/e\+?[0-9]/i)){return j(r)}var i=qi(t.number),a=i.mantisa,u=i.exponent;if(a!==undefined&&u!==undefined){var o=j(10).pow(j(Math.abs(u)));if(t.exact&&u<0){return E({num:a,denom:o})}else if(u>0&&(t.exact||!t.number.match(/\./))){return j(a).mul(o)}}}r=g(r);if(t.exact){return r.toRational()}return r}function Vi(e){e=e.replace(/\\x([0-9a-f]+);/gi,function(e,t){return"\\u"+t.padStart(4,"0")}).replace(/\n/g,"\\n");var t=e.match(/(\\*)(\\x[0-9A-F])/i);if(t&&t[1].length%2===0){throw new Error("Invalid string literal, unclosed ".concat(t[2]))}try{var r=D(JSON.parse(e));r.freeze();return r}catch(e){var n=e.message.replace(/in JSON /,"").replace(/.*Error: /,"");throw new Error("Invalid string literal: ".concat(n))}}function $i(e){if(e.match(/^\|.*\|$/)){e=e.replace(/(^\|)|(\|$)/g,"");var r={t:"\t",r:"\r",n:"\n"};e=e.replace(/\\(x[^;]+);/g,function(e,t){return String.fromCharCode(parseInt("0"+t,16))}).replace(/\\(.)/g,function(e,t){return r[t]||t})}return new Y(e)}function Ji(e){if(As.hasOwnProperty(e)){return As[e]}if(e.match(/^"[\s\S]*"$/)){return Vi(e)}else if(e[0]==="#"){var t=e.match(_i);if(t){return new RegExp(t[1],t[2])}else if(e.match(Ai)){return Li(e)}var r=e.match(/#\\(.+)/);if(r&&wi(r[1]).length===1){return Li(e)}}if(e.match(/[0-9a-f]|[+-]i/i)){if(e.match(Oi)){return Ti(e)}else if(e.match(yi)){return Yi(e)}else if(e.match(Ci)){return Ri(e)}else if(e.match(ki)){return Mi(e)}}if(e.match(/^#[iexobd]/)){throw new Error("Invalid numeric constant: "+e)}return $i(e)}function Ki(e){return!(["(",")","[","]"].includes(e)||pa.names().includes(e))}function Hi(e){return Ki(e)&&!(e.match(_i)||e.match(/^"[\s\S]*"$/)||e.match(Oi)||e.match(yi)||e.match(ki)||e.match(Ci)||e.match(Ai)||["#t","#f","nil"].includes(e))}var Wi=/"(?:\\[\S\s]|[^"])*"?/g;function Gi(e){if(typeof e==="string"){var t=/([-\\^$[\]()+{}?*.|])/g;return e.replace(t,"\\$1")}return e}function Qi(){this.data=[]}Qi.prototype.push=function(e){this.data.push(e)};Qi.prototype.top=function(){return this.data[this.data.length-1]};Qi.prototype.pop=function(){return this.data.pop()};Qi.prototype.is_empty=function(){return!this.data.length};function Zi(e){if(e instanceof D){e=e.valueOf()}var t=new s(e,{whitespace:true});var r=[];while(true){var n=t.peek(true);if(n===fs){break}r.push(n);t.skip()}return r}function Xi(e){var t=e.token,r=he(e,Mn);if(t.match(/^"[\s\S]*"$/)&&t.match(/\n/)){var n=new RegExp("^ {1,"+(e.col+1)+"}","mg");t=t.replace(n,"")}return q({token:t},r)}function ea(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){};this.fn=e;this.cont=t}ea.prototype.toString=function(){return"#<Thunk>"};function ta(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return ra(n.apply(this,t))}}function ra(e){while(e instanceof ea){var t=e;e=e.fn();if(!(e instanceof ea)){t.cont()}}return e}function na(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e instanceof D){e=e.toString()}if(t){return Zi(e)}else{var r=Zi(e).map(function(e){if(e.token==="#\\ "||e.token=="#\\\n"){return e.token}return e.token.trim()}).filter(function(e){return e&&!e.match(/^;/)&&!e.match(/^#\|[\s\S]*\|#$/)});return ia(r)}}function ia(e){var t=0;var r=null;var n=[];for(var i=0;i<e.length;++i){var a=e[i];if(a==="#;"){if(["(","["].includes(e[i+1])){t=1;r=i}else{n.push([i,i+2])}i+=1;continue}if(r!==null){if([")","]"].includes(a)){t--}else if(["(","["].includes(a)){t++}if(t===0){n.push([r,i+1]);r=null}}}e=e.slice();n.reverse();for(var u=0,o=n;u<o.length;u++){var s=b(o[u],2),c=s[0],f=s[1];e.splice(c,f-c)}return e}function aa(e){return p(e)==="symbol"||p(e)==="object"&&Object.prototype.toString.call(e)==="[object Symbol]"}function Y(e){if(typeof this!=="undefined"&&this.constructor!==Y||typeof this==="undefined"){return new Y(e)}if(e instanceof D){e=e.valueOf()}if(Y.list[e]instanceof Y){return Y.list[e]}this.__name__=e;if(typeof e==="string"){Y.list[e]=this}}Y.list={};Y.literal=Symbol["for"]("__literal__");Y.object=Symbol["for"]("__object__");Y.is=function(e,t){return e instanceof Y&&(t instanceof Y&&e.__name__===t.__name__||typeof t==="string"&&e.__name__===t||t instanceof RegExp&&t.test(e.__name__))};Y.prototype.toString=function(e){if(aa(this.__name__)){return ua(this.__name__)}var t=this.valueOf();if(e&&t.match(/(^;|[\s()[\]'])/)){return"|".concat(t,"|")}return t};Y.prototype.literal=function(){if(this.is_gensym()){return this[Y.literal]}return this.valueOf()};Y.prototype.serialize=function(){if(D.isString(this.__name__)){return this.__name__}return[ua(this.__name__)]};Y.prototype.valueOf=function(){return this.__name__.valueOf()};Y.prototype.is_gensym=function(){return oa(this.__name__)};function ua(e){return e.toString().replace(/^Symbol\(([^)]+)\)/,"$1")}function oa(e){if(p(e)==="symbol"){return!!e.toString().match(/^Symbol\(#:/)}return false}var sa=function(){var t=0;function r(e,t){var r=new Y(t);yo(r,"__literal__",e);return r}return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e instanceof Y){if(e.is_gensym()){return e}e=e.valueOf()}if(oa(e)){return Y(e)}if(e!==null){return r(e,Symbol("#:".concat(e)))}t++;return r(t,Symbol("#:g".concat(t)))}}();function ca(e){var r=this;var n={pending:true,rejected:false,fulfilled:false,reason:undefined,type:undefined};e=e.then(function(e){n.type=H(e);n.fulfilled=true;n.pending=false;return e});f(this,"_promise",e,{hidden:true});if(d(e["catch"])){e=e["catch"](function(e){n.rejected=true;n.pending=false;n.reason=e})}Object.keys(n).forEach(function(t){Object.defineProperty(r,"__".concat(t,"__"),{enumerable:true,get:function e(){return n[t]}})});f(this,"__promise__",e);this.then=false}ca.prototype.then=function(e){return new ca(this.valueOf().then(e))};ca.prototype["catch"]=function(e){return new ca(this.valueOf()["catch"](e))};ca.prototype.valueOf=function(){if(!this._promise){throw new Error("QuotedPromise: invalid promise created")}return this._promise};ca.prototype.toString=function(){if(this.__pending__){return ca.pending_str}if(this.__rejected__){return ca.rejected_str}return"#<js-promise resolved (".concat(this.__type__,")>")};ca.pending_str="#<js-promise (pending)>";ca.rejected_str="#<js-promise (rejected)>";function fa(e){if(Array.isArray(e)){return Promise.all(la(e)).then(ha)}return e}function la(e){var t=new Array(e.length),r=e.length;while(r--){var n=e[r];if(n instanceof ca){t[r]=new ds(n)}else{t[r]=n}}return t}function ha(e){var t=new Array(e.length),r=e.length;while(r--){var n=e[r];if(n instanceof ds){t[r]=n.valueOf()}else{t[r]=n}}return t}var pa={LITERAL:Symbol["for"]("literal"),SPLICE:Symbol["for"]("splice"),SYMBOL:Symbol["for"]("symbol"),names:function e(){return Object.keys(this.__list__)},type:function e(t){try{return this.get(t).type}catch(e){console.log({name:t});console.log(e);return null}},get:function e(t){return this.__list__[t]},off:function e(t){var r=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(Array.isArray(t)){t.forEach(function(e){return r.off(e,n)})}else if(n===null){delete this.__events__[t]}else{this.__events__=this.__events__.filter(function(e){return e!==n})}},on:function e(t,r){var n=this;if(Array.isArray(t)){t.forEach(function(e){return n.on(e,r)})}else if(!this.__events__[t]){this.__events__[t]=[r]}else{this.__events__[t].push(r)}},trigger:function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}if(this.__events__[t]){this.__events__[t].forEach(function(e){return e.apply(void 0,n)})}},remove:function e(t){delete this.__list__[t];this.trigger("remove")},append:function e(t,r,n){this.__list__[t]={seq:t,symbol:r,type:n};this.trigger("append")},__events__:{},__list__:{}};function _a(e){return pa.names().includes(e)}function da(e){return pa.__builtins__.includes(e)}function va(e){return pa.type(e)===pa.LITERAL}function ya(e){return pa.type(e)===pa.SYMBOL}var ma=[["'",new Y("quote"),pa.LITERAL],["`",new Y("quasiquote"),pa.LITERAL],[",@",new Y("unquote-splicing"),pa.LITERAL],[",",new Y("unquote"),pa.LITERAL],["'>",new Y("quote-promise"),pa.LITERAL]];var ga=ma.map(function(e){return e[0]});Object.freeze(ga);Object.defineProperty(pa,"__builtins__",{writable:false,value:ga});ma.forEach(function(e){var t=b(e,3),r=t[0],n=t[1],i=t[2];pa.append(r,n,i)});var s=function(){function p(e){var t=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.whitespace,i=n===void 0?false:n;ae(this,p);f(this,"__input__",e.replace(/\r/g,""));var a={};["_i","_whitespace","_col","_newline","_line","_state","_next","_token","_prev_char"].forEach(function(r){Object.defineProperty(t,r,{configurable:false,enumerable:false,get:function e(){return a[r]},set:function e(t){a[r]=t}})});this._whitespace=i;this._i=this._line=this._col=this._newline=0;this._state=this._next=this._token=null;this._prev_char=""}ce(p,[{key:"get",value:function e(t){return this.__internal[t]}},{key:"set",value:function e(t,r){this.__internal[t]=r}},{key:"token",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(t){var r=this._line;if(this._whitespace&&this._token==="\n"){--r}return{token:this._token,col:this._col,offset:this._i,line:r}}return this._token}},{key:"peek",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this._i>=this.__input__.length){return fs}if(this._token){return this.token(t)}var r=this.next_token();if(r){this._token=this.__input__.substring(this._i,this._next);return this.token(t)}return fs}},{key:"skip",value:function e(){if(this._next!==null){this._token=null;this._i=this._next}}},{key:"read_line",value:function e(){var t=this.__input__.length;if(this._i>=t){return fs}for(var r=this._i;r<t;++r){var n=this.__input__[r];if(n==="\n"){var i=this.__input__.substring(this._i,r);this._i=r+1;++this._line;return i}}return this.read_rest()}},{key:"read_rest",value:function e(){var t=this._i;this._i=this.__input__.length;return this.__input__.substring(t)}},{key:"read_string",value:function e(t){var r=this.__input__.length;if(this._i>=r){return fs}if(t+this._i>=r){return this.read_rest()}var n=this._i+t;var i=this.__input__.substring(this._i,n);var a=i.match(/\n/g);if(a){this._line+=a.length}this._i=n;return i}},{key:"peek_char",value:function e(){if(this._i>=this.__input__.length){return fs}return h(this.__input__[this._i])}},{key:"read_char",value:function e(){var t=this.peek_char();this.skip_char();return t}},{key:"skip_char",value:function e(){if(this._i<this.__input__.length){++this._i;this._token=null}}},{key:"match_rule",value:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.prev_char,i=r["char"],a=r.next_char;var u=b(t,4),o=u[0],s=u[1],c=u[2],f=u[3];if(t.length!==5){throw new Error("Lexer: Invalid rule of length ".concat(t.length))}if(!i.match(o)){return false}if(!ba(s,n)){return false}if(!ba(c,a)){return false}if(f!==this._state){return false}return true}},{key:"next_token",value:function e(){if(this._i>=this.__input__.length){return false}var t=true;e:for(var r=this._i,n=this.__input__.length;r<n;++r){var i=this.__input__[r];var a=this.__input__[r-1]||"";var u=this.__input__[r+1]||"";if(i==="\n"){++this._line;var o=this._newline;if(this._state===null){this._newline=r+1}if(this._whitespace&&this._state===null){this._next=r+1;this._col=this._i-o;return true}}if(t&&this._state===null&&i.match(/\s/)){if(this._whitespace){if(!u.match(/\s/)){this._next=r+1;this._col=this._i-this._newline;return true}else{continue}}else{this._i=r+1;continue}}t=false;var s=Wn(p.rules),c;try{for(s.s();!(c=s.n()).done;){var f=c.value;if(this.match_rule(f,{prev_char:a,char:i,next_char:u})){var l=f[f.length-1];this._state=l;if(this._state===null){this._next=r+1;this._col=this._i-this._newline;return true}continue e}}}catch(e){s.e(e)}finally{s.f()}if(this._state!==null){continue e}var h=this.__input__.split("\n")[this._line];throw new Error("Invalid Syntax at line ".concat(this._line,"\n").concat(h))}}}]);return p}();s.literal_rule=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(t.length===0){throw new Error("Lexer: invalid literal rule")}if(t.length===1){return[[t,n,i,null,null]]}var a=[];for(var u=0,o=t.length;u<o;++u){var s=[];s.push(t[u]);s.push(t[u-1]||n);s.push(t[u+1]||i);if(u===0){s.push(null);s.push(r)}else if(u===o-1){s.push(r);s.push(null)}else{s.push(r);s.push(r)}a.push(s)}return a};s.string=Symbol["for"]("string");s.string_escape=Symbol["for"]("string_escape");s.symbol=Symbol["for"]("symbol");s.comment=Symbol["for"]("comment");s.regex=Symbol["for"]("regex");s.regex_init=Symbol["for"]("regex_init");s.regex_class=Symbol["for"]("regex_class");s.character=Symbol["for"]("character");s.bracket=Symbol["for"]("bracket");s.b_symbol=Symbol["for"]("b_symbol");s.b_comment=Symbol["for"]("b_comment");s.i_comment=Symbol["for"]("i_comment");s.l_datum=Symbol["for"]("l_datum");s.dot=Symbol["for"]("dot");s.boundary=/^$|[\s()[\]']/;s._rules=[[/"/,null,null,s.string,null],[/"/,null,null,null,s.string],[/"/,null,null,s.string_escape,s.string],[/\\/,null,null,s.string,s.string_escape],[/./,/\\/,null,s.string_escape,s.string],[/#/,null,/[bdxoeitf]/i,null,s.symbol],[/#/,null,/\\/,null,s.character],[/\\/,/#/,/\s/,s.character,s.character],[/\\/,/#/,/[()[\]]/,s.character,s.character],[/\s/,/\\/,null,s.character,null],[/\S/,null,s.boundary,s.character,null],[/#/,s.boundary,/\//,null,s.regex_init],[/./,/\//,null,s.regex_init,s.regex],[/[ \t]/,null,null,s.regex,s.regex],[/\[/,null,null,s.regex,s.regex_class],[/\]/,/[^\\]/,null,s.regex_class,s.regex],[/[()[\]]/,null,null,s.regex,s.regex],[/\//,/\\/,null,s.regex,s.regex],[/\//,null,s.boundary,s.regex,null],[/[gimyus]/,/\//,s.boundary,s.regex,null],[/[gimyus]/,/\//,/[gimyus]/,s.regex,s.regex],[/[gimyus]/,/[gimyus]/,s.boundary,s.regex,null],[/;/,/^$|[^#]/,null,null,s.comment],[/\n/,";",null,s.comment,null],[/[\s\S]/,null,/\n/,s.comment,null],[/\s/,null,null,s.comment,s.comment],[/#/,null,/\|/,null,s.b_comment],[/\s/,null,null,s.b_comment,s.b_comment],[/#/,/\|/,null,s.b_comment,null],[/#/,null,/;/,null,s.i_comment],[/;/,/#/,null,s.i_comment,null],[/#/,null,/[0-9]/,null,s.l_datum],[/=/,/[0-9]/,null,s.l_datum,null],[/#/,/[0-9]/,null,s.l_datum,null],[/\./,s.boundary,/,/,null,null],[/\|/,null,null,null,s.b_symbol],[/\s/,null,null,s.b_symbol,s.b_symbol],[/\|/,null,s.boundary,s.b_symbol,null]];s._brackets=[[/[()[\]]/,null,null,null,null]];s._symbol_rules=[[/\S/,s.boundary,s.boundary,null,null],[/\S/,s.boundary,null,null,s.symbol],[/\S/,null,s.boundary,null,null],[/\S/,null,null,null,s.symbol],[/\S/,null,s.boundary,s.symbol,null]];s._cache={valid:false,rules:null};pa.on(["remove","append"],function(){s._cache.valid=false;s._cache.rules=null});Object.defineProperty(s,"rules",{get:function e(){if(s._cache.valid){return s._cache.rules}var t=pa.names().sort(function(e,t){return t.length-e.length||e.localeCompare(t)});var r=t.reduce(function(e,t){var r=pa.get(t);r.type;var n=r.symbol;var i;var a;if(t[0]==="#"){if(t.length===1){a=Symbol["for"](t)}else{a=Symbol["for"](t[1])}}else{a=n}i=s.literal_rule(t,a);return e.concat(i)},[]);s._cache.rules=s._rules.concat(s._brackets,r,s._symbol_rules);s._cache.valid=true;return s._cache.rules}});function ba(e,t){return e===null||t.match(e)}var wa=function(){function o(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.env,n=t.meta,i=n===void 0?false:n,a=t.formatter,u=a===void 0?Xi:a;ae(this,o);if(e instanceof D){e=e.toString()}f(this,"_formatter",u,{hidden:true});f(this,"__lexer__",new s(e));f(this,"__env__",r);f(this,"_meta",i,{hidden:true});f(this,"_refs",[],{hidden:true});f(this,"_state",{parentheses:0},{hidden:true})}ce(o,[{key:"resolve",value:function e(t){return this.__env__&&this.__env__.get(t,{throwError:false})}},{key:"peek",value:function(){var e=ie(C.mark(function e(){var r;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=this.__lexer__.peek(true);if(!(r===fs)){t.next=4;break}return t.abrupt("return",fs);case 4:if(!this.is_comment(r.token)){t.next=7;break}this.skip();return t.abrupt("continue",0);case 7:if(!(r.token==="#;")){t.next=14;break}this.skip();if(!(this.__lexer__.peek()===fs)){t.next=11;break}throw new Error("Lexer: syntax error eof found after comment");case 11:t.next=13;return this._read_object();case 13:return t.abrupt("continue",0);case 14:return t.abrupt("break",17);case 17:r=this._formatter(r);if(!this._meta){t.next=20;break}return t.abrupt("return",r);case 20:return t.abrupt("return",r.token);case 21:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"reset",value:function e(){this._refs.length=0}},{key:"skip",value:function e(){this.__lexer__.skip()}},{key:"read",value:function(){var e=ie(C.mark(function e(){var r;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return this.peek();case 2:r=t.sent;this.skip();return t.abrupt("return",r);case 5:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"match_datum_label",value:function e(t){var r=t.match(/^#([0-9]+)=$/);return r&&r[1]}},{key:"match_datum_ref",value:function e(t){var r=t.match(/^#([0-9]+)#$/);return r&&r[1]}},{key:"is_open",value:function e(t){var r=["(","["].includes(t);if(r){this._state.parentheses++}return r}},{key:"is_close",value:function e(t){var r=[")","]"].includes(t);if(r){this._state.parentheses--}return r}},{key:"read_list",value:function(){var e=ie(C.mark(function e(){var r,n,i,a,u;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=V,n=r;case 1:t.next=4;return this.peek();case 4:a=t.sent;if(!(a===fs)){t.next=7;break}return t.abrupt("break",32);case 7:if(!this.is_close(a)){t.next=10;break}this.skip();return t.abrupt("break",32);case 10:if(!(a==="."&&r!==V)){t.next=18;break}this.skip();t.next=14;return this._read_object();case 14:n.cdr=t.sent;i=true;t.next=30;break;case 18:if(!i){t.next=22;break}throw new Error("Parser: syntax error more than one element after dot");case 22:t.t0=$;t.next=25;return this._read_object();case 25:t.t1=t.sent;t.t2=V;u=new t.t0(t.t1,t.t2);if(r===V){r=u}else{n.cdr=u}n=u;case 30:t.next=1;break;case 32:return t.abrupt("return",r);case 33:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"read_value",value:function(){var e=ie(C.mark(function e(){var r;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return this.read();case 2:r=t.sent;if(!(r===fs)){t.next=5;break}throw new Error("Parser: Expected token eof found");case 5:return t.abrupt("return",Ji(r));case 6:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"is_comment",value:function e(t){return t.match(/^;/)||t.match(/^#\|/)&&t.match(/\|#$/)}},{key:"evaluate",value:function e(t){return k(t,{env:this.__env__,error:function e(t){throw t}})}},{key:"read_object",value:function(){var e=ie(C.mark(function e(){var r;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:this.reset();t.next=3;return this._read_object();case 3:r=t.sent;if(r instanceof Da){r=r.valueOf()}if(!this._refs.length){t.next=7;break}return t.abrupt("return",this._resolve_object(r));case 7:return t.abrupt("return",r);case 8:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"balanced",value:function e(){return this._state.parentheses===0}},{key:"ballancing_error",value:function e(t,r){var n=this._state.parentheses;var i;if(n<0){i=new Error("Parser: unexpected parenthesis");i.__code__=[r.toString()+")"]}else{i=new Error("Parser: expected parenthesis but eof found");var a=new RegExp("\\){".concat(n,"}$"));i.__code__=[t.toString().replace(a,"")]}throw i}},{key:"_resolve_object",value:function(){var t=ie(C.mark(function e(r){var n=this;var i;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!Array.isArray(r)){t.next=2;break}return t.abrupt("return",r.map(function(e){return n._resolve_object(e)}));case 2:if(!nu(r)){t.next=6;break}i={};Object.keys(r).forEach(function(e){i[e]=n._resolve_object(r[e])});return t.abrupt("return",i);case 6:if(!(r instanceof $)){t.next=8;break}return t.abrupt("return",this._resolve_pair(r));case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}},e,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"_resolve_pair",value:function(){var t=ie(C.mark(function e(r){return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(r instanceof $)){t.next=15;break}if(!(r.car instanceof Da)){t.next=7;break}t.next=4;return r.car.valueOf();case 4:r.car=t.sent;t.next=8;break;case 7:this._resolve_pair(r.car);case 8:if(!(r.cdr instanceof Da)){t.next=14;break}t.next=11;return r.cdr.valueOf();case 11:r.cdr=t.sent;t.next=15;break;case 14:this._resolve_pair(r.cdr);case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}},e,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"_read_object",value:function(){var e=ie(C.mark(function e(){var r,n,i,a,u,o,s,c,f,l,h;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return this.peek();case 2:r=t.sent;if(!(r===fs)){t.next=5;break}return t.abrupt("return",r);case 5:if(!_a(r)){t.next=38;break}n=pa.get(r);i=da(r);this.skip();u=ya(r);if(!u){t.next=14;break}t.t0=undefined;t.next=17;break;case 14:t.next=16;return this._read_object();case 16:t.t0=t.sent;case 17:o=t.t0;if(i){t.next=25;break}s=this.__env__.get(n.symbol);if(!(typeof s==="function")){t.next=25;break}if(va(r)){c=[o]}else if(o===V){c=[]}else if(o instanceof $){c=o.to_array(false)}if(!(c||u)){t.next=24;break}return t.abrupt("return",Ks(s,u?[]:c,{env:this.__env__,dynamic_env:this.__env__,use_dynamic:false}));case 24:throw new Error("Parse Error: Invalid parser extension "+"invocation ".concat(n.symbol));case 25:if(va(r)){a=new $(n.symbol,new $(o,V))}else{a=new $(n.symbol,o)}if(!i){t.next=28;break}return t.abrupt("return",a);case 28:if(!(s instanceof J)){t.next=37;break}t.next=31;return this.evaluate(a);case 31:f=t.sent;if(!(f instanceof $||f instanceof Y)){t.next=34;break}return t.abrupt("return",$.fromArray([Y("quote"),f]));case 34:return t.abrupt("return",f);case 37:throw new Error("Parse Error: invalid parser extension: "+n.symbol);case 38:l=this.match_datum_ref(r);if(!(l!==null)){t.next=44;break}this.skip();if(!this._refs[l]){t.next=43;break}return t.abrupt("return",new Da(l,this._refs[l]));case 43:throw new Error("Parse Error: invalid datum label #".concat(l,"#"));case 44:h=this.match_datum_label(r);if(!(h!==null)){t.next=51;break}this.skip();this._refs[h]=this._read_object();return t.abrupt("return",this._refs[h]);case 51:if(!this.is_close(r)){t.next=55;break}this.skip();t.next=61;break;case 55:if(!this.is_open(r)){t.next=60;break}this.skip();return t.abrupt("return",this.read_list());case 60:return t.abrupt("return",this.read_value());case 61:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]);return o}();var Da=function(){function r(e,t){ae(this,r);this.name=e;this.data=t}ce(r,[{key:"valueOf",value:function e(){return this.data}}]);return r}();function Ea(e,t){return Aa.apply(this,arguments)}function Aa(){Aa=ge(C.mark(function e(r,n){var i,a,u;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!n){if(K){n=K.get("**interaction-environment**",{throwError:false})}else{n=xs}}i=new wa(r,{env:n});case 3:t.next=6;return ye(i.read_object());case 6:u=t.sent;if(!i.balanced()){i.ballancing_error(u,a)}if(!(u===fs)){t.next=10;break}return t.abrupt("break",15);case 10:a=u;t.next=13;return u;case 13:t.next=3;break;case 15:case"end":return t.stop()}},e)}));return Aa.apply(this,arguments)}function w(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(e){return e};var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(qu(e)){var n=e.then(t);if(r===null){return n}else{return n["catch"](r)}}if(e instanceof Array){return xa(e,t,r)}if(nu(e)){return Fa(e,t,r)}return t(e)}function xa(t,r,e){if(t.find(qu)){return w(fa(t),function(e){if(Object.isFrozen(t)){Object.freeze(e)}return r(e)},e)}return r(t)}function Fa(t,e,r){var i=Object.keys(t);var n=[],a=[];var u=i.length;while(u--){var o=i[u];var s=t[o];n[u]=s;if(qu(s)){a.push(s)}}if(a.length){return w(fa(n),function(e){var n={};e.forEach(function(e,t){var r=i[t];n[r]=e});if(Object.isFrozen(t)){Object.freeze(n)}return n},r)}return e(t)}function f(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},i=n.hidden,a=i===void 0?false:i;Object.defineProperty(e,t,{value:r,configurable:true,enumerable:!a})}function ka(e){return Ca.apply(this,arguments)}function Ca(){Ca=ie(C.mark(function e(r){var n,i,a,u,o,s,c;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:n=[];i=false;a=false;t.prev=3;o=Xn(r);case 5:t.next=7;return o.next();case 7:if(!(i=!(s=t.sent).done)){t.next=13;break}c=s.value;n.push(c);case 10:i=false;t.next=5;break;case 13:t.next=19;break;case 15:t.prev=15;t.t0=t["catch"](3);a=true;u=t.t0;case 19:t.prev=19;t.prev=20;if(!(i&&o["return"]!=null)){t.next=24;break}t.next=24;return o["return"]();case 24:t.prev=24;if(!a){t.next=27;break}throw u;case 27:return t.finish(24);case 28:return t.finish(19);case 29:return t.abrupt("return",n);case 30:case"end":return t.stop()}},e,null,[[3,15,19,29],[20,,24,28]])}));return Ca.apply(this,arguments)}function Oa(e,t){if(t instanceof RegExp){return function(e){return String(e).match(t)}}else if(d(t)){return t}throw new Error("Invalid matcher")}function l(e,t,r,n){if(typeof e!=="string"){t=arguments[0];r=arguments[1];n=arguments[2];e=null}if(r){if(n){t.__doc__=r}else{t.__doc__=Sa(r)}}if(e){t.__name__=e}else if(t.name&&!go(t)){t.__name__=t.name}return t}function Sa(e){return e.split("\n").map(function(e){return e.trim()}).join("\n")}function Ba(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var r=e.length;if(t<=0){throw Error("previousSexp: Invalid argument sexp = ".concat(t))}e:while(t--&&r>=0){var n=1;while(n>0){var i=e[--r];if(!i){break e}if(i==="("||i.token==="("){n--}else if(i===")"||i.token===")"){n++}}r--}return e.slice(r+1)}function ja(e){if(!e||!e.length){return 0}var t=e.length;if(e[t-1].token==="\n"){return 0}while(--t){if(e[t].token==="\n"){var r=(e[t+1]||{}).token;if(r){return r.length}}}return 0}function Ia(e,t){return f(e,t)===t.length;function f(r,n){function e(e,t){var r=Wn(e),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;var a=f(i,t);if(a!==-1){return a}}}catch(e){r.e(e)}finally{r.f()}return-1}function t(){return r[a]===Symbol["for"]("symbol")&&!Hi(n[o])}function i(){var e=r[a+1];var t=n[o+1];if(e!==undefined&&t!==undefined){return f([e],[t])}}var a=0;var u={};for(var o=0;o<n.length;++o){if(typeof r[a]==="undefined"){return o}if(r[a]instanceof Ra){var s;if(["+","*"].includes(r[a].flag)){while(o<n.length){s=e(r[a].patterns,n.slice(o));if(s===-1){break}o+=s}o-=1;a++;continue}else if(r[a].flag==="?"){s=e(r[a].patterns,n.slice(o));if(s===-1){o-=2}else{a++}continue}}else if(r[a]instanceof RegExp){if(!n[o].match(r[a])){return-1}}else if(Rc.LString.isString(r[a])){if(r[a].valueOf()!==n[o]){return-1}}else if(p(r[a])==="symbol"){if(r[a]===Symbol["for"]("*")){u[a]=u[a]||0;if(["(","["].includes(n[o])){u[a]++}else if([")","]"].includes(n[o])){u[a]--}if(typeof r[a+1]!=="undefined"&&u[a]===0&&i()===-1||u[a]>0){continue}}else if(t()){return-1}}else if(r[a]instanceof Array){var c=f(r[a],n.slice(o));if(c===-1||c+o>n.length){return-1}o+=c-1;a++;continue}else{return-1}a++}if(r.length!==a){return-1}return n.length}}function Pa(e){this.__code__=e.replace(/\r/g,"")}Pa.defaults={offset:0,indent:2,exceptions:{specials:[/^(?:#:)?(?:define(?:-values|-syntax|-macro|-class|-record-type)?|(?:call-with-(?:input-file|output-file|port))|lambda|let-env|try|catch|when|unless|while|syntax-rules|(let|letrec)(-syntax|\*?-values|\*)?)$/],shift:{1:["&","#"]}}};Pa.match=Ia;Pa.prototype._options=function e(t){var r=Pa.defaults;if(typeof t==="undefined"){return Object.assign({},r)}var n=t&&t.exceptions||{};var i=n.specials||[];var a=n.shift||{1:[]};return q(q(q({},r),t),{},{exceptions:{specials:[].concat(U(r.exceptions.specials),U(i)),shift:q(q({},a),{},{1:[].concat(U(r.exceptions.shift[1]),U(a[1]))})}})};Pa.prototype.indent=function e(t){var r=na(this.__code__,true);return this._indent(r,t)};Pa.exception_shift=function(a,e){function t(e){if(!e.length){return false}if(e.indexOf(a)!==-1){return true}else{var t=e.filter(function(e){return e instanceof RegExp});if(!t.length){return false}var r=Wn(t),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;if(a.match(i)){return true}}}catch(e){r.e(e)}finally{r.f()}}return false}if(t(e.exceptions.specials)){return e.indent}var r=e.exceptions.shift;for(var n=0,i=Object.entries(r);n<i.length;n++){var u=b(i[n],2),o=u[0],s=u[1];if(t(s)){return+o}}return-1};Pa.prototype._indent=function e(t,r){var n=this._options(r);var i=ja(t);var a=Ba(t);var u=t[t.length-a.length-1];var o=t[t.length-1];if(o.token.match(/^"[\S\s]+[^"]$/)){return i+n.indent}if(a&&a.length){if(a[0].line>0){n.offset=0}if(a.toString()===t.toString()&&nc(a)){return n.offset+a[0].col}else if(a.length===1){return n.offset+a[0].col+1}else{var s=-1;if(u){var c=Pa.exception_shift(u.token,n);if(c!==-1){s=c}}if(s===-1){s=Pa.exception_shift(a[1].token,n)}if(s!==-1){return n.offset+a[0].col+s}else if(a[0].line<a[1].line){return n.offset+a[0].col+1}else if(a.length>3&&a[1].line===a[3].line){if(a[1].token==="("||a[1].token==="["){return n.offset+a[1].col}return n.offset+a[3].col}else if(a[0].line===a[1].line){return n.offset+n.indent+a[0].col}else{var f=a.slice(2);for(var l=0;l<f.length;++l){var h=f[l];if(h.token.trim()){return h.col}}}}}else{return 0}return i+n.indent};function Na(e){this.pattern=e}Na.prototype.toString=function(){return"#<pattern(".concat(this.pattern,")>")};Na.prototype.match=function(e){return e.match(this.pattern)};function Ra(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=t.pop();this.patterns=t;this.flag=n}Ra.prototype.toString=function(){var e=this.patterns.map(function(e){return vu(e)}).join("|");return"#<pattern(".concat(e," ").concat(this.flag,")>")};Pa.Pattern=Ra;Pa.Ahead=Na;var Ta=/^[[(]$/;var La=/^[\])]$/;var Ma=/[^()[\]]/;var Ua=new Na(/[^)\]]/);var qa=Symbol["for"]("*");var za=new Ra([Ta,qa,La],[Ma],"+");var Ya=new Ra([Ta,qa,La],"+");var Va=new Ra([Symbol["for"]("symbol")],"?");var $a=new Ra([Symbol["for"]("symbol")],"*");var Ja=[Ta,$a,La];var Ka=new Ra([Ta,Symbol["for"]("symbol"),qa,La],"+");var Ha=Qa("define","lambda","define-macro","syntax-rules");var Wa=/^(?!.*\b(?:[()[\]]|define(?:-macro)?|let(?:\*|rec|-env|-syntax|)?|lambda|syntax-rules)\b).*$/;var Ga=/^(?:#:)?(let(?:\*|rec|-env|-syntax)?)$/;function Qa(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return new RegExp("^(?:#:)?(?:".concat(t.join("|"),")$"))}Pa.rules=[[[Ya],0,Ua],[[Ta,Qa("begin","cond-expand")],1],[[Ta,Ga,Va,Ta,Ka,La],1],[[Ta,Ga,Va,za],1,Ua],[[Ta,Ga,Ta,Ka],1,Ua],[[Ta,Wa,new Ra([/[^()[\]]/],"+"),Ya],1,Ua],[[Ta,Ya],1,Ua],[[Ta,Ma,Ya],1,Ua],[[Ta,Qa("lambda","if"),Ma],1,Ua],[[Ta,Qa("while"),Ma,Ya],1,Ua],[[Ta,Qa("if"),Ma,qa],1],[[Ta,Ha,Ja],0,Ua],[[Ta,Ha,Ja,Wi],0,Ua],[[Ta,Ha,Ja,Wi,Ya],0,Ua],[[Ta,Ha,Ja,Ya],0,Ua]];Pa.prototype["break"]=function(){var e=this.__code__.replace(/\n[ \t]*/g,"\n ").replace(/^\s+/,"");var t=function e(t){if(t.token.match(Wi)||t.token.match(_i)){return t.token}else{return t.token.replace(/\s+/," ")}};var r=function e(t){for(var r=t.length;r--;){var n=t[r];if(n.trim()&&!_a(n)){return t.length-r-1}}};var n=na(e,true).map(t).filter(function(e){return e!=="\n"});var i=Pa.rules;e:for(var a=1;a<n.length;++a){if(!n[a].trim()){continue}var u=n.slice(0,a);var o={};i.map(function(e){return e[1]}).forEach(function(e){e=e.valueOf();if(e>0&&!o[e]){o[e]=Ba(u,e)}});var s=Wn(i),c;try{for(s.s();!(c=s.n()).done;){var f=b(c.value,3),l=f[0],h=f[1],p=f[2];h=h.valueOf();var _=h>0?o[h]:u;var d=_.filter(function(e){return e.trim()&&!_a(e)});var v=r(_);var y=Ia(l,d);var m=n.slice(a).find(function(e){return e.trim()&&!_a(e)});if(y&&(p instanceof Na&&p.match(m)||!p)){var g=a-v;if(n[g]!=="\n"){if(!n[g].trim()){n[g]="\n"}else{n.splice(g,0,"\n");a++}}a+=v;continue e}}}catch(e){s.e(e)}finally{s.f()}}this.__code__=n.join("");return this};Pa.prototype._spaces=function(e){return" ".repeat(e)};Pa.prototype.format=function e(t){var r=this.__code__.replace(/[ \t]*\n[ \t]*/g,"\n ");var n=na(r,true);var i=this._options(t);var a=0;var u=0;for(var o=0;o<n.length;++o){var s=n[o];if(s.token==="\n"){a=this._indent(n.slice(0,o),i);u+=a;if(n[o+1]){n[o+1].token=this._spaces(a);a--;u--;for(var c=o+2;c<n.length;++c){n[c].offset+=u;n[c].col+=a;if(n[c].token==="\n"){o=c-1;break}}}}}return n.map(function(e){if(e.token.match(Wi)){if(e.token.match(/\n/)){var t=" ".repeat(e.col);var r=e.token.split("\n");e.token=[r[0]].concat(r.slice(1).map(function(e){return t+e})).join("\n")}}return e.token}).join("")};function Za(e,t){var r=Object.prototype.toString;var n="[object Array]";var i=[];var a=t&&e||e.slice();var u;if(!e.length){return i}u=a.pop();do{if(r.call(u)===n){a.push.apply(a,u)}else{i.push(u)}}while(a.length&&(u=a.pop())!==undefined);i.reverse();return i}function Xa(e,t){var r=e.length,n;while(r>0){n=Math.floor(t()*r);r--;var i=[e[n],e[r]];e[r]=i[0];e[n]=i[1]}return e}function eu(){}eu.prototype.toString=function(){return"()"};eu.prototype.valueOf=function(){return undefined};eu.prototype.serialize=function(){return 0};eu.prototype.to_object=function(){return{}};eu.prototype.append=function(e){return new $(e,V)};eu.prototype.to_array=function(){return[]};var V=new eu;function $(e,t){if(typeof this!=="undefined"&&this.constructor!==$||typeof this==="undefined"){return new $(e,t)}this.car=e;this.cdr=t}function tu(a,u){return function e(t){F(a,t,["pair","nil"]);if(t===V){return[]}var r=[];var n=t;while(true){if(n instanceof $){if(n.haveCycles("cdr")){break}var i=n.car;if(u&&i instanceof $){i=this.get(a).call(this,i)}r.push(i);n=n.cdr}else if(n===V){break}else{throw new Error("".concat(a,": can't convert improper list"))}}return r}}$.prototype.flatten=function(){return $.fromArray(Za(this.to_array()))};$.prototype.length=function(){var e=0;var t=this;while(true){if(!t||t===V||!(t instanceof $)||t.haveCycles("cdr")){break}e++;t=t.cdr}return e};$.match=function(e,t){if(e instanceof Y){return Y.is(e,t)}else if(e instanceof $){return $.match(e.car,t)||$.match(e.cdr,t)}else if(Array.isArray(e)){return e.some(function(e){return $.match(e,t)})}else if(nu(e)){return Object.values(e).some(function(e){return $.match(e,t)})}return false};$.prototype.find=function(e){return $.match(this,e)};$.prototype.clone=function(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var n=new Map;function i(e){if(e instanceof $){if(n.has(e)){return n.get(e)}var t=new $;n.set(e,t);if(r){t.car=i(e.car)}else{t.car=e.car}t.cdr=i(e.cdr);t[co]=e[co];return t}return e}return i(this)};$.prototype.last_pair=function(){var e=this;while(true){if(!Tu(e.cdr)){return e}if(e.haveCycles("cdr")){break}e=e.cdr}};$.prototype.to_array=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var t=[];if(this.car instanceof $){if(e){t.push(this.car.to_array())}else{t.push(this.car)}}else{t.push(this.car.valueOf())}if(this.cdr instanceof $){t=t.concat(this.cdr.to_array(e))}return t};$.fromArray=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e instanceof $||r&&e instanceof Array&&e[oo]){return e}if(t===false){var n=V;for(var i=e.length;i--;){n=new $(e[i],n)}return n}if(e.length&&!(e instanceof Array)){e=U(e)}var a=V;var u=e.length;while(u--){var o=e[u];if(o instanceof Array){o=$.fromArray(o,t,r)}else if(typeof o==="string"){o=D(o)}else if(typeof o==="number"&&!Number.isNaN(o)){o=j(o)}a=new $(o,a)}return a};$.prototype.to_object=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var t=this;var r={};while(true){if(t instanceof $&&t.car instanceof $){var n=t.car;var i=n.car;if(i instanceof Y){i=i.__name__}if(i instanceof D){i=i.valueOf()}var a=n.cdr;if(a instanceof $){a=a.to_object(e)}if(Ju(a)){if(!e){a=a.valueOf()}}r[i]=a;t=t.cdr}else{break}}return r};$.fromPairs=function(e){return e.reduce(function(e,t){return new $(new $(new Y(t[0]),t[1]),e)},V)};$.fromObject=function(t){var e=Object.keys(t).map(function(e){return[e,t[e]]});return $.fromPairs(e)};$.prototype.reduce=function(e){var t=this;var r=V;while(true){if(t!==V){r=e(r,t.car);t=t.cdr}else{break}}return r};$.prototype.reverse=function(){if(this.haveCycles()){throw new Error("You can't reverse list that have cycles")}var e=this;var t=V;while(e!==V){var r=e.cdr;e.cdr=t;t=e;e=r}return t};$.prototype.transform=function(n){function i(e){if(e instanceof $){if(e.replace){delete e.replace;return e}var t=n(e.car);if(t instanceof $){t=i(t)}var r=n(e.cdr);if(r instanceof $){r=i(r)}return new $(t,r)}return e}return i(this)};$.prototype.map=function(e){if(typeof this.car!=="undefined"){return new $(e(this.car),this.cdr===V?V:this.cdr.map(e))}else{return V}};var ru=new Map;function nu(e){return e&&p(e)==="object"&&e.constructor===Object}var iu=Object.getOwnPropertyNames(Array.prototype);var au=[];iu.forEach(function(e){au.push(Array[e],Array.prototype[e])});function uu(e){e=Zu(e);return au.includes(e)}function ou(e){return d(e)&&(go(e)||e.__doc__)}function su(r){var e=r.constructor||Object;var n=nu(r);var i=d(r[Symbol.asyncIterator])||d(r[Symbol.iterator]);var a;if(ru.has(e)){a=ru.get(e)}else{ru.forEach(function(e,t){t=Zu(t);if(r.constructor===t&&(t===Object&&n&&!i||t!==Object)){a=e}})}return a}var cu=new Map;[[true,"#t"],[false,"#f"],[null,"null"],[undefined,"#<undefined>"]].forEach(function(e){var t=b(e,2),r=t[0],n=t[1];cu.set(r,n)});function fu(r){if(r&&p(r)==="object"){var n={};var e=Object.getOwnPropertySymbols(r);e.forEach(function(e){var t=e.toString().replace(/Symbol\(([^)]+)\)/,"$1");n[t]=vu(r[e])});var t=Object.getOwnPropertyNames(r);t.forEach(function(e){var t=r[e];if(t&&p(t)==="object"&&t.constructor===Object){n[e]=fu(t)}else{n[e]=vu(t)}});return n}return r}function lu(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function hu(e,t){return e.hasOwnProperty(t)&&d(e.toString)}function pu(e){if(Do(e)){return"#<procedure(native)>"}var t=e.prototype&&e.prototype.constructor;if(d(t)&&go(t)){if(e[fo]&&t.hasOwnProperty("__name__")){var r=t.__name__;if(D.isString(r)){r=r.toString();return"#<class:".concat(r,">")}return"#<class>"}}if(e.hasOwnProperty("__name__")){var n=e.__name__;if(p(n)==="symbol"){n=ua(n)}if(typeof n==="string"){return"#<procedure:".concat(n,">")}}if(hu(e,"toString")){return e.toString()}else if(e.name&&!go(e)){return"#<procedure:".concat(e.name.trim(),">")}else{return"#<procedure>"}}var _u=new Map;[[Error,function(e){return e.message}],[$,function(e,t){var r=t.quote,n=t.skip_cycles,i=t.pair_args;if(!n){e.markCycles()}return e.toString.apply(e,[r].concat(U(i)))}],[h,function(e,t){var r=t.quote;if(r){return e.toString()}return e.valueOf()}],[D,function(e,t){var r=t.quote;e=e.toString();if(r){return JSON.stringify(e).replace(/\\n/g,"\n")}return e}],[RegExp,function(e){return"#"+e.toString()}]].forEach(function(e){var t=b(e,2),r=t[0],n=t[1];_u.set(r,n)});var du=[Y,j,J,vs,Qo,Zo,x,ca];function vu(e,t,r){if(typeof jQuery!=="undefined"&&e instanceof jQuery.fn.init){return"#<jQuery("+e.length+")>"}if(cu.has(e)){return cu.get(e)}if(yu(e)){return"#<prototype>"}if(e){var n=e.constructor;if(_u.has(n)){for(var i=arguments.length,a=new Array(i>3?i-3:0),u=3;u<i;u++){a[u-3]=arguments[u]}return _u.get(n)(e,{quote:t,skip_cycles:r,pair_args:a})}}var o=Wn(du),s;try{for(o.s();!(s=o.n()).done;){var c=s.value;if(e instanceof c){return e.toString(t)}}}catch(e){o.e(e)}finally{o.f()}if([V,fs].includes(e)){return e.toString()}if(d(e)){return pu(e)}if(e===ti){return"#<js:global>"}if(e===null){return"null"}if(p(e)==="object"){var f=e.constructor;if(!f){f=Object}var l;if(typeof f.__class__==="string"){l=f.__class__}else{var h=su(e);if(h){if(d(h)){return h(e,t)}else{throw new Error("toString: Invalid repr value")}}l=f.name}if(d(e.toString)&&go(e.toString)){return e.toString().valueOf()}if(H(e)==="instance"){if(go(f)&&f.__name__){l=f.__name__.valueOf()}else if(!Do(f)){l="instance"}}if(Yu(e,Symbol.iterator)){if(l){return"#<iterator(".concat(l,")>")}return"#<iterator>"}if(Yu(e,Symbol.asyncIterator)){if(l){return"#<asyncIterator(".concat(l,")>")}return"#<asyncIterator>"}if(l!==""){return"#<"+l+">"}return"#<Object>"}if(typeof e!=="string"){return e.toString()}return e}function yu(e){return e&&p(e)==="object"&&e.hasOwnProperty&&e.hasOwnProperty("constructor")&&typeof e.constructor==="function"&&e.constructor.prototype===e}$.prototype.markCycles=function(){mu(this);return this};$.prototype.haveCycles=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!e){return this.haveCycles("car")||this.haveCycles("cdr")}return!!(this[co]&&this[co][e])};function mu(e){var t=[];var i=[];var a=[];function u(e){if(!t.includes(e)){t.push(e)}}function o(e,t,r,n){if(r instanceof $){if(n.includes(r)){if(!a.includes(r)){a.push(r)}if(!e[co]){e[co]={}}e[co][t]=r;if(!i.includes(e)){i.push(e)}return true}}}var s=ta(function e(t,r){if(t instanceof $){delete t.ref;delete t[co];u(t);r.push(t);var n=o(t,"car",t.car,r);var i=o(t,"cdr",t.cdr,r);if(!n){s(t.car,r.slice())}if(!i){return new ea(function(){return e(t.cdr,r.slice())})}}});function r(e,t){if(e[co][t]instanceof $){var r=n.indexOf(e[co][t]);e[co][t]="#".concat(r,"#")}}s(e,[]);var n=t.filter(function(e){return a.includes(e)});n.forEach(function(e,t){e[so]="#".concat(t,"=")});i.forEach(function(e){r(e,"car");r(e,"cdr")})}$.prototype.toString=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.nested,n=r===void 0?false:r;var i=[];if(this[so]){i.push(this[so]+"(")}else if(!n){i.push("(")}var a;if(this[co]&&this[co].car){a=this[co].car}else{a=vu(this.car,e,true)}if(a!==undefined){i.push(a)}if(this.cdr instanceof $){if(this[co]&&this[co].cdr){i.push(" . ");i.push(this[co].cdr)}else{if(this.cdr[so]){i.push(" . ")}else{i.push(" ")}var u=this.cdr.toString(e,{nested:true});i.push(u)}}else if(this.cdr!==V){i=i.concat([" . ",vu(this.cdr,e,true)])}if(!n||this[so]){i.push(")")}return i.join("")};$.prototype.set=function(e,t){this[e]=t;if(t instanceof $){this.markCycles()}};$.prototype.append=function(e){if(e instanceof Array){return this.append($.fromArray(e))}var t=this;if(t.car===undefined){if(e instanceof $){this.car=e.car;this.cdr=e.cdr}else{this.car=e}}else if(e!==V){while(true){if(t instanceof $&&t.cdr!==V){t=t.cdr}else{break}}t.cdr=e}return this};$.prototype.serialize=function(){return[this.car,this.cdr]};$.prototype[Symbol.iterator]=function(){var r=this;return{next:function e(){var t=r;r=t.cdr;if(t===V){return{value:undefined,done:true}}else{return{value:t.car,done:false}}}}};function gu(e){return e<0?-e:e}function bu(e,t){var r=re(t),n=r[0],i=r.slice(1);while(i.length>0){var a=i,u=b(a,1),o=u[0];if(!e(n,o)){return false}var s=i;var c=re(s);n=c[0];i=c.slice(1)}return true}function wu(e,t){if(d(e)){return d(t)&&Zu(e)===Zu(t)}else if(e instanceof j){if(!(t instanceof j)){return false}var r;if(e.__type__===t.__type__){if(e.__type__==="complex"){r=e.__im__.__type__===t.__im__.__type__&&e.__re__.__type__===t.__re__.__type__}else{r=true}if(r&&e.cmp(t)===0){if(e.valueOf()===0){return Object.is(e.valueOf(),t.valueOf())}return true}}return false}else if(typeof e==="number"){if(typeof t!=="number"){return false}if(Number.isNaN(e)){return Number.isNaN(t)}if(e===Number.NEGATIVE_INFINITY){return t===Number.NEGATIVE_INFINITY}if(e===Number.POSITIVE_INFINITY){return t===Number.POSITIVE_INFINITY}return wu(j(e),j(t))}else if(e instanceof h){if(!(t instanceof h)){return false}return e.__char__===t.__char__}else{return e===t}}function Du(e,t){if(H(e)!==H(t)){return false}if(!Eu(e)){return false}if(e instanceof RegExp){return e.source===t.source}if(e instanceof D){return e.valueOf()===t.valueOf()}return wu(e,t)}function Eu(e){return e instanceof Y||D.isString(e)||e===V||e===null||e instanceof h||e instanceof j||e===true||e===false}var Au=function(){if(Math.trunc){return Math.trunc}else{return function(e){if(e===0){return 0}else if(e<0){return Math.ceil(e)}else{return Math.floor(e)}}}}();function J(e,t,r,n){if(typeof this!=="undefined"&&this.constructor!==J||typeof this==="undefined"){return new J(e,t)}F("Macro",e,"string",1);F("Macro",t,"function",2);if(r){if(n){this.__doc__=r}else{this.__doc__=Sa(r)}}this.__name__=e;this.__fn__=t}J.defmacro=function(e,t,r,n){var i=new J(e,t,r,n);i.__defmacro__=true;return i};J.prototype.invoke=function(e,t,r){var n=t.env,i=he(t,Un);var a=q(q({},i),{},{macro_expand:r});var u=this.__fn__.call(n,e,a,this.__name__);return u};J.prototype.toString=function(){return"#<macro:".concat(this.__name__,">")};var xu="define-macro";var Fu=-1e4;function ku(c){return function(){var r=ie(C.mark(function e(r,m){var a,g,n,i,u,b,w,D,E,A,x,F,o,k,s;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:s=function e(){s=ie(C.mark(function e(r,n,i){var a,u,o,s,c,f,l,h,p,_,d,v,y;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(r instanceof $&&r.car instanceof Y)){t.next=50;break}if(!r[oo]){t.next=3;break}return t.abrupt("return",r);case 3:a=r.car.valueOf();u=i.get(r.car,{throwError:false});o=b(r.car);s=o||w(u,r)||D(u);if(!(s&&r.cdr.car instanceof $)){t.next=28;break}if(!o){t.next=15;break}g=A(r.cdr.car);t.next=12;return F(r.cdr.car,n);case 12:c=t.sent;t.next=17;break;case 15:g=E(r.cdr.car);c=r.cdr.car;case 17:t.t0=$;t.t1=r.car;t.t2=$;t.t3=c;t.next=23;return k(r.cdr.cdr,n,i);case 23:t.t4=t.sent;t.t5=new t.t2(t.t3,t.t4);return t.abrupt("return",new t.t0(t.t1,t.t5));case 28:if(!x(a,u)){t.next=50;break}f=u instanceof Cu?r:r.cdr;t.next=32;return u.invoke(f,q(q({},m),{},{env:i}),true);case 32:l=t.sent;if(!(u instanceof Cu)){t.next=41;break}h=l,p=h.expr,_=h.scope;if(!(p instanceof $)){t.next=40;break}if(!(n!==-1&&n<=1||n<Fu)){t.next=38;break}return t.abrupt("return",p);case 38:if(n!==-1){n=n-1}return t.abrupt("return",k(p,n,_));case 40:l=p;case 41:if(!(l instanceof Y)){t.next=43;break}return t.abrupt("return",ys(l));case 43:if(!(l instanceof $)){t.next=48;break}if(!(n!==-1&&n<=1||n<Fu)){t.next=46;break}return t.abrupt("return",l);case 46:if(n!==-1){n=n-1}return t.abrupt("return",k(l,n,i));case 48:if(!Eu(l)){t.next=50;break}return t.abrupt("return",l);case 50:d=r.car;if(!(d instanceof $)){t.next=55;break}t.next=54;return k(d,n,i);case 54:d=t.sent;case 55:v=r.cdr;if(!(v instanceof $)){t.next=60;break}t.next=59;return k(v,n,i);case 59:v=t.sent;case 60:y=new $(d,v);return t.abrupt("return",y);case 62:case"end":return t.stop()}},e)}));return s.apply(this,arguments)};k=function e(t,r,n){return s.apply(this,arguments)};o=function e(){o=ie(C.mark(function e(r,n){var i;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(r===V)){t.next=2;break}return t.abrupt("return",V);case 2:i=r.car;t.t0=$;t.t1=$;t.t2=i.car;t.next=8;return k(i.cdr,n,a);case 8:t.t3=t.sent;t.t4=new t.t1(t.t2,t.t3);t.next=12;return F(r.cdr);case 12:t.t5=t.sent;return t.abrupt("return",new t.t0(t.t4,t.t5));case 14:case"end":return t.stop()}},e)}));return o.apply(this,arguments)};F=function e(t,r){return o.apply(this,arguments)};x=function e(t,r){return r instanceof J&&r.__defmacro__&&!g.includes(t)};A=function e(t){return[].concat(U(g),U(t.to_array(false).map(function(e){if(e instanceof $){return e.car.valueOf()}var t=H(e);var r="macroexpand: Invalid let binding expectig pair got ".concat(t);throw new Error(r)})))};E=function e(t){var r=[];while(true){if(t!==V){if(t instanceof Y){r.push(t.valueOf());break}r.push(t.car.valueOf());t=t.cdr}else{break}}return[].concat(U(g),r)};D=function e(t){return t===i};w=function e(t,r){return t===u&&r.cdr.car instanceof $};b=function e(t){var r=t.valueOf();return n.includes(r)};a=m["env"]=this;g=[];n=["let","let*","letrec"];i=K.get("lambda");u=K.get("define");if(!(r.cdr instanceof $&&j.isNumber(r.cdr.car))){t.next=21;break}t.t0=ys;t.next=19;return k(r,r.cdr.car.valueOf(),a);case 19:t.t1=t.sent.car;return t.abrupt("return",(0,t.t0)(t.t1));case 21:if(!c){t.next=27;break}t.t2=ys;t.next=25;return k(r,1,a);case 25:t.t3=t.sent.car;return t.abrupt("return",(0,t.t2)(t.t3));case 27:t.t4=ys;t.next=30;return k(r,-1,a);case 30:t.t5=t.sent.car;return t.abrupt("return",(0,t.t4)(t.t5));case 32:case"end":return t.stop()}},e,this)}));return function(e,t){return r.apply(this,arguments)}}()}function Cu(e,t){this.__env__=t;this.__fn__=e;this.__defmacro__=true}Cu.__merge_env__=Symbol["for"]("merge");Cu.prototype=Object.create(J.prototype);Cu.prototype.invoke=function(e,t,r){var n=t.error,i=t.env,a=t.use_dynamic;var u={error:n,env:i,use_dynamic:a,dynamic_env:this.__env__,macro_expand:r};return this.__fn__.call(i,e,u,this.__name__||"syntax")};Cu.prototype.constructor=Cu;Cu.prototype.toString=function(){if(this.__name__){return"#<syntax:".concat(this.__name__,">")}return"#<syntax>"};var Ou=ce(function e(t){ae(this,e);f(this,"_syntax",t,{hidden:true});f(this._syntax,"_param",true,{hidden:true})});Cu.Parameter=Ou;function Su(e,t,P,N){var r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var R={"...":{symbols:{},lists:[]},symbols:{}};var T=r.expansion,L=r.define;z(P);function M(t,e){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;z({code:e,pattern:t});if(Eu(t)&&!(t instanceof Y)){return Du(t,e)}if(t instanceof Y&&P.includes(t.literal())){if(!Y.is(e,t)){return false}var i=T.ref(t);return!i||i===L||i===K}if(Array.isArray(t)&&Array.isArray(e)){z("<<< a 1");if(t.length===0&&e.length===0){return true}if(Y.is(t[1],N)){if(t[0]instanceof Y){var a=t[0].valueOf();z("<<< a 2 "+n);if(n){var u=e.length-2;var o=u>0?e.slice(0,u):e;var s=$.fromArray(o,false);if(!R["..."].symbols[a]){R["..."].symbols[a]=new $(s,V)}else{R["..."].symbols[a].append(new $(s,V))}}else{R["..."].symbols[a]=$.fromArray(e,false)}}else if(Array.isArray(t[0])){z("<<< a 3");var c=U(r);if(!e.every(function(e){return M(t[0],e,c,true)})){return false}}if(t.length>2){var f=t.slice(2);return M(f,e.slice(-f.length),r,n)}return true}var l=M(t[0],e[0],r,n);z({first:l,pattern:t[0],code:e[0]});var h=M(t.slice(1),e.slice(1),r,n);z({first:l,rest:h});return l&&h}if(t instanceof $&&t.car instanceof $&&t.car.cdr instanceof $&&Y.is(t.car.cdr.car,N)){z(">> 0");if(e===V){z({pattern:t});if(t.car.car instanceof Y){var p=t.car.car.valueOf();if(R["..."].symbols[p]){throw new Error("syntax: named ellipsis can only "+"appear onces")}R["..."].symbols[p]=e}}}if(t instanceof $&&t.cdr instanceof $&&Y.is(t.cdr.car,N)){if(t.cdr.cdr!==V){if(t.cdr.cdr instanceof $){var _=t.cdr.cdr.length();if(!Tu(e)){return false}var d=e.length();var v=e;while(d-1>_){v=v.cdr;d--}var y=v.cdr;v.cdr=V;if(!M(t.cdr.cdr,y,r,n)){return false}}}if(t.car instanceof Y){var m=t.car.__name__;if(R["..."].symbols[m]&&!r.includes(m)&&!n){throw new Error("syntax: named ellipsis can only appear onces")}z(">> 1");if(e===V){z(">> 2");if(n){z("NIL");R["..."].symbols[m]=V}else{z("NULL");R["..."].symbols[m]=null}}else if(e instanceof $&&(e.car instanceof $||e.car===V)){z(">> 3 "+n);if(n){if(R["..."].symbols[m]){var g=R["..."].symbols[m];if(g===V){g=new $(V,new $(e,V))}else{g=g.append(new $(e,V))}R["..."].symbols[m]=g}else{R["..."].symbols[m]=new $(e,V)}}else{z(">> 4");R["..."].symbols[m]=new $(e,V)}}else{z(">> 6");if(e instanceof $){if(!(e.cdr instanceof $)&&e.cdr!==V){z(">> 7 (b)");if(t.cdr.cdr===V){return false}else if(!R["..."].symbols[m]){R["..."].symbols[m]=new $(e.car,V);return M(t.cdr.cdr,e.cdr)}}var b=e.last_pair();if(b.cdr!==V){if(t.cdr.cdr===V){return false}else{var w=e.clone();w.last_pair().cdr=V;R["..."].symbols[m]=w;return M(t.cdr.cdr,b.cdr)}}z(">> 7 "+n);r.push(m);if(!R["..."].symbols[m]){R["..."].symbols[m]=new $(e,V)}else{var D=R["..."].symbols[m];R["..."].symbols[m]=D.append(new $(e,V))}z({IIIIII:R["..."].symbols[m]})}else if(t.car instanceof Y&&t.cdr instanceof $&&Y.is(t.cdr.car,N)){z(">> 8");R["..."].symbols[m]=null;return M(t.cdr.cdr,e)}else{z(">> 9");return false}}return true}else if(t.car instanceof $){var E=U(r);if(e===V){z(">> 10");R["..."].lists.push(V);return true}z(">> 11");var A=e;while(A instanceof $){if(!M(t.car,A.car,E,true)){return false}A=A.cdr}return true}if(Array.isArray(t.car)){var E=U(r);var x=e;while(x instanceof $){if(!M(t.car,x.car,E,true)){return false}x=x.cdr}return true}return false}if(t instanceof Y){if(Y.is(t,N)){throw new Error("syntax: invalid usage of ellipsis")}z(">> 12");var F=t.__name__;if(P.includes(F)){return true}if(n){var k,C;z(R["..."].symbols[F]);(C=(k=R["..."].symbols)[F])!==null&&C!==void 0?C:k[F]=[];R["..."].symbols[F].push(e)}else{R.symbols[F]=e}return true}if(t instanceof $&&e instanceof $){z(">> 13");z({a:13,code:e,pattern:t});if(e.cdr===V){var O=t.car instanceof Y&&t.cdr instanceof Y;if(O){if(!M(t.car,e.car,r,n)){return false}z(">> 14");var S=t.cdr.valueOf();if(!(S in R.symbols)){R.symbols[S]=V}S=t.car.valueOf();if(!(S in R.symbols)){R.symbols[S]=e.car}return true}}z({pattern:t,code:e});if(t.cdr instanceof $&&t.cdr.cdr instanceof $&&t.cdr.car instanceof Y&&Y.is(t.cdr.cdr.car,N)&&t.cdr.cdr.cdr instanceof $&&!Y.is(t.cdr.cdr.cdr.car,N)&&M(t.car,e.car,r,n)&&M(t.cdr.cdr.cdr,e.cdr,r,n)){var B=t.cdr.car.__name__;z({pattern:t,code:e,name:B});if(P.includes(B)){return true}R["..."].symbols[B]=null;return true}z("recur");z({pattern:t,code:e});var j=M(t.car,e.car,r,n);z({car:j,pattern:t.car,code:e.car});var I=M(t.cdr,e.cdr,r,n);z({car:j,cdr:I});if(j&&I){return true}}else if(t===V&&(e===V||e===undefined)){return true}else if(t.car instanceof $&&Y.is(t.car.car,N)){throw new Error("syntax: invalid usage of ellipsis")}else{return false}}if(M(e,t)){return R}}function Bu(e,i){function a(t){if(t instanceof $){if(!i.length){return t}var e=a(t.car);var r=a(t.cdr);return new $(e,r)}else if(t instanceof Y){var n=i.find(function(e){return e.gensym===t});if(n){return Y(n.name)}return t}else{return t}}return a(e)}function ju(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var j=e.bindings,t=e.expr,I=e.scope,u=e.symbols,f=e.names,P=e.ellipsis;var l={};function o(e){if(e instanceof Y){return true}return["string","symbol"].includes(p(e))}function N(e){if(!o(e)){var t=H(e);throw new Error("syntax: internal error, need symbol got ".concat(t))}var r=e.valueOf();if(r===P){throw new Error("syntax: internal error, ellipis not transformed")}var n=p(r);if(["string","symbol"].includes(n)){if(r in j.symbols){return j.symbols[r]}else if(n==="string"&&r.match(/\./)){var i=r.split(".");var a=i[0];if(a in j.symbols){return $.fromArray([Y("."),j.symbols[a]].concat(i.slice(1).map(function(e){return D(e)})))}}}if(u.includes(r)){return e}return s(r,e)}function s(e,t){if(!l[e]){var r=I.ref(e);if(p(e)==="symbol"&&!r){e=t.literal()}if(l[e]){return l[e]}var n=sa(e);if(r){var i=I.get(e);I.set(n,i)}else{var a=I.get(e,{throwError:false});if(typeof a!=="undefined"){I.set(n,a)}}f.push({name:e,gensym:n});l[e]=n;if(typeof e==="string"&&e.match(/\./)){var u=e.split(".").filter(Boolean),o=re(u),s=o[0],c=o.slice(1);if(l[s]){yo(n,"__object__",[l[s]].concat(U(c)))}}}return l[e]}function R(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};var i=r.nested;z({bindings:t,expr:e});if(Array.isArray(e)&&!e.length){return e}if(e instanceof Y){var a=e.valueOf();if(oa(e)&&!t[a]);z("[t 1");if(t[a]){if(t[a]instanceof $){var u=t[a],o=u.car,s=u.cdr;if(i){var c=o.car,f=o.cdr;if(f!==V){n(a,new $(f,V))}return c}if(s!==V){n(a,s)}return o}else if(t[a]instanceof Array){n(a,t[a].slice(1));return t[a][0]}}return N(e)}var l=Array.isArray(e);if(e instanceof $||l){var h=l?e[0]:e.car;var p=l?e[1]:Tu(e.cdr)&&e.cdr.car;if(h instanceof Y&&Y.is(p,P)){l?e.slice(2):e.cdr.cdr;z("[t 2");var _=h.valueOf();var d=t[_];if(d===null){return}else if(d){z({name:_,binding:t[_]});if(d instanceof $){z("[t 2 Pair "+i);var v=d.car,y=d.cdr;var m=l?e.slice(2):e.cdr.cdr;if(i){if(y!==V){z("|| next 1");n(_,y)}if(l&&m.length||m!==V&&!l){var g=R(m,t,r,n);if(l){return v.concat(g)}else if(Tu(v)){return v.append(g)}else{z("UNKNOWN")}}return v}else if(v instanceof $){if(v.cdr!==V){z("|| next 2");n(_,new $(v.cdr,y))}return v.car}else if(y===V){return v}else{var b=e.last_pair();if(b.cdr instanceof Y){z("|| next 3");n(_,d.last_pair());return v}}}else if(d instanceof Array){z("[t 2 Array "+i);if(i){n(_,d.slice(1));return $.fromArray(d)}else{var w=d.slice(1);if(w.length){n(_,w)}return d[0]}}else{return d}}}z("[t 3 recur ",e);var D=l?e.slice(1):e.cdr;var E=R(h,t,r,n);var A=R(D,t,r,n);z({head:E,rest:A});if(l){return[E].concat(A)}return new $(E,A)}return e}function T(t,r){var e=Object.values(t);var n=Object.getOwnPropertySymbols(t);if(n.length){e.push.apply(e,U(n.map(function(e){return t[e]})))}return e.length&&e.every(function(e){if(e===null){return!r}return e instanceof $||e===V||e instanceof Array&&e.length})}function L(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}function M(i){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},t=e.disabled;z("traverse>> ",i);var a=Array.isArray(i);if(a&&i.length===0){return i}if(i instanceof $||a){var r=a?i[0]:i.car;var n,u;if(a){n=i[1];u=i.slice(2)}else if(Tu(i.cdr)){n=i.cdr.car;u=i.cdr.cdr}z({first:r,second:n,rest_second:u});if(!t&&Tu(r)&&Y.is(r.car,P)){return M(r.cdr,{disabled:true})}if(n&&Y.is(n,P)&&!t){z(">> 1");var o=j["..."].symbols;var s=Object.values(o);if(s.length&&s.every(function(e){return e===null})){z(">>> 1 (a)");return M(u,{disabled:t})}var c=L(o);var f=r instanceof Y&&Y.is(u.car,P);if(Tu(r)||f){z(">>> 1 (b)");if(j["..."].lists[0]===V){if(!f){return M(u,{disabled:t})}z(u);return V}var l=r;if(f){z(">>> 1 (c)");l=new $(r,new $(n,V))}z(">> 2");var h;if(c.length){z(">> 2 (a)");var p=q({},o);h=a?[]:V;var _=function e(){z({bind:p});if(!T(p)){return 1}var n={};var t=function e(t,r){n[t]=r};var r=R(l,p,{nested:true},t);if(r!==undefined){if(f){if(a){if(Array.isArray(r)){var i;(i=h).push.apply(i,U(r))}else{z("ZONK {1}")}}else{if(h===V){h=r}else{h=h.append(r)}}}else if(a){h.push(r)}else{h=new $(r,h)}}p=n};while(true){if(_())break}if(h!==V&&!f&&!a){h=h.reverse()}if(a){if(u){z({rest_second:u,expr:i});var d=M(u,{disabled:t});return h.concat(d)}return h}if(i.cdr.cdr!==V&&!Y.is(i.cdr.cdr.car,P)){var v=M(i.cdr.cdr,{disabled:t});return h.append(v)}return h}else{z(">> 3");var y=R(r,o,{nested:true});if(y){return new $(y,V)}return V}}else if(r instanceof Y){z(">> 4");if(Y.is(u.car,P)){z(">> 4 (a)")}else{z(">> 4 (b)")}var m=r.__name__;var g=fe({},m,o[m]);z({bind:g});var b=o[m]===null;var w=a?[]:V;var D=function e(){if(!T(g,true)){z({bind:g});return 1}var n={};var t=function e(t,r){n[t]=r};var r=R(i,g,{nested:false},t);z({value:r});if(typeof r!=="undefined"){if(a){w.push(r)}else{w=new $(r,w)}}g=n};while(true){if(D())break}if(w!==V&&!a){w=w.reverse()}if(i.cdr instanceof $){if(i.cdr.cdr instanceof $||i.cdr.cdr instanceof Y){var E=M(i.cdr.cdr,{disabled:t});z({node:E});if(b){return E}if(w===V){w=E}else{w.append(E)}z({result:w,node:E})}}z("<<<< 2");return w}}var A=M(r,{disabled:t});var x;var F;if(r instanceof Y){var k=I.get(r,{throwError:false});F=k instanceof J&&k.__name__==="syntax-rules"}if(F){if(i.cdr.car instanceof Y){x=new $(M(i.cdr.car,{disabled:t}),new $(i.cdr.cdr.car,M(i.cdr.cdr.cdr,{disabled:t})))}else{x=new $(i.cdr.car,M(i.cdr.cdr,{disabled:t}))}z("REST >>>> ",x)}else{x=M(i.cdr,{disabled:t})}z({a:true,car:vu(i.car),cdr:vu(i.cdr),head:vu(A),rest:vu(x)});return new $(A,x)}if(i instanceof Y){if(t&&Y.is(i,P)){return i}var C=Object.keys(j["..."].symbols);var O=i.literal();if(C.includes(O)){var S="missing ellipsis symbol next to name `".concat(O,"'");throw new Error("syntax-rules: ".concat(S))}var B=N(i);if(typeof B!=="undefined"){return B}}return i}return M(t,{})}function Iu(e){return zu(e)||e===V||e===null}function d(e){return typeof e==="function"&&typeof e.bind==="function"}function Pu(e){return e instanceof Xs}function Nu(e){return e instanceof Qs}function Ru(e){return e instanceof Gs}function Tu(e){return e instanceof $}function Lu(e){return e instanceof x}function Mu(e){return d(e)||Pu(e)||Ru(e)||Uu(e)}function Uu(e){return e instanceof J||e instanceof Ou}function qu(e){if(e instanceof ca){return false}if(e instanceof Promise){return true}return!!e&&d(e.then)}function zu(e){return typeof e==="undefined"}function Yu(e,t){if(Ku(e,t)||Ku(e.__proto__,t)){return d(e[t])}}function Vu(e){if(!e){return false}if(p(e)!=="object"){return false}if(e.__instance__){e.__instance__=false;return e.__instance__}return false}function $u(e){var t=p(e);return["string","function"].includes(t)||p(e)==="symbol"||e instanceof ca||e instanceof Y||e instanceof j||e instanceof D||e instanceof RegExp}function Ju(e){return e instanceof j||e instanceof D||e instanceof h}function Ku(e,t){if(e===null){return false}return p(e)==="object"&&t in Object.getOwnPropertySymbols(e)}function Hu(e){switch(p(e)){case"string":return D(e);case"bigint":return j(e);case"number":if(Number.isNaN(e)){return Es}else{return j(e)}}return e}function Wu(r,n){var e=Object.getOwnPropertyNames(r);var t=Object.getOwnPropertySymbols(r);var i={};e.concat(t).forEach(function(e){var t=n(r[e]);i[e]=t});return i}function Gu(t){var e=[D,j].some(function(e){return t instanceof e});if(e){return t.valueOf()}if(t instanceof Array){return t.map(Gu)}if(t instanceof ca){delete t.then}if(nu(t)){return Wu(t,Gu)}return t}function Qu(e,t){if(e instanceof $){e.markCycles();return ys(e)}if(d(e)){if(t){return Xu(e,t)}}return Hu(e)}function Zu(e){if(to(e)){return e[uo]}return e}function Xu(e,t){if(e[Symbol["for"]("__bound__")]){return e}var r=e.bind(t);var n=Object.getOwnPropertyNames(e);var i=Wn(n),a;try{for(i.s();!(a=i.n()).done;){var u=a.value;if(vo(u)){try{r[u]=e[u]}catch(e){}}}}catch(e){i.e(e)}finally{i.f()}yo(r,"__fn__",e);yo(r,"__context__",t);yo(r,"__bound__",true);if(Do(e)){yo(r,"__native__",true)}if(nu(t)&&go(e)){yo(r,"__method__",true)}r.valueOf=function(){return e};return r}function eo(e){return to(e)&&e[Symbol["for"]("__context__")]===Object}function to(e){return!!(d(e)&&e[uo])}function ro(e){if(d(e)){var t=e[ao];if(t&&(t===Rc||t.constructor&&t.constructor.__class__)){return true}}return false}function no(e){return e instanceof Qo||e instanceof Zo}function io(e){if(d(e)){if(no(e[ao])){return true}}return false}var ao=Symbol["for"]("__context__");var uo=Symbol["for"]("__fn__");var oo=Symbol["for"]("__data__");var so=Symbol["for"]("__ref__");var co=Symbol["for"]("__cycles__");var fo=Symbol["for"]("__class__");var lo=Symbol["for"]("__method__");var ho=Symbol["for"]("__prototype__");var po=Symbol["for"]("__lambda__");var _o=["name","length","caller","callee","arguments","prototype"];function vo(e){return!_o.includes(e)}function yo(e,t,r){Object.defineProperty(e,Symbol["for"](t),{get:function e(){return r},set:function e(){},configurable:false,enumerable:false})}function mo(t,r){try{Object.defineProperty(t,"length",{get:function e(){return r}});return t}catch(e){var n=new Array(r).fill(0).map(function(e,t){return"a"+t}).join(",");var i=new Function("f","return function(".concat(n,") {\n                return f.apply(this, arguments);\n            };"));return i(t)}}function go(e){return e&&e[po]}function bo(e){return e&&e[lo]}function wo(e){return go(e)&&!e[ho]&&!bo(e)&&!io(e)}function Do(e){var t=Symbol["for"]("__native__");return d(e)&&e.toString().match(/\{\s*\[native code\]\s*\}/)&&(e.name.match(/^bound /)&&e[t]===true||!e.name.match(/^bound /)&&!e[t])}function Eo(e){var b;switch(e){case Symbol["for"]("letrec"):b="letrec";break;case Symbol["for"]("let"):b="let";break;case Symbol["for"]("let*"):b="let*";break;default:throw new Error("Invalid let_macro value")}return J.defmacro(b,function(t,e){var f=e.dynamic_env;var l=e.error,r=e.macro_expand,h=e.use_dynamic;var p;if(t.car instanceof Y){if(!(t.cdr.car instanceof $||t.cdr.car===V)){throw new Error("let require list of pairs")}var n;if(t.cdr.car===V){p=V;n=V}else{n=t.cdr.car.map(function(e){return e.car});p=t.cdr.car.map(function(e){return e.cdr.car})}return $.fromArray([Y("letrec"),[[t.car,$(Y("lambda"),$(n,t.cdr.cdr))]],$(t.car,p)])}else if(r){return}var _=this;p=K.get("list->array")(t.car);var d=_.inherit(b);var v,y;if(b==="let*"){y=d}else if(b==="let"){v=[]}var m=0;function g(){var e=new $(new Y("begin"),t.cdr);return k(e,{env:d,dynamic_env:d,use_dynamic:h,error:l})}return function t(){var r=p[m++];f=b==="let*"?d:_;if(!r){if(v&&v.length){var e=v.map(function(e){return e.value});var n=e.filter(qu);if(n.length){return fa(e).then(function(e){for(var t=0,r=e.length;t<r;++t){d.set(v[t].name,e[t])}}).then(g)}else{var i=Wn(v),a;try{for(i.s();!(a=i.n()).done;){var u=a.value,o=u.name,s=u.value;d.set(o,s)}}catch(e){i.e(e)}finally{i.f()}}}return g()}else{if(b==="let"){y=_}else if(b==="letrec"){y=d}var c=k(r.cdr.car,{env:y,dynamic_env:f,use_dynamic:h,error:l});if(b==="let*"){y=d=y.inherit("let*["+m+"]")}if(v){v.push({name:r.car,value:c});return t()}else{return w(c,function(e){d.set(r.car,e);return t()})}}}()})}function Ao(e,c){return new J(e,function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.use_dynamic,n=t.error;var i=this;var a=this;var u=[];var o=e;while(o instanceof $){u.push(k(o.car,{env:i,dynamic_env:a,use_dynamic:r,error:n}));o=o.cdr}var s=u.filter(qu).length;if(s){return fa(u).then(c.bind(this))}else{return c.call(this,u)}})}function xo(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}r.forEach(function(e){F("",e,"number")});return e.apply(void 0,r)}function Fo(){var n=this;for(var e=arguments.length,i=new Array(e),t=0;t<e;t++){i[t]=arguments[t]}i.forEach(function(e,t){F("pipe",e,"function",t+1)});return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i.reduce(function(e,t){return[t.apply(n,e)]},t)[0]}}function ko(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}t.forEach(function(e,t){F("compose",e,"function",t+1)});return Fo.apply(void 0,U(t.reverse()))}function Co(u,o){var s=this;return function e(t,r){F(u,t,"function");for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++){i[a-2]=arguments[a]}if(i.some(Iu)){if(typeof r==="number"){return j(r)}return r}else{return o.call.apply(o,[s,e,t,r].concat(i))}}}function Oo(e,t){return Po(e+1,Io(xo,t))}var So=Io(Oo,1);var Bo=Io(Oo,2);function jo(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(i!==null){t=[i].concat(U(t))}return t.reduce(Bo(n))}}function Io(a){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++){t[r-1]=arguments[r]}F("curry",a,"function");var u=a.length;return function(){var n=t.slice();function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}n=n.concat(t);if(n.length>=u){return a.apply(this,n)}else{return i}}return i.apply(this,arguments)}}function Po(n,i){F("limit",i,"function",2);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return i.apply(void 0,U(t.slice(0,n)))}}function h(e){if(typeof this!=="undefined"&&!(this instanceof h)||typeof this==="undefined"){return new h(e)}if(e instanceof D){e=e.valueOf()}var t;if(Array.from(e).length>1){e=e.toLowerCase();if(h.__names__[e]){t=e;e=h.__names__[e]}else{throw new Error("Internal: Unknown named character")}}else{t=h.__rev_names__[e]}Object.defineProperty(this,"__char__",{value:e,enumerable:true});if(t){Object.defineProperty(this,"__name__",{value:t,enumerable:true})}}h.__names__=bi;h.__rev_names__={};Object.keys(h.__names__).forEach(function(e){var t=h.__names__[e];h.__rev_names__[t]=e});h.prototype.toUpperCase=function(){return h(this.__char__.toUpperCase())};h.prototype.toLowerCase=function(){return h(this.__char__.toLowerCase())};h.prototype.toString=function(){return"#\\"+(this.__name__||this.__char__)};h.prototype.valueOf=h.prototype.serialize=function(){return this.__char__};function D(e){if(typeof this!=="undefined"&&!(this instanceof D)||typeof this==="undefined"){return new D(e)}if(e instanceof Array){this.__string__=e.map(function(e,t){F("LString",e,"character",t+1);return e.toString()}).join("")}else{this.__string__=e.valueOf()}}{var No=["length","constructor"];var Ro=Object.getOwnPropertyNames(String.prototype).filter(function(e){return!No.includes(e)});var To=function e(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return n.apply(this.__string__,t)}};var Lo=Wn(Ro),Mo;try{for(Lo.s();!(Mo=Lo.n()).done;){var Uo=Mo.value;D.prototype[Uo]=To(String.prototype[Uo])}}catch(e){Lo.e(e)}finally{Lo.f()}}D.prototype[Symbol.iterator]=C.mark(function e(){var r,n,i,a;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=Array.from(this.__string__);n=0,i=r;case 2:if(!(n<i.length)){t.next=9;break}a=i[n];t.next=6;return h(a);case 6:n++;t.next=2;break;case 9:case"end":return t.stop()}},e,this)});D.prototype.serialize=function(){return this.valueOf()};D.isString=function(e){return e instanceof D||typeof e==="string"};D.prototype.freeze=function(){var e=this.__string__;delete this.__string__;f(this,"__string__",e)};D.prototype.get=function(e){F("LString::get",e,"number");return Array.from(this.__string__)[e.valueOf()]};D.prototype.cmp=function(e){F("LString::cmp",e,"string");var t=this.valueOf();var r=e.valueOf();if(t<r){return-1}else if(t===r){return 0}else{return 1}};D.prototype.lower=function(){return D(this.__string__.toLowerCase())};D.prototype.upper=function(){return D(this.__string__.toUpperCase())};D.prototype.set=function(e,t){F("LString::set",e,"number");F("LString::set",t,["string","character"]);e=e.valueOf();if(t instanceof h){t=t.__char__}var r=[];if(e>0){r.push(this.__string__.substring(0,e))}r.push(t);if(e<this.__string__.length-1){r.push(this.__string__.substring(e+1))}this.__string__=r.join("")};Object.defineProperty(D.prototype,"length",{get:function e(){return this.__string__.length}});D.prototype.clone=function(){return D(this.valueOf())};D.prototype.fill=function(e){F("LString::fill",e,["string","character"]);if(e instanceof h){e=e.valueOf()}var t=this.__string__.length;this.__string__=e.repeat(t)};function j(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e instanceof j){return e}if(typeof this!=="undefined"&&!(this instanceof j)||typeof this==="undefined"){return new j(e,t)}if(typeof e==="undefined"){throw new Error("Invalid LNumber constructor call")}var r=j.getType(e);if(j.types[r]){return j.types[r](e,t)}var n=e instanceof Array&&D.isString(e[0])&&j.isNumber(e[1]);if(e instanceof j){return j(e.value)}if(!j.isNumber(e)&&!n){throw new Error("You can't create LNumber from ".concat(H(e)))}if(e===null){e=0}var i;if(n){var a=e,u=b(a,2),o=u[0],s=u[1];if(o instanceof D){o=o.valueOf()}if(s instanceof j){s=s.valueOf()}var c=o.match(/^([+-])/);var f=false;if(c){o=o.replace(/^[+-]/,"");if(c[1]==="-"){f=true}}}if(Number.isNaN(e)){return g(e)}else if(typeof BigInt!=="undefined"){if(typeof e!=="bigint"){if(n){var l;switch(s){case 8:l="0o";break;case 16:l="0x";break;case 2:l="0b";break;case 10:l="";break}if(typeof l==="undefined"){var h=BigInt(s);i=U(o).map(function(e,t){return BigInt(parseInt(e,s))*$o(h,BigInt(t))}).reduce(function(e,t){return e+t})}else{i=BigInt(l+o)}}else{i=BigInt(e)}if(f){i*=BigInt(-1)}}else{i=e}return A(i,true)}else if(typeof oi!=="undefined"&&!(e instanceof oi)){if(e instanceof Array){return A(L(oi,U(e)))}return A(new oi(e))}else if(n){this.constant(parseInt(o,s),"integer")}else{this.constant(e,"integer")}}j.prototype.constant=function(e,t){Object.defineProperty(this,"__value__",{value:e,enumerable:true});Object.defineProperty(this,"__type__",{value:t,enumerable:true})};j.types={float:function e(t){return new g(t)},complex:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!j.isComplex(t)){t={im:0,re:t}}return new m(t,r)},rational:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!j.isRational(t)){t={num:t,denom:1}}return new E(t,r)}};j.prototype.serialize=function(){return this.__value__};j.prototype.isNaN=function(){return Number.isNaN(this.__value__)};j.prototype.gcd=function(e){var t=this.abs();e=e.abs();if(e.cmp(t)===1){var r=t;t=e;e=r}while(true){t=t.rem(e);if(t.cmp(0)===0){return e}e=e.rem(t);if(e.cmp(0)===0){return t}}};j.isFloat=function e(t){return t instanceof g||Number(t)===t&&t%1!==0};j.isNumber=function(e){return e instanceof j||j.isNative(e)||j.isBN(e)};j.isComplex=function(e){if(!e){return false}var t=e instanceof m||(j.isNumber(e.im)||j.isRational(e.im)||Number.isNaN(e.im))&&(j.isNumber(e.re)||j.isRational(e.re)||Number.isNaN(e.re));return t};j.isRational=function(e){if(!e){return false}return e instanceof E||j.isNumber(e.num)&&j.isNumber(e.denom)};j.isInteger=function(e){if(!(j.isNative(e)||e instanceof j)){return false}if(j.isFloat(e)){return false}if(j.isRational(e)){return false}if(j.isComplex(e)){return false}return true};j.isNative=function(e){return typeof e==="bigint"||typeof e==="number"};j.isBigInteger=function(e){return e instanceof A||typeof e==="bigint"||j.isBN(e)};j.isBN=function(e){return typeof oi!=="undefined"&&e instanceof oi};j.getArgsType=function(e,t){if(e instanceof g||t instanceof g){return g}if(e instanceof A||t instanceof A){return A}return j};j.prototype.toString=function(e){if(Number.isNaN(this.__value__)){return"+nan.0"}if(e>=2&&e<36){return this.__value__.toString(e)}return this.__value__.toString()};j.prototype.asType=function(e){var t=j.getType(this);return j.types[t]?j.types[t](e):j(e)};j.prototype.isBigNumber=function(){return typeof this.__value__==="bigint"||typeof oi!=="undefined"&&!(this.value instanceof oi)};["floor","ceil","round"].forEach(function(e){j.prototype[e]=function(){if(this["float"]||j.isFloat(this.__value__)){return j(Math[e](this.__value__))}else{return j(Math[e](this.valueOf()))}}});j.prototype.valueOf=function(){if(j.isNative(this.__value__)){return Number(this.__value__)}else if(j.isBN(this.__value__)){return this.__value__.toNumber()}};var qo=function(){var e=function e(t,r){return[t,r]};return{bigint:{bigint:e,float:function e(t,r){return[g(t.valueOf()),r]},rational:function e(t,r){return[{num:t,denom:1},r]},complex:function e(t,r){return[{im:0,re:t},r]}},integer:{integer:e,float:function e(t,r){return[g(t.valueOf()),r]},rational:function e(t,r){return[{num:t,denom:1},r]},complex:function e(t,r){return[{im:0,re:t},r]}},float:{bigint:function e(t,r){return[t,r&&g(r.valueOf())]},integer:function e(t,r){return[t,r&&g(r.valueOf())]},float:e,rational:function e(t,r){return[t,r&&g(r.valueOf())]},complex:function e(t,r){return[{re:t,im:g(0)},r]}},complex:{bigint:t("bigint"),integer:t("integer"),float:t("float"),rational:t("rational"),complex:function e(t,r){var n=j.coerce(t.__re__,r.__re__),i=b(n,2),a=i[0],u=i[1];var o=j.coerce(t.__im__,r.__im__),s=b(o,2),c=s[0],f=s[1];return[{im:c,re:a},{im:f,re:u}]}},rational:{bigint:function e(t,r){return[t,r&&{num:r,denom:1}]},integer:function e(t,r){return[t,r&&{num:r,denom:1}]},float:function e(t,r){return[g(t.valueOf()),r]},rational:e,complex:function e(t,r){return[{im:zo(t.__type__,r.__im__.__type__,0)[0],re:zo(t.__type__,r.__re__.__type__,t)[0]},{im:zo(t.__type__,r.__im__.__type__,r.__im__)[0],re:zo(t.__type__,r.__re__.__type__,r.__re__)[0]}]}}};function t(r){return function(e,t){return[{im:zo(r,e.__im__.__type__,0,e.__im__)[1],re:zo(r,e.__re__.__type__,0,e.__re__)[1]},{im:zo(r,e.__im__.__type__,0,0)[1],re:zo(r,t.__type__,0,t)[1]}]}}}();function zo(e,t,r,n){return qo[e][t](r,n)}j.coerce=function(e,t){var r=j.getType(e);var n=j.getType(t);if(!qo[r]){throw new Error("LNumber::coerce unknown lhs type ".concat(r))}else if(!qo[r][n]){throw new Error("LNumber::coerce unknown rhs type ".concat(n))}var i=qo[r][n](e,t);return i.map(function(e){return j(e,true)})};j.prototype.coerce=function(e){if(!(typeof e==="number"||e instanceof j)){throw new Error("LNumber: you can't coerce ".concat(H(e)))}if(typeof e==="number"){e=j(e)}return j.coerce(this,e)};j.getType=function(e){if(e instanceof j){return e.__type__}if(j.isFloat(e)){return"float"}if(j.isComplex(e)){return"complex"}if(j.isRational(e)){return"rational"}if(typeof e==="number"){return"integer"}if(typeof BigInt!=="undefined"&&typeof e!=="bigint"||typeof oi!=="undefined"&&!(e instanceof oi)){return"bigint"}};j.prototype.isFloat=function(){return!!(j.isFloat(this.__value__)||this["float"])};var Yo={add:"+",sub:"-",mul:"*",div:"/",rem:"%",or:"|",and:"&",neg:"~",shl:">>",shr:"<<"};var Vo={};Object.keys(Yo).forEach(function(t){Vo[Yo[t]]=t;j.prototype[t]=function(e){return this.op(Yo[t],e)}});j._ops={"*":function e(t,r){return t*r},"+":function e(t,r){return t+r},"-":function e(t,r){if(typeof r==="undefined"){return-t}return t-r},"/":function e(t,r){return t/r},"%":function e(t,r){return t%r},"|":function e(t,r){return t|r},"&":function e(t,r){return t&r},"~":function e(t){return~t},">>":function e(t,r){return t>>r},"<<":function e(t,r){return t<<r}};j.prototype.op=function(e,t){if(typeof t==="undefined"){return j(j._ops[e](this.valueOf()))}if(typeof t==="number"){t=j(t)}if(Number.isNaN(this.__value__)&&!j.isComplex(t)||!j.isComplex(this)&&Number.isNaN(t.__value__)){return j(NaN)}var r=this.coerce(t),n=b(r,2),i=n[0],a=n[1];if(i._op){return i._op(e,a)}return j(j._ops[e](i,a))};j.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=Math.sqrt(-e);return m({re:0,im:t})}return j(Math.sqrt(e))};var $o=function e(t,r){return Math.pow(t,r)};var Jo=new Function("a,b","return a ** b");try{if(Jo(2,2)===4){$o=Jo}}catch(e){}j.prototype.pow=function(e){var t;var r=this.coerce(e),n=b(r,2),i=n[0],a=n[1];if(j.isNative(i.__value__)&&j.isNative(a.__value__)){t=$o(i.__value__,a.__value__)}else if(j.isBN(i.__value__)&&j.isBN(a.__value__)){t=this.__value__.pow(e.__value__)}else if(i.pow){return i.pow(a)}return j(t)};j.prototype.abs=function(){var e=this.__value__;if(j.isNative(this.__value__)){if(e<0){e=-e}}else if(j.isBN(e)){e.iabs()}return new j(e)};j.prototype.isOdd=function(){if(j.isNative(this.__value__)){if(this.isBigNumber()){return this.__value__%BigInt(2)===BigInt(1)}if(this.__type__==="float"){throw new Error("Invalid number float")}return this.__value__%2===1}else if(j.isBN(this.__value__)){return this.__value__.isOdd()}throw new Error("Invalid number ".concat(this.__type__))};j.prototype.isEven=function(){return!this.isOdd()};j.prototype.cmp=function(e){var t=this.coerce(e),r=b(t,2),n=r[0],i=r[1];function a(e,t){if(e.__value__<t.__value__){return-1}else if(e.__value__===t.__value__){return 0}else{return 1}}if(n.__type__==="bigint"){if(j.isNative(n.__value__)){return a(n,i)}else if(j.isBN(n.__value__)){return this.__value__.cmp(i.__value__)}}else if(n instanceof g){return a(n,i)}};function m(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(typeof this!=="undefined"&&!(this instanceof m)||typeof this==="undefined"){return new m(e,t)}if(e instanceof m){return m({im:e.__im__,re:e.__re__})}if(j.isNumber(e)&&t){if(!t){return Number(e)}}else if(!j.isComplex(e)){var r="Invalid constructor call for LComplex expect &(:im <num> :re <num>) object but got ".concat(vu(e));throw new Error(r)}var n=e.im instanceof j?e.im:j(e.im);var i=e.re instanceof j?e.re:j(e.re);this.constant(n,i)}m.prototype=Object.create(j.prototype);m.prototype.constructor=m;m.prototype.constant=function(e,t){Object.defineProperty(this,"__im__",{value:e,enumerable:true});Object.defineProperty(this,"__re__",{value:t,enumerable:true});Object.defineProperty(this,"__type__",{value:"complex",enumerable:true})};m.prototype.serialize=function(){return{re:this.__re__,im:this.__im__}};m.prototype.toRational=function(e){if(j.isFloat(this.__im__)&&j.isFloat(this.__re__)){var t=g(this.__im__).toRational(e);var r=g(this.__re__).toRational(e);return m({im:t,re:r})}return this};m.prototype.pow=function(e){e.cmp(0);if(e===0){return j(1)}var t=j(Math.atan2(this.__im__.valueOf(),this.__re__.valueOf()));var r=j(this.modulus());if(j.isComplex(e)&&e.__im__.cmp(0)!==0){var n=e.mul(Math.log(r.valueOf())).add(m.i.mul(t).mul(e));var i=g(Math.E).pow(n.__re__.valueOf());return m({re:i.mul(Math.cos(n.__im__.valueOf())),im:i.mul(Math.sin(n.__im__.valueOf()))})}e=e.__re__.valueOf();var a=r.pow(e);var u=t.mul(e);return m({re:a.mul(Math.cos(u)),im:a.mul(Math.sin(u))})};m.prototype.add=function(e){return this.complex_op("add",e,function(e,t,r,n){return{re:e.add(t),im:r.add(n)}})};m.prototype.factor=function(){if(this.__im__ instanceof g||this.__im__ instanceof g){var e=this.__re__,t=this.__im__;var r,n;if(e instanceof g){r=e.toRational().mul(e.toRational())}else{r=e.mul(e)}if(t instanceof g){n=t.toRational().mul(t.toRational())}else{n=t.mul(t)}return r.add(n)}else{return this.__re__.mul(this.__re__).add(this.__im__.mul(this.__im__))}};m.prototype.modulus=function(){return this.factor().sqrt()};m.prototype.conjugate=function(){return m({re:this.__re__,im:this.__im__.sub()})};m.prototype.sqrt=function(){var e=this.modulus();var t,r;if(e.cmp(0)===0){t=r=e}else if(this.__re__.cmp(0)===1){t=g(.5).mul(e.add(this.__re__)).sqrt();r=this.__im__.div(t).div(2)}else{r=g(.5).mul(e.sub(this.__re__)).sqrt();if(this.__im__.cmp(0)===-1){r=r.sub()}t=this.__im__.div(r).div(2)}return m({im:r,re:t})};m.prototype.div=function(e){if(j.isNumber(e)&&!j.isComplex(e)){if(!(e instanceof j)){e=j(e)}var t=this.__re__.div(e);var r=this.__im__.div(e);return m({re:t,im:r})}else if(!j.isComplex(e)){throw new Error("[LComplex::div] Invalid value")}if(this.cmp(e)===0){var n=this.coerce(e),i=b(n,2),a=i[0],u=i[1];var o=a.__im__.div(u.__im__);return o.coerce(u.__re__)[0]}var s=this.coerce(e),c=b(s,2),f=c[0],l=c[1];var h=l.factor();var p=l.conjugate();var _=f.mul(p);if(!j.isComplex(_)){return _.div(h)}var d=_.__re__.op("/",h);var v=_.__im__.op("/",h);return m({re:d,im:v})};m.prototype.sub=function(e){return this.complex_op("sub",e,function(e,t,r,n){return{re:e.sub(t),im:r.sub(n)}})};m.prototype.mul=function(e){return this.complex_op("mul",e,function(e,t,r,n){var i={re:e.mul(t).sub(r.mul(n)),im:e.mul(n).add(t.mul(r))};return i})};m.prototype.complex_op=function(e,t,i){var a=this;var r=function e(t,r){var n=i(a.__re__,t,a.__im__,r);if("im"in n&&"re"in n){if(n.im.cmp(0)===0){return n.re}return m(n,true)}return n};if(typeof t==="undefined"){return r()}if(j.isNumber(t)&&!j.isComplex(t)){if(!(t instanceof j)){t=j(t)}var n=t.asType(0);t={__im__:n,__re__:t}}else if(!j.isComplex(t)){throw new Error("[LComplex::".concat(e,"] Invalid value"))}var u=t.__re__ instanceof j?t.__re__:this.__re__.asType(t.__re__);var o=t.__im__ instanceof j?t.__im__:this.__im__.asType(t.__im__);return r(u,o)};m._op={"+":"add","-":"sub","*":"mul","/":"div"};m.prototype._op=function(e,t){var r=m._op[e];return this[r](t)};m.prototype.cmp=function(e){var t=this.coerce(e),r=b(t,2),n=r[0],i=r[1];var a=n.__re__.coerce(i.__re__),u=b(a,2),o=u[0],s=u[1];var c=o.cmp(s);if(c!==0){return c}else{var f=n.__im__.coerce(i.__im__),l=b(f,2),h=l[0],p=l[1];return h.cmp(p)}};m.prototype.valueOf=function(){return[this.__re__,this.__im__].map(function(e){return e.valueOf()})};m.prototype.toString=function(){var e;if(this.__re__.cmp(0)!==0){e=[vu(this.__re__)]}else{e=[]}var t=this.__im__.valueOf();var r=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY].includes(t);var n=vu(this.__im__);if(!r&&!Number.isNaN(t)){var i=this.__im__.cmp(0);if(i<0||i===0&&this.__im__._minus){e.push("-")}else{e.push("+")}n=n.replace(/^-/,"")}e.push(n);e.push("i");return e.join("")};function g(e){if(typeof this!=="undefined"&&!(this instanceof g)||typeof this==="undefined"){return new g(e)}if(!j.isNumber(e)){throw new Error("Invalid constructor call for LFloat")}if(e instanceof j){return g(e.valueOf())}if(typeof e==="number"){if(Object.is(e,-0)){Object.defineProperty(this,"_minus",{value:true})}this.constant(e,"float")}}g.prototype=Object.create(j.prototype);g.prototype.constructor=g;g.prototype.toString=function(){if(this.__value__===Number.NEGATIVE_INFINITY){return"-inf.0"}if(this.__value__===Number.POSITIVE_INFINITY){return"+inf.0"}if(Number.isNaN(this.__value__)){return"+nan.0"}var e=this.__value__.toString();if(!e.match(/e/i)){var t=this.__value__.toString().replace(/^-/,"");var r=this.__value__<0?"-":"";if(e.match(/^-?0\.0{3}/)){var n=t.match(/^[.0]+/g)[0].length-1;var i=t.replace(/^[.0]+/,"").replace(/^([0-9])/,"$1.");return"".concat(r).concat(i,"e-").concat(n)}if(e.match(/^-?[0-9]{7,}\.?/)){var a=t.match(/^[0-9]+/g)[0].length-1;var u=t.replace(/\./,"").replace(/^([0-9])/,"$1.").replace(/0+$/,"").replace(/\.$/,".0");return"".concat(r).concat(u,"e").concat(a)}if(!j.isFloat(this.__value__)){var o=e+".0";return this._minus?"-"+o:o}}return e.replace(/^([0-9]+)e/,"$1.0e")};g.prototype._op=function(e,t){if(t instanceof j){t=t.__value__}var r=j._ops[e];if(e==="/"&&this.__value__===0&&t===0){return NaN}return g(r(this.__value__,t))};g.prototype.toRational=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){return Ko(this.__value__.valueOf())}return Ho(e.valueOf())(this.__value__.valueOf())};g.prototype.sqrt=function(){var e=this.valueOf();if(this.cmp(0)<0){var t=g(Math.sqrt(-e));return m({re:0,im:t})}return g(Math.sqrt(e))};g.prototype.abs=function(){var e=this.valueOf();if(e<0){e=-e}return g(e)};var Ko=Ho(1e-10);function Ho(n){return function(e){var t=function e(n,t,r){var i=function e(t,r){return r<n?t:e(r,t%r)};if(Number.isNaN(t)||Number.isNaN(r)){return NaN}return i(Math.abs(t),Math.abs(r))},r=t(n?n:1/1e4,1,e);return E({num:Math.floor(e/r),denom:Math.floor(1/r)})}}function Wo(e,t){var r=e.sub(t);var n=e.add(t);var i;if(r.cmp(n)>0){i=Go(n,r)}else if(n.cmp(r)<=0){i=r}else if(r.cmp(0)>0){i=Go(r,n)}else if(t.cmp(0)<0){i=j(Go(n.sub(),r.sub())).sub()}else{i=j(0)}if(j.isFloat(t)||j.isFloat(e)){return g(i)}return i}function Go(e,t){var r=j(e).floor();var n=j(t).floor();if(e.cmp(r)<1){return r}else if(r.cmp(n)===0){var i=j(1).div(t.sub(n));var a=j(1).div(e.sub(r));return r.add(j(1).div(Go(i,a)))}else{return r.add(j(1))}}function E(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(typeof this!=="undefined"&&!(this instanceof E)||typeof this==="undefined"){return new E(e,t)}if(!j.isRational(e)){throw new Error("Invalid constructor call for LRational")}var r,n;if(e instanceof E){r=j(e.__num__);n=j(e.__denom__)}else{r=j(e.num);n=j(e.denom)}if(!t&&n.cmp(0)!==0){var i=r.op("%",n).cmp(0)===0;if(i){return j(r.div(n))}}this.constant(r,n)}E.prototype=Object.create(j.prototype);E.prototype.constructor=E;E.prototype.constant=function(e,t){Object.defineProperty(this,"__num__",{value:e,enumerable:true});Object.defineProperty(this,"__denom__",{value:t,enumerable:true});Object.defineProperty(this,"__type__",{value:"rational",enumerable:true})};E.prototype.serialize=function(){return{num:this.__num__,denom:this.__denom__}};E.prototype.pow=function(e){if(j.isRational(e)){return $o(this.valueOf(),e.valueOf())}var t=e.cmp(0);if(t===0){return j(1)}if(t===-1){e=e.sub();var r=this.__denom__.pow(e);var n=this.__num__.pow(e);return E({num:r,denom:n})}var i=this;e=e.valueOf();while(e>1){i=i.mul(this);e--}return i};E.prototype.sqrt=function(){var e=this.__num__.sqrt();var t=this.__denom__.sqrt();if(e instanceof g||t instanceof g){return e.div(t)}return E({num:e,denom:t})};E.prototype.abs=function(){var e=this.__num__;var t=this.__denom__;if(e.cmp(0)===-1){e=e.sub()}if(t.cmp(0)!==1){t=t.sub()}return E({num:e,denom:t})};E.prototype.cmp=function(e){return j(this.valueOf(),true).cmp(e)};E.prototype.toString=function(){var e=this.__num__.gcd(this.__denom__);var t,r;if(e.cmp(1)!==0){t=this.__num__.div(e);if(t instanceof E){t=j(t.valueOf(true))}r=this.__denom__.div(e);if(r instanceof E){r=j(r.valueOf(true))}}else{t=this.__num__;r=this.__denom__}var n=this.cmp(0)<0;if(n){if(t.abs().cmp(r.abs())===0){return t.toString()}}else if(t.cmp(r)===0){return t.toString()}return t.toString()+"/"+r.toString()};E.prototype.valueOf=function(e){if(this.__denom__.cmp(0)===0){if(this.__num__.cmp(0)<0){return Number.NEGATIVE_INFINITY}return Number.POSITIVE_INFINITY}if(e){return j._ops["/"](this.__num__.value,this.__denom__.value)}return g(this.__num__.valueOf()).div(this.__denom__.valueOf())};E.prototype.mul=function(e){if(!(e instanceof j)){e=j(e)}if(j.isRational(e)){var t=this.__num__.mul(e.__num__);var r=this.__denom__.mul(e.__denom__);return E({num:t,denom:r})}var n=j.coerce(this,e),i=b(n,2),a=i[0],u=i[1];return a.mul(u)};E.prototype.div=function(e){if(!(e instanceof j)){e=j(e)}if(j.isRational(e)){var t=this.__num__.mul(e.__denom__);var r=this.__denom__.mul(e.__num__);return E({num:t,denom:r})}var n=j.coerce(this,e),i=b(n,2),a=i[0],u=i[1];var o=a.div(u);return o};E.prototype._op=function(e,t){return this[Vo[e]](t)};E.prototype.sub=function(e){if(typeof e==="undefined"){return this.mul(-1)}if(!(e instanceof j)){e=j(e)}if(j.isRational(e)){var t=e.__num__.sub();var r=e.__denom__;return this.add(E({num:t,denom:r}))}if(!(e instanceof j)){e=j(e).sub()}else{e=e.sub()}var n=j.coerce(this,e),i=b(n,2),a=i[0],u=i[1];return a.add(u)};E.prototype.add=function(e){if(!(e instanceof j)){e=j(e)}if(j.isRational(e)){var t=this.__denom__;var r=e.__denom__;var n=this.__num__;var i=e.__num__;var a,u;if(t!==r){u=r.mul(n).add(i.mul(t));a=t.mul(r)}else{u=n.add(i);a=t}return E({num:u,denom:a})}if(j.isFloat(e)){return g(this.valueOf()).add(e)}var o=j.coerce(this,e),s=b(o,2),c=s[0],f=s[1];return c.add(f)};function A(e,t){if(typeof this!=="undefined"&&!(this instanceof A)||typeof this==="undefined"){return new A(e,t)}if(e instanceof A){return A(e.__value__,e._native)}if(!j.isBigInteger(e)){throw new Error("Invalid constructor call for LBigInteger")}this.constant(e,"bigint");Object.defineProperty(this,"_native",{value:t})}A.prototype=Object.create(j.prototype);A.prototype.constructor=A;A.bn_op={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"};A.prototype.serialize=function(){return this.__value__.toString()};A.prototype._op=function(e,t){if(typeof t==="undefined"){if(j.isBN(this.__value__)){e=A.bn_op[e];return A(this.__value__.clone()[e](),false)}return A(j._ops[e](this.__value__),true)}if(j.isBN(this.__value__)&&j.isBN(t.__value__)){e=A.bn_op[e];return A(this.__value__.clone()[e](t),false)}var r=j._ops[e](this.__value__,t.__value__);if(e==="/"){var n=this.op("%",t).cmp(0)===0;if(n){return j(r)}return E({num:this,denom:t})}return A(r,true)};A.prototype.sqrt=function(){var e;var t=this.cmp(0)<0;if(j.isNative(this.__value__)){e=j(Math.sqrt(t?-this.valueOf():this.valueOf()))}else if(j.isBN(this.__value__)){e=t?this.__value__.neg().sqrt():this.__value__.sqrt()}if(t){return m({re:0,im:e})}return e};j.NaN=j(NaN);m.i=m({im:1,re:0});function Qo(e){var n=this;if(typeof this!=="undefined"&&!(this instanceof Qo)||typeof this==="undefined"){return new Qo(e)}F("InputPort",e,"function");f(this,"__type__",cs);var i;Object.defineProperty(this,"__parser__",{enumerable:true,get:function e(){return i},set:function e(t){F("InputPort::__parser__",t,"parser");i=t}});this._read=e;this._with_parser=this._with_init_parser.bind(this,ie(C.mark(function e(){var r;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(n.char_ready()){t.next=5;break}t.next=3;return n._read();case 3:r=t.sent;i=new wa(r,{env:n});case 5:return t.abrupt("return",n.__parser__);case 6:case"end":return t.stop()}},e)})));this.char_ready=function(){return!!this.__parser__&&this.__parser__.__lexer__.peek()!==fs};this._make_defaults()}Qo.prototype._make_defaults=function(){this.read=this._with_parser(function(e){return e.read_object()});this.read_line=this._with_parser(function(e){return e.__lexer__.read_line()});this.read_char=this._with_parser(function(e){return e.__lexer__.read_char()});this.read_string=this._with_parser(function(e,t){if(!j.isInteger(t)){var r=j.getType(t);Rs("read-string",r,"integer")}return e.__lexer__.read_string(t.valueOf())});this.peek_char=this._with_parser(function(e){return e.__lexer__.peek_char()})};Qo.prototype._with_init_parser=function(o,s){var c=this;return ie(C.mark(function e(){var r,n,i,a,u=arguments;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return o.call(c);case 2:r=t.sent;for(n=u.length,i=new Array(n),a=0;a<n;a++){i[a]=u[a]}return t.abrupt("return",s.apply(void 0,[r].concat(i)));case 5:case"end":return t.stop()}},e)}))};Qo.prototype.is_open=function(){return this._with_parser!==null};Qo.prototype.close=function(){var t=this;this.__parser__=null;this._with_parser=null;["read","close","read_char","peek-char","read_line"].forEach(function(e){t[e]=function(){throw new Error("input-port: port is closed")}});this.char_ready=function(){return false}};Qo.prototype.toString=function(){return"#<input-port>"};function Zo(e){if(typeof this!=="undefined"&&!(this instanceof Zo)||typeof this==="undefined"){return new Zo(e)}F("OutputPort",e,"function");f(this,"__type__",cs);this.write=e}Zo.prototype.is_open=function(){return this._closed!==true};Zo.prototype.close=function(){Object.defineProperty(this,"_closed",{get:function e(){return true},set:function e(){},configurable:false,enumerable:false});this.write=function(){throw new Error("output-port: port is closed")}};Zo.prototype.flush=function(){};Zo.prototype.toString=function(){return"#<output-port>"};var Xo=function(e){G(r,e);function r(e){var t;ae(this,r);t=Kn(this,r,[function(){var e;return(e=t)._write.apply(e,arguments)}]);F("BufferedOutputPort",e,"function");f(M(t),"_fn",e,{hidden:true});f(M(t),"_buffer",[],{hidden:true});return t}ce(r,[{key:"flush",value:function e(){if(this._buffer.length){this._fn(this._buffer.join(""));this._buffer.length=0}}},{key:"_write",value:function e(){var t=this;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}if(n.length){n.forEach(function(e){t._buffer.push(e)});var a=this._buffer[this._buffer.length-1];if(a.match(/\n$/)){this._buffer[this._buffer.length-1]=a.replace(/\n$/,"");this.flush()}}}}]);return r}(Zo);function es(t){var r=this;if(typeof this!=="undefined"&&!(this instanceof es)||typeof this==="undefined"){return new es(t)}F("OutputStringPort",t,"function");f(this,"__type__",cs);f(this,"__buffer__",[]);this.write=function(e){if(!D.isString(e)){e=t(e)}else{e=e.valueOf()}r.__buffer__.push(e)}}es.prototype=Object.create(Zo.prototype);es.prototype.constructor=es;es.prototype.toString=function(){return"#<output-port (string)>"};es.prototype.valueOf=function(){return this.__buffer__.map(function(e){return e.valueOf()}).join("")};function ts(e,t){var r=this;if(typeof this!=="undefined"&&!(this instanceof ts)||typeof this==="undefined"){return new ts(e,t)}F("OutputFilePort",e,"string");f(this,"__filename__",e);f(this,"_fd",t.valueOf(),{hidden:true});f(this,"__type__",cs);this.write=function(e){if(!D.isString(e)){e=vu(e)}else{e=e.valueOf()}r.fs().write(r._fd,e,function(e){if(e){throw e}})}}ts.prototype=Object.create(Zo.prototype);ts.prototype.constructor=ts;ts.prototype.fs=function(){if(!this._fs){this._fs=this.internal("fs")}return this._fs};ts.prototype.internal=function(e){return xs.get("**internal-env**").get(e)};ts.prototype.close=function(){var n=this;return new Promise(function(t,r){n.fs().close(n._fd,function(e){if(e){r(e)}else{f(n,"_fd",null,{hidden:true});Zo.prototype.close.call(n);t()}})})};ts.prototype.toString=function(){return"#<output-port ".concat(this.__filename__,">")};function rs(e,t){var r=this;if(typeof this!=="undefined"&&!(this instanceof rs)||typeof this==="undefined"){return new rs(e)}F("InputStringPort",e,"string");t=t||K;e=e.valueOf();this._with_parser=this._with_init_parser.bind(this,function(){if(!r.__parser__){r.__parser__=new wa(e,{env:t})}return r.__parser__});f(this,"__type__",cs);this._make_defaults()}rs.prototype.char_ready=function(){return true};rs.prototype=Object.create(Qo.prototype);rs.prototype.constructor=rs;rs.prototype.toString=function(){return"#<input-port (string)>"};function ns(e){if(typeof this!=="undefined"&&!(this instanceof ns)||typeof this==="undefined"){return new ns(e)}F("InputByteVectorPort",e,"uint8array");f(this,"__vector__",e);f(this,"__type__",ss);var r=0;Object.defineProperty(this,"__index__",{enumerable:true,get:function e(){return r},set:function e(t){F("InputByteVectorPort::__index__",t,"number");if(t instanceof j){t=t.valueOf()}if(typeof t==="bigint"){t=Number(t)}if(Math.floor(t)!==t){throw new Error("InputByteVectorPort::__index__ value is "+"not integer")}r=t}})}ns.prototype=Object.create(Qo.prototype);ns.prototype.constructor=ns;ns.prototype.toString=function(){return"#<input-port (bytevector)>"};ns.prototype.close=function(){var t=this;f(this,"__vector__",V);var r=function e(){throw new Error("Input-binary-port: port is closed")};["read_u8","close","peek_u8","read_u8_vector"].forEach(function(e){t[e]=r});this.u8_ready=this.char_ready=function(){return false}};ns.prototype.u8_ready=function(){return true};ns.prototype.peek_u8=function(){if(this.__index__>=this.__vector__.length){return fs}return this.__vector__[this.__index__]};ns.prototype.skip=function(){if(this.__index__<=this.__vector__.length){++this.__index__}};ns.prototype.read_u8=function(){var e=this.peek_u8();this.skip();return e};ns.prototype.read_u8_vector=function(e){if(typeof e==="undefined"){e=this.__vector__.length}else if(e>this.__index__+this.__vector__.length){e=this.__index__+this.__vector__.length}if(this.peek_u8()===fs){return fs}return this.__vector__.slice(this.__index__,e)};function is(){if(typeof this!=="undefined"&&!(this instanceof is)||typeof this==="undefined"){return new is}f(this,"__type__",ss);f(this,"_buffer",[],{hidden:true});this.write=function(e){F("write",e,["number","uint8array"]);if(j.isNumber(e)){this._buffer.push(e.valueOf())}else{var t;(t=this._buffer).push.apply(t,U(Array.from(e)))}};Object.defineProperty(this,"__buffer__",{enumerable:true,get:function e(){return Uint8Array.from(this._buffer)}})}is.prototype=Object.create(Zo.prototype);is.prototype.constructor=is;is.prototype.close=function(){Zo.prototype.close.call(this);f(this,"_buffer",null,{hidden:true})};is.prototype._close_guard=function(){if(this._closed){throw new Error("output-port: binary port is closed")}};is.prototype.write_u8=function(e){F("OutputByteVectorPort::write_u8",e,"number");this.write(e)};is.prototype.write_u8_vector=function(e){F("OutputByteVectorPort::write_u8_vector",e,"uint8array");this.write(e)};is.prototype.toString=function(){return"#<output-port (bytevector)>"};is.prototype.valueOf=function(){return this.__buffer__};function as(e,t){if(typeof this!=="undefined"&&!(this instanceof as)||typeof this==="undefined"){return new as(e,t)}rs.call(this,e);F("InputFilePort",t,"string");f(this,"__filename__",t)}as.prototype=Object.create(rs.prototype);as.prototype.constructor=as;as.prototype.toString=function(){return"#<input-port (".concat(this.__filename__,")>")};function us(e,t){if(typeof this!=="undefined"&&!(this instanceof us)||typeof this==="undefined"){return new us(e,t)}ns.call(this,e);F("InputBinaryFilePort",t,"string");f(this,"__filename__",t)}us.prototype=Object.create(ns.prototype);us.prototype.constructor=us;us.prototype.toString=function(){return"#<input-binary-port (".concat(this.__filename__,")>")};function os(e,t){var i=this;if(typeof this!=="undefined"&&!(this instanceof os)||typeof this==="undefined"){return new os(e,t)}F("OutputBinaryFilePort",e,"string");f(this,"__filename__",e);f(this,"_fd",t.valueOf(),{hidden:true});f(this,"__type__",ss);var a;this.write=function(e){F("write",e,["number","uint8array"]);var n;if(!a){a=i.internal("fs")}if(j.isNumber(e)){n=new Uint8Array([e.valueOf()])}else{n=new Uint8Array(Array.from(e))}return new Promise(function(t,r){a.write(i._fd,n,function(e){if(e){r(e)}else{t()}})})}}os.prototype=Object.create(ts.prototype);os.prototype.constructor=os;os.prototype.write_u8=function(e){F("OutputByteVectorPort::write_u8",e,"number");this.write(e)};os.prototype.write_u8_vector=function(e){F("OutputByteVectorPort::write_u8_vector",e,"uint8array");this.write(e)};var ss=Symbol["for"]("binary");var cs=Symbol["for"]("text");var fs=new ls;function ls(){}ls.prototype.toString=function(){return"#<eof>"};function hs(e){var t=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=r.stderr,i=r.stdin,a=r.stdout,u=r.command_line,o=u===void 0?null:u,s=he(r,qn);if(typeof this!=="undefined"&&!(this instanceof hs)||typeof this==="undefined"){return new hs(e,q({stdin:i,stdout:a,stderr:n,command_line:o},s))}if(typeof e==="undefined"){e="anonymous"}this.__env__=xs.inherit(e,s);this.__env__.set("parent.frame",l("parent.frame",function(){return t.__env__},K.__env__["parent.frame"].__doc__));var c="**interaction-environment-defaults**";this.set(c,lu(s).concat(c));var f=Ds.inherit("internal-".concat(e));if(no(i)){f.set("stdin",i)}if(no(n)){f.set("stderr",n)}if(no(a)){f.set("stdout",a)}f.set("command-line",o);Fs(this.__env__,f)}hs.prototype.exec=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=t.use_dynamic,n=r===void 0?false:r,i=t.dynamic_env,a=t.env;F("Interpreter::exec",e,["string","array"],1);F("Interpreter::exec",n,"boolean",2);if(!a){a=this.__env__}if(!i){i=a}K.set("**interaction-environment**",this.__env__);return tc(e,{env:a,dynamic_env:i,use_dynamic:n})};hs.prototype.get=function(e){var t=this.__env__.get(e);if(d(t)){var r=new Qs({env:this.__env__});return t.bind(r)}return t};hs.prototype.set=function(e,t){return this.__env__.set(e,t)};hs.prototype.constant=function(e,t){return this.__env__.constant(e,t)};function ps(e,t){this.name="LipsError";this.message=e;this.args=t;this.stack=(new Error).stack}ps.prototype=new Error;ps.prototype.constructor=ps;var _s=function(e){G(t,e);function t(){ae(this,t);return Kn(this,t,arguments)}return ce(t)}(r(Error));function x(e,t,r){if(arguments.length===1){if(p(arguments[0])==="object"){e=arguments[0];t=null}else if(typeof arguments[0]==="string"){e={};t=null;r=arguments[0]}}this.__docs__=new Map;this.__env__=e;this.__parent__=t;this.__name__=r||"anonymous"}x.prototype.list=function(){return lu(this.__env__)};x.prototype.fs=function(){return this.get("**fs**")};x.prototype.unset=function(e){if(e instanceof Y){e=e.valueOf()}if(e instanceof D){e=e.valueOf()}delete this.__env__[e]};x.prototype.inherit=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(p(e)==="object"){t=e}if(!e||p(e)==="object"){e="child of "+(this.__name__||"unknown")}return new x(t||{},this,e)};x.prototype.doc=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e instanceof Y){e=e.__name__}if(e instanceof D){e=e.valueOf()}if(t){if(!r){t=Sa(t)}this.__docs__.set(e,t);return this}if(this.__docs__.has(e)){return this.__docs__.get(e)}if(this.__parent__){return this.__parent__.doc(e)}};x.prototype.new_frame=function(e,t){var n=this.inherit("__frame__");n.set("parent.frame",l("parent.frame",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;e=e.valueOf();var t=n.__parent__;if(!Lu(t)){return V}if(e<=0){return t}var r=t.get("parent.frame");return r(e-1)},K.__env__["parent.frame"].__doc__));t.callee=e;n.set("arguments",t);return n};x.prototype._lookup=function(e){if(e instanceof Y){e=e.__name__}if(e instanceof D){e=e.valueOf()}if(this.__env__.hasOwnProperty(e)){return ds(this.__env__[e])}if(this.__parent__){return this.__parent__._lookup(e)}};x.prototype.toString=function(){return"#<environment:"+this.__name__+">"};x.prototype.clone=function(){var t=this;var r={};Object.keys(this.__env__).forEach(function(e){r[e]=t.__env__[e]});return new x(r,this.__parent__,this.__name__)};x.prototype.merge=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"merge";F("Environment::merge",e,"environment");return this.inherit(t,e.__env__)};function ds(e){if(typeof this!=="undefined"&&!(this instanceof ds)||typeof this==="undefined"){return new ds(e)}this.value=e}ds.isUndefined=function(e){return e instanceof ds&&typeof e.value==="undefined"};ds.prototype.valueOf=function(){return this.value};function vs(e){if(e.length){if(e.length===1){return e[0]}}if(typeof this!=="undefined"&&!(this instanceof vs)||typeof this==="undefined"){return new vs(e)}this.__values__=e}vs.prototype.toString=function(){return this.__values__.map(function(e){return vu(e)}).join("\n")};vs.prototype.valueOf=function(){return this.__values__};x.prototype.get=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};F("Environment::get",e,["symbol","string"]);var r=t.throwError,n=r===void 0?true:r;var i=e;if(i instanceof Y||i instanceof D){i=i.valueOf()}var a=this._lookup(i);if(a instanceof ds){if(ds.isUndefined(a)){return undefined}return Qu(a.valueOf())}var u;if(e instanceof Y&&e[Y.object]){u=e[Y.object]}else if(typeof i==="string"){u=i.split(".").filter(Boolean)}if(u&&u.length>0){var o=u,s=re(o),c=s[0],f=s.slice(1);a=this._lookup(c);if(f.length){try{if(a instanceof ds){a=a.valueOf()}else{a=gs(ti,c);if(d(a)){a=Zu(a)}}if(typeof a!=="undefined"){return gs.apply(void 0,[a].concat(U(f)))}}catch(e){throw e}}else if(a instanceof ds){return Qu(a.valueOf())}a=gs(ti,i)}if(typeof a!=="undefined"){return a}if(n){throw new Error("Unbound variable `"+i.toString()+"'")}};x.prototype.set=function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;F("Environment::set",e,["string","symbol"]);if(j.isNumber(t)){t=j(t)}if(e instanceof Y){e=e.__name__}if(e instanceof D){e=e.valueOf()}this.__env__[e]=t;if(r){this.doc(e,r,true)}return this};x.prototype.constant=function(t,e){var r=this;if(this.__env__.hasOwnProperty(t)){throw new Error("Environment::constant: ".concat(t," already exists"))}if(arguments.length===1&&nu(arguments[0])){var n=arguments[0];Object.keys(n).forEach(function(e){r.constant(t,n[e])})}else{Object.defineProperty(this.__env__,t,{value:e,enumerable:true})}return this};x.prototype.has=function(e){return this.__env__.hasOwnProperty(e)};x.prototype.ref=function(e){var t=this;while(true){if(!t){break}if(t.has(e)){return t}t=t.__parent__}};x.prototype.parents=function(){var e=this;var t=[];while(e){t.unshift(e);e=e.__parent__}return t};function ys(e){if(qu(e)){return e.then(ys)}if(e instanceof $||e instanceof Y){e[oo]=true}return e}var ms=Ea(na('(lambda ()\n                                      "[native code]"\n                                      (throw "Invalid Invocation"))'))[0];var gs=l("get",function e(t){var r;for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++){i[a-1]=arguments[a]}var u=i.length;while(i.length){if(d(t)&&p(i[0])!=="symbol"){t=Zu(t)}var o=i.shift();var s=Gu(o);if(s==="then"&&t instanceof ca){r=ca.prototype.then}else if(s==="__code__"&&d(t)&&typeof t.__code__==="undefined"){r=ms}else{r=t[s]}if(typeof r==="undefined"){if(i.length){throw new Error("Try to get ".concat(i[0]," from undefined"))}return r}else{var c;if(i.length-1<u){c=t}r=Qu(r,c)}t=r}return r},"(. obj . args)\n    (get obj . args)\n\n    This function uses an object as a base and keeps using arguments to get the\n    property of JavaScript object. Arguments need to be a strings.\n    e.g. `(. console \"log\")` if you use any function inside LIPS it\n    will be weakly bound (can be rebound), so you can call this log function\n    without problem unlike in JavaScript when you use\n    `var log = console.log`.\n    `get` is an alias because . doesn't work everywhere, e.g. you can't\n    pass it as an argument.");function bs(e,t){var r=ws(e,"**internal-env**");return r.get(t)}function ws(e,t){var r=e.get("**interaction-environment**");return r.get(t)}var Ds=new x({stdout:new Xo(function(){var e;(e=console).log.apply(e,arguments)}),stderr:new Xo(function(){var e;(e=console).error.apply(e,arguments)}),"command-line":[],stdin:Qo(function(){return Promise.resolve(prompt(""))}),"letter-unicode-regex":/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/,"numeral-unicode-regex":/(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDF50-\uDF59\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDEC0-\uDEC9\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD839[\uDCF0-\uDCF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])/,"space-unicode-regex":/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/},undefined,"internal");var Es=j(NaN);var As={"#t":true,"#f":false,nil:V,null:null,undefined:undefined,"+nan.0":Es,"-nan.0":Es};var K=new x({eof:fs,undefined:undefined,"peek-char":l("peek-char",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=bs(this,"stdin")}Us("peek-char",e,"input-port");return e.peek_char()},"(peek-char port)\n\n        This function reads and returns a character from the string\n        port, or, if there is no more data in the string port, it\n        returns an EOF."),"read-line":l("read-line",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=bs(this,"stdin")}Us("read-line",e,"input-port");return e.read_line()},"(read-line port)\n\n        This function reads and returns the next line from the input\n        port."),"read-char":l("read-char",function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(e===null){e=bs(this,"stdin")}Us("read-char",e,"input-port");return e.read_char()},"(read-char port)\n\n        This function reads and returns the next character from the\n        input port."),read:l("read",function(){var e=ie(function(){var f=this;var l=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return C.mark(function e(){var r,n,i,a,u,o,s,c;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=f.env;if(!D.isString(l)){t.next=30;break}n=false;i=false;t.prev=4;u=Xn(Ea(l,r));case 6:t.next=8;return u.next();case 8:if(!(n=!(o=t.sent).done)){t.next=14;break}s=o.value;return t.abrupt("return",s);case 11:n=false;t.next=6;break;case 14:t.next=20;break;case 16:t.prev=16;t.t0=t["catch"](4);i=true;a=t.t0;case 20:t.prev=20;t.prev=21;if(!(n&&u["return"]!=null)){t.next=25;break}t.next=25;return u["return"]();case 25:t.prev=25;if(!i){t.next=28;break}throw a;case 28:return t.finish(25);case 29:return t.finish(20);case 30:if(l===null){c=bs(r,"stdin")}else{c=l}Us("read",c,"input-port");return t.abrupt("return",c.read.call(r));case 33:case"end":return t.stop()}},e,null,[[4,16,20,30],[21,,25,29]])})()});function t(){return e.apply(this,arguments)}return t}(),"(read [string])\n\n        This function, if used with a string, will parse it and\n        return the LIPS code, if there is any. If called with a\n        port, it will parse the next item from the port. If called\n        without an input, it will read a string from standard input\n        (using the browser's prompt or a user defined input method)\n        and calls itself with that string. This function can be used\n        together with `eval` to evaluate code from a string."),pprint:l("pprint",function e(t){if(t instanceof $){t=new Rc.Formatter(t.toString(true))["break"]().format();K.get("display").call(K,t)}else{K.get("write").call(K,t)}K.get("newline").call(K)},"(pprint expression)\n\n        This function will pretty print its input to stdout. If it is called\n        with a non-list, it will just call the print function on its\n        input."),print:l("print",function e(){var t=K.get("display");var r=K.get("newline");var n=this.use_dynamic;var i=K;var a=K;for(var u=arguments.length,o=new Array(u),s=0;s<u;s++){o[s]=arguments[s]}o.forEach(function(e){Ks(t,[e],{env:i,dynamic_env:a,use_dynamic:n});Ks(r,[],{env:i,dynamic_env:a,use_dynamic:n})})},"(print . args)\n\n        This function converts each input into a string and prints\n        the result to the standard output (by default it's the\n        console but it can be defined in user code). This function\n        calls `(newline)` after printing each input."),format:l("format",function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}F("format",t,"string");var a=/(~[as%~])/g;var u=t.match(/(~[as])/g);if(u&&u.length>n.length){throw new Error("Not enough arguments")}var o=0;var s=K.get("repr");t=t.replace(a,function(e){var t=e[1];if(t==="~"){return"~"}else if(t==="%"){return"\n"}else{var r=n[o++];if(t==="a"){return s(r)}else{return s(r,true)}}});u=t.match(/~([\S])/);if(u){throw new Error("format: Unrecognized escape sequence ".concat(u[1]))}return t},"(format string n1 n2 ...)\n\n        This function accepts a string template and replaces any\n        escape sequences in its inputs:\n\n        * ~a value as if printed with `display`\n        * ~s value as if printed with `write`\n        * ~% newline character\n        * ~~ literal tilde '~'\n\n        If there are missing inputs or other escape characters it\n        will error."),display:l("display",function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(r===null){r=bs(this,"stdout")}else{F("display",r,"output-port")}var n=t;if(!(r instanceof os)){n=K.get("repr")(t)}r.write.call(K,n)},"(display string [port])\n\n        This function outputs the string to the standard output or\n        the port if given. No newline."),"display-error":l("display-error",function e(){var t=bs(this,"stderr");var r=K.get("repr");for(var n=arguments.length,i=new Array(n),a=0;a<n;a++){i[a]=arguments[a]}var u=i.map(r).join(" ");t.write.call(K,u);K.get("newline")(t)},"(display-error . args)\n\n        Display an error message on stderr."),"%same-functions":l("%same-functions",function(e,t){if(!d(e)){return false}if(!d(t)){return false}return Zu(e)===Zu(t)},"(%same-functions a b)\n\n        A helper function that checks if the two input functions are\n        the same."),help:l(new J("help",function(e,t){var r=t.dynamic_env,n=t.use_dynamic,i=t.error;var a;if(e.car instanceof Y){a=e.car}else if(e.car instanceof $&&e.car.car instanceof Y){a=e.car.car}else{var u=this;r=this;var o=k(e.car,{env:u,error:i,dynamic_env:r,use_dynamic:n});if(o&&o.__doc__){return o.__doc__}return}var s;var c=this.get(a);s=c&&c.__doc__;if(s){return s}var f=this.ref(a);if(f){s=f.doc(a);if(s){return s}}}),"(help object)\n\n         This macro returns documentation for a function or macro.\n         You can save the function or macro in a variable and use it\n         here. But getting help for a variable requires passing the\n         variable in a `quote`."),cons:l("cons",function e(t,r){return new $(t,r)},"(cons left right)\n\n        This function returns a new list with the first appended\n        before the second. If the second is not a list cons will\n        return a dotted pair."),car:l("car",function e(t){F("car",t,"pair");return t.car},"(car pair)\n\n        This function returns the car (item 1) of the list."),cdr:l("cdr",function e(t){F("cdr",t,"pair");return t.cdr},"(cdr pair)\n\n        This function returns the cdr (all but first) of the list."),"set!":l(new J("set!",function(e){var a=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.use_dynamic,n=he(t,zn);var i=this;var u=this;var o;var s=q(q({},n),{},{env:this,dynamic_env:i,use_dynamic:r});var c=k(e.cdr.car,s);c=zs(c);function f(t,r,n){if(qu(t)){return t.then(function(e){return f(t,e,n)})}if(qu(r)){return r.then(function(e){return f(t,e,n)})}if(qu(n)){return n.then(function(e){return f(t,r,e)})}u.get("set-obj!").call(u,t,r,n);return n}if(e.car instanceof $&&Y.is(e.car.car,".")){var l=e.car.cdr.car;var h=e.car.cdr.cdr.car;var p=k(l,{env:this,dynamic_env:i,use_dynamic:r,error:error});var _=k(h,{env:this,dynamic_env:i,use_dynamic:r,error:error});return f(p,_,c)}if(!(e.car instanceof Y)){throw new Error("set! first argument need to be a symbol or "+"dot accessor that evaluate to object.")}var d=e.car.valueOf();o=this.ref(e.car.__name__);return w(c,function(e){if(!o){var t=d.split(".");if(t.length>1){var r=t.pop();var n=t.join(".");var i=a.get(n,{throwError:false});if(i){f(i,r,e);return}}throw new Error("Unbound variable `"+d+"'")}o.set(d,e)})}),"(set! name value)\n\n         Macro that can be used to set the value of the variable or slot (mutate it).\n         set! searches the scope chain until it finds first non empty slot and sets it."),"unset!":l(new J("set!",function(e){if(!(e.car instanceof Y)){throw new Error("unset! first argument need to be a symbol or "+"dot accessor that evaluate to object.")}var t=e.car;var r=this.ref(t);if(r){delete r.__env__[t.__name__]}}),"(unset! name)\n\n         Function to delete the specified name from environment.\n         Trying to access the name afterwards will error."),"set-car!":l("set-car!",function(e,t){F("set-car!",e,"pair");e.car=t},"(set-car! obj value)\n\n         Function that sets the car (first item) of the list/pair to specified value.\n         The old value is lost."),"set-cdr!":l("set-cdr!",function(e,t){F("set-cdr!",e,"pair");e.cdr=t},"(set-cdr! obj value)\n\n         Function that sets the cdr (tail) of the list/pair to specified value.\n         It will destroy the list. The old tail is lost."),"empty?":l("empty?",function(e){return typeof e==="undefined"||e===V},"(empty? object)\n\n         Function that returns #t if value is nil (an empty list) or undefined."),gensym:l("gensym",sa,"(gensym)\n\n         Generates a unique symbol that is not bound anywhere,\n         to use with macros as meta name."),load:l("load",function e(o,t){F("load",o,"string");var s=this;if(s.__name__==="__frame__"){s=s.__parent__}if(!(t instanceof x)){if(s===K){t=s}else{t=this.get("**interaction-environment**")}}var c="**module-path**";var f=K.get(c,{throwError:false});o=o.valueOf();if(!o.match(/.[^.]+$/)){o+=".scm"}var r=o.match(/\.xcb$/);function l(e){if(r){e=Cc(e)}else{if(H(e)==="buffer"){e=e.toString()}e=e.replace(/^#!.*/,"");if(e.match(/^\{/)){e=wc(e)}}return tc(e,{env:t})}function n(e){return ti.fetch(e).then(function(e){return r?e.arrayBuffer():e.text()}).then(function(e){if(r){e=new Uint8Array(e)}return e})}if(js()){return new Promise(function(){var r=ie(C.mark(function e(r,n){var i,a,u;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i=ui("path");if(!f){t.next=6;break}f=f.valueOf();o=i.join(f,o);t.next=12;break;case 6:a=s.get("command-line",{throwError:false});if(!a){t.next=11;break}t.next=10;return a();case 10:u=t.sent;case 11:if(u&&u!==V){process.cwd();o=i.join(i.dirname(u.car.valueOf()),o)}case 12:K.set(c,i.dirname(o));ui("fs").readFile(o,function(e,t){if(e){n(e);K.set(c,f)}else{try{l(t).then(function(){r();K.set(c,f)})["catch"](n)}catch(e){n(e)}}});case 14:case"end":return t.stop()}},e)}));return function(e,t){return r.apply(this,arguments)}}())}if(f){f=f.valueOf();o=f+"/"+o.replace(/^\.?\/?/,"")}return n(o).then(function(e){K.set(c,o.replace(/\/[^/]*$/,""));return l(e)}).then(function(){})["finally"](function(){K.set(c,f)})},"(load filename)\n        (load filename environment)\n\n        Fetches the file (from disk or network) and evaluates its content as LIPS code.\n        If the second argument is provided and it's an environment the evaluation\n        will happen in that environment."),while:l(new J("while",function(e,t){var r=e.car;var n=q(q({},t),{},{env:this});var i=new $(new Y("begin"),e.cdr);(function t(){w(k(r,n),function(e){if(e){w(k(i,n),t)}})})()}),"(while cond body)\n\n         Creates a loop, it executes cond and body until cond expression is false."),do:l(new J("do",function(){var r=ie(function(h,e){var p=this;var _=e.use_dynamic,d=e.error;return C.mark(function e(){var r,n,o,s,i,c,f,a,u,l;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:r=p;n=r;o=r.inherit("do");s=h.car;i=h.cdr.car;c=h.cdr.cdr;if(c!==V){c=new $(Y("begin"),c)}f={env:r,dynamic_env:n,use_dynamic:_,error:d};a=s;case 9:if(!(a!==V)){t.next=20;break}u=a.car;t.t0=o;t.t1=u.car;t.next=15;return k(u.cdr.car,f);case 15:t.t2=t.sent;t.t0.set.call(t.t0,t.t1,t.t2);a=a.cdr;t.next=9;break;case 20:f={env:o,dynamic_env:n,error:d};l=C.mark(function e(){var r,n,i,a,u;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!(c!==V)){t.next=3;break}t.next=3;return Rc.evaluate(c,f);case 3:r=s;n={};case 5:if(!(r!==V)){t.next=15;break}i=r.car;if(!(i.cdr.cdr!==V)){t.next=12;break}t.next=10;return k(i.cdr.cdr.car,f);case 10:a=t.sent;n[i.car.valueOf()]=a;case 12:r=r.cdr;t.next=5;break;case 15:u=Object.getOwnPropertySymbols(n);Object.keys(n).concat(u).forEach(function(e){o.set(e,n[e])});case 17:case"end":return t.stop()}},e)});case 22:t.next=24;return k(i.car,f);case 24:t.t3=t.sent;if(!(t.t3===false)){t.next=29;break}return t.delegateYield(l(),"t4",27);case 27:t.next=22;break;case 29:if(!(i.cdr!==V)){t.next=33;break}t.next=32;return k(i.cdr.car,f);case 32:return t.abrupt("return",t.sent);case 33:case"end":return t.stop()}},e)})()});return function(e,t){return r.apply(this,arguments)}}()),"(do ((<var> <init> <next>)) (test return) . body)\n\n         Iteration macro that evaluates the expression body in scope of the variables.\n         On each loop it changes the variables according to the <next> expression and runs\n         test to check if the loop should continue. If test is a single value, the macro\n         will return undefined. If the test is a pair of expressions the macro will\n         evaluate and return the second expression after the loop exits."),if:l(new J("if",function(r,e){var t=e.error,n=e.use_dynamic;var i=this;var a=this;var u={env:a,dynamic_env:i,use_dynamic:n,error:t};var o=function e(t){if(t===false){return k(r.cdr.cdr.car,u)}else{return k(r.cdr.car,u)}};if(r===V){throw new Error("too few expressions for `if`")}var s=k(r.car,u);return w(s,o)}),"(if cond true-expr false-expr)\n\n         Macro that evaluates cond expression and if the value is true, it\n         evaluates and returns true-expression, if not it evaluates and returns\n         false-expression."),"let-env":new J("let-env",function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=e.dynamic_env,n=e.use_dynamic,i=e.error;F("let-env",t,"pair");var a=k(t.car,{env:this,dynamic_env:r,error:i,use_dynamic:n});return w(a,function(e){F("let-env",e,"environment");return k($(Y("begin"),t.cdr),{env:e,dynamic_env:r,error:i})})},"(let-env env . body)\n\n        Special macro that evaluates body in context of given environment\n        object."),letrec:l(Eo(Symbol["for"]("letrec")),"(letrec ((a value-a) (b value-b) ...) . body)\n\n         Macro that creates a new environment, then evaluates and assigns values to\n         names and then evaluates the body in context of that environment.\n         Values are evaluated sequentially and the next value can access the\n         previous values/names."),"letrec*":l(Eo(Symbol["for"]("letrec")),"(letrec* ((a value-a) (b value-b) ...) . body)\n\n         Same as letrec but the order of execution of the binding is guaranteed,\n         so you can use recursive code as well as referencing the previous binding.\n\n         In LIPS both letrec and letrec* behave the same."),"let*":l(Eo(Symbol["for"]("let*")),"(let* ((a value-a) (b value-b) ...) . body)\n\n         Macro similar to `let`, but the subsequent bindings after the first\n         are evaluated in the environment including the previous let variables,\n         so you can define one variable, and use it in the next's definition."),let:l(Eo(Symbol["for"]("let")),"(let ((a value-a) (b value-b) ...) . body)\n\n         Macro that creates a new environment, then evaluates and assigns values to names,\n         and then evaluates the body in context of that environment.  Values are evaluated\n         sequentially but you can't access previous values/names when the next are\n         evaluated. You can only get them in the body of the let expression.  (If you want\n         to define multiple variables and use them in each other's definitions, use\n         `let*`.)"),"begin*":l(Ao("begin*",function(e){return e.pop()}),"(begin* . body)\n\n         This macro is a parallel version of begin. It evaluates each expression\n         in the body and if it's a promise it will await it in parallel and return\n         the value of the last expression (i.e. it uses Promise.all())."),shuffle:l("shuffle",function(e){F("shuffle",e,["pair","nil","array"]);var t=K.get("random");if(e===V){return V}if(Array.isArray(e)){return Xa(e.slice(),t)}var r=K.get("list->array")(e);r=Xa(r,t);return K.get("array->list")(r)},"(shuffle obj)\n\n        Order items in vector or list in random order."),begin:l(new J("begin",function(e,t){var n=q(q({},t),{},{env:this});var i=K.get("list->array")(e);var a;return function t(){if(i.length){var e=i.shift();var r=k(e,n);return w(r,function(e){a=e;return t()})}else{return a}}()}),"(begin . args)\n\n         Macro that runs a list of expressions in order and returns the value\n         of the last one. It can be used in places where you can only have a\n         single expression, like (if)."),ignore:new J("ignore",function(e,t){var r=q(q({},t),{},{env:this,dynamic_env:this});k(new $(new Y("begin"),e),r)},"(ignore . body)\n\n        Macro that will evaluate the expression and swallow any promises that may\n        be created. It will discard any value that may be returned by the last body\n        expression. The code should have side effects and/or when it's promise\n        it should resolve to undefined."),"call/cc":l(J.defmacro("call/cc",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=q({env:this},t);return w(k(e.car,r),function(e){if(d(e)){return e(new Xs(null))}})}),"(call/cc proc)\n\n         Call-with-current-continuation.\n\n         NOT SUPPORTED BY LIPS RIGHT NOW"),parameterize:l(new J("parameterize",function(t,e){var i=e.dynamic_env;var a=i.inherit("parameterize").new_frame(null,{});var u=q(q({},e),{},{env:this});var o=t.car;if(!Tu(o)){var r=H(o);throw new Error("Invalid syntax for parameterize expecting pair got ".concat(r))}function s(){var e=new $(new Y("begin"),t.cdr);return k(e,q(q({},u),{},{dynamic_env:a}))}return function r(){var e=o.car;var n=e.car.valueOf();return w(k(e.cdr.car,u),function(e){var t=i.get(n,{throwError:false});if(!Ru(t)){throw new Error("Unknown parameter ".concat(n))}a.set(n,t.inherit(e));if(!Iu(o.cdr)){o=o.cdr;return r()}else{return s()}})}()}),"(parameterize ((name value) ...)\n\n         Macro that change the dynamic variable created by make-parameter."),"make-parameter":l(new J("make-parameter",function(e,t){t.dynamic_env;var r=k(e.car,t);var n;if(e.cdr.car instanceof $){n=k(e.cdr.car,t)}return new Gs(r,n)}),"(make-parameter init converter)\n\n    Function creates new dynamic variable that can be custimized with parameterize\n    macro. The value should be assigned to a variable e.g.:\n\n    (define radix (make-parameter 10))\n\n    The result value is a procedure that return the value of dynamic variable."),"define-syntax-parameter":l(new J("define-syntax-parameter",function(e,t){var r=e.car;var n=this;if(!(r instanceof Y)){throw new Error("define-syntax-parameter: invalid syntax expecting symbol got ".concat(H(r)))}var i=k(e.cdr.car,q({env:n},t));F("define-syntax-parameter",i,"syntax",2);i.__name__=r.valueOf();if(i.__name__ instanceof D){i.__name__=i.__name__.valueOf()}var a;if(e.cdr.cdr instanceof $&&D.isString(e.cdr.cdr.car)){a=e.cdr.cdr.car.valueOf()}n.set(e.car,new Ou(i),a,true)}),"(define-syntax-parameter name syntax [__doc__])\n\n         Binds <keyword> to the transformer obtained by evaluating <transformer spec>.\n         The transformer provides the default expansion for the syntax parameter,\n         and in the absence of syntax-parameterize, is functionally equivalent to\n         define-syntax."),"syntax-parameterize":l(new J("syntax-parameterize",function(e,t){var r=K.get("list->array")(e.car);var n=this.inherit("syntax-parameterize");while(r.length){var i=r.shift();if(!(Tu(i)||i.car instanceof Y)){var a="invalid syntax for syntax-parameterize: ".concat(ru(e,true));throw new Error("syntax-parameterize: ".concat(a))}var u=k(i.cdr.car,q(q({},t),{},{env:this}));var o=i.car;F("syntax-parameterize",u,["syntax"]);F("syntax-parameterize",o,"symbol");u.__name__=o.valueOf();if(u.__name__ instanceof D){u.__name__=u.__name__.valueOf()}var s=new Ou(u);if(o.is_gensym()){var c=o.literal();var f=this.get(c,{throwError:false});if(f instanceof Ou){n.set(c,s)}}n.set(o,s)}var l=new $(new Y("begin"),e.cdr);return k(l,q(q({},t),{},{env:n}))}),"(syntax-parameterize (bindings) body)\n\n         Macro work similar to let-syntax but the the bindnds will be exposed to the user.\n         With syntax-parameterize you can define anaphoric macros."),define:l(J.defmacro("define",function(r,e){var n=this;if(r.car instanceof $&&r.car.car instanceof Y){var t=new $(new Y("define"),new $(r.car.car,new $(new $(new Y("lambda"),new $(r.car.cdr,r.cdr)))));return t}else if(e.macro_expand){return}e.dynamic_env=this;e.env=n;var i=r.cdr.car;var a;if(i instanceof $){i=k(i,e);a=true}else if(i instanceof Y){i=n.get(i)}F("define",r.car,"symbol");return w(i,function(e){if(n.__name__===Cu.__merge_env__){n=n.__parent__}if(a&&(d(e)&&go(e)||e instanceof Cu||Ru(e))){e.__name__=r.car.valueOf();if(e.__name__ instanceof D){e.__name__=e.__name__.valueOf()}}var t;if(r.cdr.cdr instanceof $&&D.isString(r.cdr.cdr.car)){t=r.cdr.cdr.car.valueOf()}n.set(r.car,e,t,true)})}),'(define name expression)\n         (define name expression "doc string")\n         (define (function-name . args) . body)\n\n         Macro for defining values. It can be used to define variables,\n         or functions. If the first argument is list it will create a function\n         with name being first element of the list. This form expands to\n         `(define function-name (lambda args body))`'),"set-obj!":l("set-obj!",function(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var i=p(e);if(Iu(e)||i!=="object"&&i!=="function"){var a=Rs("set-obj!",H(e),["object","function"]);throw new Error(a)}F("set-obj!",t,["string","symbol","number"]);e=Zu(e);t=t.valueOf();if(arguments.length===2){delete e[t]}else if(yu(e)&&d(r)){e[t]=Zu(r);e[t][ho]=true}else if(d(r)||Ju(r)||r===V){e[t]=r}else{e[t]=r&&!yu(r)?r.valueOf():r}if(iu){var u=e[t];Object.defineProperty(e,t,q(q({},n),{},{value:u}))}},"(set-obj! obj key value)\n        (set-obj! obj key value props)\n\n        Function set a property of a JavaScript object. props should be a vector of pairs,\n        passed to Object.defineProperty."),"null-environment":l("null-environment",function(){return K.inherit("null")},"(null-environment)\n\n        Returns a clean environment with only the standard library."),values:l("values",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return vs(r)},"(values a1 a2 ...)\n\n        If called with more then one element it will create a special\n        Values object that can be used in the call-with-values function."),"call-with-values":l("call-with-values",function(e,t){F("call-with-values",e,"function",1);F("call-with-values",t,"function",2);var r=e.apply(this);if(r instanceof vs){return t.apply(this,r.valueOf())}return t.call(this,r)},"(call-with-values producer consumer)\n\n        Calls the producer procedure with no arguments, then calls the\n        consumer procedure with the returned value as an argument -- unless\n        the returned value is a special Values object created by (values), if it is\n        the values are unpacked and the consumer is called with multiple arguments."),"current-environment":l("current-environment",function(){if(this.__name__==="__frame__"){return this.__parent__}return this},"(current-environment)\n\n        Function that returns the current environment (they're first-class objects!)"),"parent.frame":l("parent.frame",function(){return xs},"(parent.frame)\n\n        Returns the parent environment if called from inside a function.\n        If no parent frame can be found it returns nil."),eval:l("eval",function(e,t){var n=this;t=t||this.get("current-environment").call(this);return k(e,{env:t,dynamic_env:t,error:function e(t){var e=K.get("display-error");e.call(n,t.message);if(t.code){var r=t.code.map(function(e,t){return"[".concat(t+1,"]: ").concat(e)}).join("\n");e.call(n,r)}}})},"(eval expr)\n        (eval expr environment)\n\n        Function that evaluates LIPS Scheme code. If the second argument is provided\n        it will be the environment that the code is evaluated in."),lambda:new J("lambda",function(v){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},y=e.use_dynamic,m=e.error;var g=this;var b;if(v.cdr instanceof $&&D.isString(v.cdr.car)&&v.cdr.cdr!==V){b=v.cdr.car.valueOf()}function w(){var e=Nu(this)?this:{dynamic_env:g},r=e.dynamic_env;var n=g.inherit("lambda");r=r.inherit("lambda");if(this&&!Nu(this)){if(this&&!this.__instance__){Object.defineProperty(this,"__instance__",{enumerable:false,get:function e(){return true},set:function e(){},configurable:false})}n.set("this",this)}for(var t=arguments.length,i=new Array(t),a=0;a<t;a++){i[a]=arguments[a]}if(this instanceof Qs){var u={throwError:false};n.set("arguments",this.env.get("arguments",u));n.set("parent.frame",this.env.get("parent.frame",u))}else{var o=i.slice();o.callee=w;o.env=n;n.set("arguments",o)}function s(e,t){n.__env__[e.__name__]=t;r.__env__[e.__name__]=t}var c=v.car;var f=0;if(c instanceof Y||c!==V){while(true){if(c.car!==V){if(c instanceof Y){var l=ys($.fromArray(i.slice(f),false));s(c,l);break}else if(Tu(c)){var h=i[f];s(c.car,h)}}if(c.cdr===V){break}f++;c=c.cdr}}var p=b?v.cdr.cdr:v.cdr;var _=new $(new Y("begin"),p);var d={env:n,dynamic_env:r,use_dynamic:y,error:m};return k(_,d)}var t=v.car instanceof $?v.car.length():null;w.__code__=new $(new Y("lambda"),v);w[po]=true;if(!(v.car instanceof $)){return l(w,b,true)}return l(mo(w,t),b,true)},"(lambda (a b) body)\n        (lambda args body)\n        (lambda (a b . rest) body)\n\n        The lambda macro creates a new anonymous function. If the first element of\n        the body is a string and there is more elements the string is used as the\n        documentation string, that can be read using (help fn)."),macroexpand:new J("macroexpand",ku()),"macroexpand-1":new J("macroexpand-1",ku(true)),"define-macro":l(new J(xu,function(o,e){var s=e.use_dynamic,c=e.error;if(o.car instanceof $&&o.car.car instanceof Y){var t=o.car.car.__name__;var f;if(D.isString(o.cdr.car)&&o.cdr.cdr instanceof $){f=o.cdr.car.valueOf()}var r=J.defmacro(t,function(e){var t=new x({},this,"defmacro");var r=o.car.cdr;var n=e;while(true){if(r===V){break}if(r instanceof Y){t.__env__[r.__name__]=n;break}else if(r.car!==V){if(n===V){t.__env__[r.car.__name__]=V}else{if(n.car instanceof $){n.car[oo]=true}t.__env__[r.car.__name__]=n.car}}if(r.cdr===V){break}if(n!==V){n=n.cdr}r=r.cdr}var i={env:t,dynamic_env:t,use_dynamic:s,error:c};if(o.cdr instanceof $){var a=f?o.cdr.cdr:o.cdr;var u=a.reduce(function(e,t){return k(t,i)});return w(u,function(e){if(p(e)==="object"){delete e[oo]}return e})}},f,true);r.__code__=new $(new Y("define-macro"),o);this.set(t,r)}}),"(define-macro (name . args) body)\n\n         The meta-macro, that creates new macros. If the return value is a list structure\n         it will be evaluated where the macro is invoked from. You can use quasiquote `\n         and unquote , and unquote-splicing ,@ inside to create an expression that will be\n         evaluated at runtime. Macros works like this: if you pass any expression to a\n         macro the arguments will not be evaluated unless the macro's body explicitly\n         calls (eval) on it. Because of this a macro can manipulate the expression\n         (arguments) as lists."),"syntax-rules":new J("syntax-rules",function(m,e){var g=e.use_dynamic,b=e.error;var w=this;function D(e){var t=[];while(e!==V){var r=e.car;t.push(r.valueOf());e=e.cdr}return t}function t(e){while(e!==V){var t=e.car;if(!(t instanceof Y)){throw new Error("syntax-rules: wrong identifier")}e=e.cdr}}if(m.car instanceof Y){t(m.cdr.car)}else{t(m.car)}var r=new Cu(function(e,t){var r=t.macro_expand;z(">> SYNTAX");z(e);z(m);var n=w.inherit("syntax");var i=n;var a=this;if(a.__name__===Cu.__merge_env__){var u=Object.getOwnPropertySymbols(a.__env__);u.forEach(function(e){a.__parent__.set(e,a.__env__[e])});a=a.__parent__}var o={env:n,dynamic_env:i,use_dynamic:g,error:b};var s,c,f;if(m.car instanceof Y){s=m.car;f=D(m.cdr.car);c=m.cdr.cdr}else{s="...";f=D(m.car);c=m.cdr}try{while(c!==V){var l=c.car.car;var h=c.car.cdr.car;z("[[[ RULE");z(l);var p=Su(l,e,f,s,{expansion:this,define:w});if(p){if(ci()){console.log(JSON.stringify(fu(p),true,2));console.log("PATTERN: "+l.toString(true));console.log("MACRO: "+e.toString(true))}var _=[];var d=ju({bindings:p,expr:h,symbols:f,scope:n,lex_scope:a,names:_,ellipsis:s});z("OUPUT>>> ",d);if(d){h=d}var v=a.merge(n,Cu.__merge_env__);if(r){return{expr:h,scope:v}}var y=k(h,q(q({},o),{},{env:v}));return Bu(y,_)}c=c.cdr}}catch(e){e.message+="\nin macro:\n  ".concat(m.toString(true));throw e}throw new Error("syntax-rules: no matching syntax in macro ".concat(e.toString(true)))},w);r.__code__=m;return r},"(syntax-rules () (pattern expression) ...)\n\n        Base of hygienic macros, it will return a new syntax expander\n        that works like Lisp macros."),quote:l(new J("quote",function(e){return ys(e.car)}),"(quote expression) or 'expression\n\n         Macro that returns a single LIPS expression as data (it won't evaluate the\n         argument). It will return a list if put in front of LIPS code.\n         And if put in front of a symbol it will return the symbol itself, not the value\n         bound to that name."),"unquote-splicing":l("unquote-splicing",function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},"(unquote-splicing code) or ,@code\n\n        Special form used in the quasiquote macro. It evaluates the expression inside and\n        splices the list into quasiquote's result. If it is not the last element of the\n        expression, the computed value must be a pair."),unquote:l("unquote",function(){throw new Error("You can't call `unquote` outside of quasiquote")},"(unquote code) or ,code\n\n        Special form used in the quasiquote macro. It evaluates the expression inside and\n        substitutes the value into quasiquote's result."),quasiquote:J.defmacro("quasiquote",function(e,t){var o=t.use_dynamic,s=t.error;var c=this;var f=c;function a(e){return e instanceof $||nu(e)||Array.isArray(e)}function l(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:a;if(e instanceof $){var n=e.car;var i=e.cdr;if(r(n)){n=t(n)}if(r(i)){i=t(i)}if(qu(n)||qu(i)){return fa([n,i]).then(function(e){var t=b(e,2),r=t[0],n=t[1];return new $(r,n)})}else{return new $(n,i)}}return e}function u(e,t){if(e instanceof $){if(t!==V){e.append(t)}}else{e=new $(e,t)}return e}function r(e){return!!e.filter(function(e){return e instanceof $&&Y.is(e.car,/^(unquote|unquote-splicing)$/)}).length}function h(e,n,i){return e.reduce(function(e,t){if(!(t instanceof $)){e.push(t);return e}if(Y.is(t.car,"unquote-splicing")){var r;if(n+1<i){r=v(t.cdr,n+1,i)}else{r=k(t.cdr.car,{env:c,use_dynamic:o,dynamic_env:f,error:s})}if(!(r instanceof $)){throw new Error("Expecting list ".concat(H(t)," found"))}return e.concat(r.to_array())}e.push(v(t,n,i));return e},[])}function p(n,i,a){var u={};i++;Object.keys(n).forEach(function(e){var t=n[e];if(t instanceof $){if(Y.is(t.car,"unquote-splicing")){throw new Error("You can't call `unquote-splicing` "+"inside object")}var r;if(i<a){r=v(t.cdr.car,i,a)}else{r=k(t.cdr.car,{env:c,dynamic_env:f,use_dynamic:o,error:s})}u[e]=r}else{u[e]=t}});if(Object.isFrozen(n)){Object.freeze(u)}return u}function _(i,e,t){if(e<t){return new $(new $(i.car.car,v(i.car.cdr,e,t)),V)}var n=[];return function e(t){var r=k(t.car,{env:c,dynamic_env:f,use_dynamic:o,error:s});n.push(r);if(t.cdr instanceof $){return e(t.cdr)}return w(n,function(r){if(r.some(function(e){return!(e instanceof $)})){if(i.cdr instanceof $&&Y.is(i.cdr.car,".")&&i.cdr.cdr instanceof $&&i.cdr.cdr.cdr===V){return i.cdr.cdr.car}if(!(i.cdr===V||i.cdr instanceof $)){var e="You can't splice atom inside list";throw new Error(e)}if(r.length>1){var t="You can't splice multiple atoms inside list";throw new Error(t)}if(!(i.cdr instanceof $&&r[0]===V)){return r[0]}}r=r.map(function(e){if(d.has(e)){return e.clone()}else{d.add(e);return e}});var n=v(i.cdr,0,1);if(n===V&&r[0]===V){return undefined}return w(n,function(e){if(r[0]===V){return e}if(r.length===1){return u(r[0],e)}var t=r.reduce(function(e,t){return u(e,t)});return u(t,e)})})}(i.car.cdr)}var d=new Set;function v(e,t,r){if(e instanceof $){if(e.car instanceof $){if(Y.is(e.car.car,"unquote-splicing")){return _(e,t+1,r)}if(Y.is(e.car.car,"unquote")){if(t+2===r&&e.car.cdr instanceof $&&e.car.cdr.car instanceof $&&Y.is(e.car.cdr.car.car,"unquote-splicing")){var n=e.car.cdr;return new $(new $(new Y("unquote"),_(n,t+2,r)),V)}else if(e.car.cdr instanceof $&&e.car.cdr.cdr!==V){if(e.car.cdr.car instanceof $){var i=[];return function t(r){if(r===V){return $.fromArray(i)}return w(k(r.car,{env:c,dynamic_env:f,use_dynamic:o,error:s}),function(e){i.push(e);return t(r.cdr)})}(e.car.cdr)}else{return e.car.cdr}}}}if(Y.is(e.car,"quasiquote")){var a=v(e.cdr,t,r+1);return new $(e.car,a)}if(Y.is(e.car,"quote")){return new $(e.car,v(e.cdr,t,r))}if(Y.is(e.car,"unquote")){t++;if(t<r){return new $(new Y("unquote"),v(e.cdr,t,r))}if(t>r){throw new Error("You can't call `unquote` outside "+"of quasiquote")}if(e.cdr instanceof $){if(e.cdr.cdr!==V){if(e.cdr.car instanceof $){var u=[];return function t(r){if(r===V){return $.fromArray(u)}return w(k(r.car,{env:c,dynamic_env:f,use_dynamic:o,error:s}),function(e){u.push(e);return t(r.cdr)})}(e.cdr)}else{return e.cdr}}else{return k(e.cdr.car,{env:c,dynamic_env:f,error:s})}}else{return e.cdr}}return l(e,function(e){return v(e,t,r)})}else if(nu(e)){return p(e,t,r)}else if(e instanceof Array){return h(e,t,r)}return e}function n(e){if(e instanceof $){delete e[oo];if(!e.haveCycles("car")){n(e.car)}if(!e.haveCycles("cdr")){n(e.cdr)}}}if(nu(e.car)&&!r(Object.values(e.car))){return ys(e.car)}if(Array.isArray(e.car)&&!r(e.car)){return ys(e.car)}if(e.car instanceof $&&!e.car.find("unquote")&&!e.car.find("unquote-splicing")&&!e.car.find("quasiquote")){return ys(e.car)}var i=v(e.car,0,1);return w(i,function(e){n(e);return ys(e)})},"(quasiquote list)\n\n        Similar macro to `quote` but inside it you can use special expressions (unquote\n        x) abbreviated to ,x that will evaluate x and insert its value verbatim or\n        (unquote-splicing x) abbreviated to ,@x that will evaluate x and splice the value\n        into the result. Best used with macros but it can be used outside."),clone:l("clone",function e(t){F("clone",t,"pair");return t.clone()},"(clone list)\n\n        Function that returns a clone of the list, that does not share any pairs with the\n        original, so the clone can be safely mutated without affecting the original."),append:l("append",function e(){var t;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}n=n.map(function(e){if(e instanceof $){return e.clone()}return e});return(t=K.get("append!")).call.apply(t,[this].concat(U(n)))},"(append item ...)\n\n        Function that creates a new list with each argument appended end-to-end.\n        It will always return a new list and not modify its arguments."),"append!":l("append!",function(){var r=K.get("list?");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return t.reduce(function(e,t){F("append!",e,["nil","pair"]);if((t instanceof $||t===V)&&!r(t)){throw new Error("append!: Invalid argument, value is not a list")}if(Iu(t)){return e}if(e===V){if(t===V){return V}return t}return e.append(t)},V)},"(append! arg1 ...)\n\n        Destructive version of append, it can modify the lists in place. It returns\n        a new list where each argument is appended to the end. It may modify\n        lists added as arguments."),reverse:l("reverse",function e(t){F("reverse",t,["array","pair","nil"]);if(t===V){return V}if(t instanceof $){var r=K.get("list->array")(t).reverse();return K.get("array->list")(r)}else if(Array.isArray(t)){return t.reverse()}else{throw new Error(Rs("reverse",H(t),"array or pair"))}},"(reverse list)\n\n        Function that reverses the list or array. If value is not a list\n        or array it will error."),nth:l("nth",function e(t,r){F("nth",t,"number");F("nth",r,["array","pair"]);if(r instanceof $){var n=r;var i=0;while(i<t){if(!n.cdr||n.cdr===V||n.haveCycles("cdr")){return V}n=n.cdr;i++}return n.car}else if(r instanceof Array){return r[t]}else{throw new Error(Rs("nth",H(r),"array or pair",2))}},"(nth index obj)\n\n        Function that returns the nth element of the list or array.\n        If used with a non-indexable value it will error."),list:l("list",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return r.reverse().reduce(function(e,t){return new $(t,e)},V)},"(list . args)\n\n        Function that creates a new list out of its arguments."),substring:l("substring",function e(t,r,n){F("substring",t,"string");F("substring",r,"number");F("substring",n,["number","undefined"]);return t.substring(r.valueOf(),n&&n.valueOf())},"(substring string start end)\n\n        Function that returns the slice of the string starting at start and ending\n        with end."),concat:l("concat",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}r.forEach(function(e,t){return F("concat",e,"string",t+1)});return r.join("")},"(concat . strings)\n\n        Function that creates a new string by joining its arguments."),join:l("join",function e(t,r){F("join",t,"string");F("join",r,["pair","nil"]);return K.get("list->array")(r).join(t)},"(join separator list)\n\n        Function that returns a string by joining elements of the list using separator."),split:l("split",function e(t,r){F("split",t,["regex","string"]);F("split",r,"string");return K.get("array->list")(r.split(t))},"(split separator string)\n\n        Function that creates a list by splitting string by separator which can\n        be a string or regular expression."),replace:l("replace",function e(t,r,n){F("replace",t,["regex","string"]);F("replace",r,["string","function"]);F("replace",n,"string");return n.replace(t,r)},"(replace pattern replacement string)\n\n        Function that changes pattern to replacement inside string. Pattern can be a\n        string or regex and replacement can be function or string. See Javascript\n        String.replace()."),match:l("match",function e(t,r){F("match",t,["regex","string"]);F("match",r,"string");var n=r.match(t);return n?K.get("array->list")(n):false},"(match pattern string)\n\n        Function that returns a match object from JavaScript as a list or #f if\n        no match."),search:l("search",function e(t,r){F("search",t,["regex","string"]);F("search",r,"string");return r.search(t)},"(search pattern string)\n\n        Function that returns the first found index of the pattern inside a string."),repr:l("repr",function e(t,r){return vu(t,r)},"(repr obj)\n\n        Function that returns a LIPS code representation of the object as a string."),"escape-regex":l("escape-regex",function(e){F("escape-regex",e,"string");return Gi(e.valueOf())},"(escape-regex string)\n\n        Function that returns a new string where all special operators used in regex,\n        are escaped with backslashes so they can be used in the RegExp constructor\n        to match a literal string."),env:l("env",function e(e){e=e||this.env;var t=Object.keys(e.__env__).map(Y);var r;if(t.length){r=$.fromArray(t)}else{r=V}if(e.__parent__ instanceof x){return K.get("env").call(this,e.__parent__).append(r)}return r},"(env)\n        (env obj)\n\n        Function that returns a list of names (functions, macros and variables)\n        that are bound in the current environment or one of its parents."),new:l("new",function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++){r[n-1]=arguments[n]}var i=L(Zu(e),U(r.map(function(e){return Gu(e)})));return i},"(new obj . args)\n\n        Function that creates new JavaScript instance of an object."),typecheck:l(F,"(typecheck label value type [position])\n\n         Checks the type of value and errors if the type is not one allowed.  Type can be\n         string or list of strings. The position optional argument is used to create a\n         proper error message for the nth argument of function calls."),"typecheck-number":l(Ts,"(typecheck-number label value type [position])\n\n         Function similar to typecheck but checks if the argument is a number\n         and specific type of number e.g. complex."),"unset-special!":l("unset-special!",function(e){F("remove-special!",e,"string");delete pa.remove(e.valueOf())},"(unset-special! name)\n\n        Function that removes a special symbol from parser added by `set-special!`,\n        name must be a string."),"set-special!":l("set-special!",function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:pa.LITERAL;F("set-special!",e,"string",1);F("set-special!",t,"symbol",2);pa.append(e.valueOf(),t,r)},'(set-special! symbol name [type])\n\n        Add a special symbol to the list of transforming operators by the parser.\n        e.g.: `(add-special! "#" \'x)` will allow to use `#(1 2 3)` and it will be\n        transformed into (x (1 2 3)) so you can write x macro that will process\n        the list. 3rd argument is optional, and it can be one of two values:\n        lips.specials.LITERAL, which is the default behavior, or\n        lips.specials.SPLICE which causes the value to be unpacked into the expression.\n        This can be used for e.g. to make `#(1 2 3)` into (x 1 2 3) that is needed\n        by # that defines vectors.'),get:gs,".":gs,unbind:l(Zu,"(unbind fn)\n\n         Function that removes the weak 'this' binding from a function so you\n         can get properties from the actual function object."),type:l(H,"(type object)\n\n         Function that returns the type of an object as string."),debugger:l("debugger",function(){debugger},'(debugger)\n\n        Function that triggers the JavaScript debugger (e.g. the browser devtools)\n        using the "debugger;" statement. If a debugger is not running this\n        function does nothing.'),in:l("in",function(e,t){if(e instanceof Y||e instanceof D||e instanceof j){e=e.valueOf()}return e in Gu(t)},'(in key value)\n\n        Function that uses the Javascript "in" operator to check if key is\n        a valid property in the value.'),"instance?":l("instance?",function(e){return Vu(e)},"(instance? obj)\n\n        Checks if object is an instance, created with a new operator"),instanceof:l("instanceof",function(e,t){return t instanceof Zu(e)},"(instanceof type obj)\n\n        Predicate that tests if the obj is an instance of type."),"prototype?":l("prototype?",yu,"(prototype? obj)\n\n         Predicate that tests if value is a valid JavaScript prototype,\n         i.e. calling (new) with it will not throw '<x> is not a constructor'."),"macro?":l("macro?",function(e){return e instanceof J},"(macro? expression)\n\n        Predicate that tests if value is a macro."),"continuation?":l("continuation?",Pu,"(continuation? expression)\n\n         Predicate that tests if value is a callable continuation."),"function?":l("function?",d,"(function? expression)\n\n         Predicate that tests if value is a callable function."),"real?":l("real?",function(e){if(H(e)!=="number"){return false}if(e instanceof j){return e.isFloat()}return j.isFloat(e)},"(real? number)\n\n        Predicate that tests if value is a real number (not complex)."),"number?":l("number?",function(e){return Number.isNaN(e)||j.isNumber(e)},"(number? expression)\n\n        Predicate that tests if value is a number or NaN value."),"string?":l("string?",function(e){return D.isString(e)},"(string? expression)\n\n        Predicate that tests if value is a string."),"pair?":l("pair?",function(e){return e instanceof $},"(pair? expression)\n\n        Predicate that tests if value is a pair or list structure."),"regex?":l("regex?",function(e){return e instanceof RegExp},"(regex? expression)\n\n        Predicate that tests if value is a regular expression."),"null?":l("null?",function(e){return Iu(e)},"(null? expression)\n\n        Predicate that tests if value is null-ish (i.e. undefined, nil, or\n        Javascript null)."),"boolean?":l("boolean?",function(e){return typeof e==="boolean"},"(boolean? expression)\n\n        Predicate that tests if value is a boolean (#t or #f)."),"symbol?":l("symbol?",function(e){return e instanceof Y},"(symbol? expression)\n\n        Predicate that tests if value is a LIPS symbol."),"array?":l("array?",function(e){return e instanceof Array},"(array? expression)\n\n        Predicate that tests if value is an array."),"object?":l("object?",function(e){return e!==V&&e!==null&&!(e instanceof h)&&!(e instanceof RegExp)&&!(e instanceof D)&&!(e instanceof $)&&!(e instanceof j)&&p(e)==="object"&&!(e instanceof Array)},"(object? expression)\n\n        Predicate that tests if value is an plain object (not another LIPS type)."),flatten:l("flatten",function e(t){F("flatten",t,"pair");return t.flatten()},"(flatten list)\n\n        Returns a shallow list from tree structure (pairs)."),"array->list":l("array->list",function(e){F("array->list",e,"array");return $.fromArray(e)},"(array->list array)\n\n        Function that converts a JavaScript array to a LIPS cons list."),"tree->array":l("tree->array",tu("tree->array",true),"(tree->array list)\n\n         Function that converts a LIPS cons tree structure into a JavaScript array."),"list->array":l("list->array",tu("list->array"),"(list->array list)\n\n         Function that converts a LIPS list into a JavaScript array."),apply:l("apply",function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}F("apply",t,"function",1);var a=n.pop();F("apply",a,["pair","nil"],n.length+2);n=n.concat(K.get("list->array").call(this,a));return t.apply(this,Js(t,n))},"(apply fn list)\n\n        Function that calls fn with the list of arguments."),length:l("length",function e(t){if(!t||t===V){return 0}if(t instanceof $){return t.length()}if("length"in t){return t.length}},'(length expression)\n\n        Function that returns the length of the object. The object can be a LIPS\n        list or any object that has a "length" property. Returns undefined if the\n        length could not be found.'),"string->number":l("string->number",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;F("string->number",e,"string",1);F("string->number",t,"number",2);e=e.valueOf();t=t.valueOf();if(e.match(Bi)||e.match(Ci)){return Ri(e,t)}else if(e.match(ji)||e.match(ki)){return Mi(e,t)}else{var r=t===10&&!e.match(/e/i)||t===16;if(e.match(Si)&&r||e.match(Oi)){return Ti(e,t)}if(e.match(yi)){return Yi(e)}}return false},"(string->number number [radix])\n\n        Function that parses a string into a number."),try:l(new J("try",function(r,e){var l=this;var h=e.use_dynamic;e.error;return new Promise(function(t,o){var s,n;if(Y.is(r.cdr.car.car,"catch")){s=r.cdr.car;if(r.cdr.cdr instanceof $&&Y.is(r.cdr.cdr.car.car,"finally")){n=r.cdr.cdr.car}}else if(Y.is(r.cdr.car.car,"finally")){n=r.cdr.car}if(!(n||s)){throw new Error("try: invalid syntax")}function c(e){t(e);throw new _s("[CATCH]")}var f=function e(t,r){r(t)};if(n){f=function e(t,r){f=o;i.error=function(e){throw e};w(k(new $(new Y("begin"),n.cdr),i),function(){r(t)})}}var i={env:l,use_dynamic:h,dynamic_env:l,error:function e(t){if(t instanceof _s){throw t}var r=l.inherit("try");if(s){var n=s.cdr.car.car;if(!(n instanceof Y)){throw new Error("try: invalid syntax: catch require variable name")}r.set(n,t);var i;var a={env:r,use_dynamic:h,dynamic_env:l,error:function e(t){i=true;o(t);throw new _s("[CATCH]")}};var u=k(new $(new Y("begin"),s.cdr.cdr),a);w(u,function e(t){if(!i){f(t,c)}})}else{f(undefined,function(){throw t})}}};var e=k(r.car,i);w(e,function(e){f(e,t)},i.error)})}),"(try expr (catch (e) code))\n         (try expr (catch (e) code) (finally code))\n         (try expr (finally code))\n\n         Macro that executes expr and catches any exceptions thrown. If catch is provided\n         it's executed when an error is thrown. If finally is provided it's always\n         executed at the end."),raise:l("raise",function(e){throw e},"(raise obj)\n\n        Throws the object verbatim (no wrapping an a new Error)."),throw:l("throw",function(e){throw new Error(e)},"(throw string)\n\n        Throws a new exception."),find:l("find",function t(r,n){F("find",r,["regex","function"]);F("find",n,["pair","nil"]);if(Iu(n)){return V}var e=Oa("find",r);return w(e(n.car),function(e){if(e&&e!==V){return n.car}return t(r,n.cdr)})},"(find fn list)\n        (find regex list)\n\n        Higher-order function that finds the first value for which fn return true.\n        If called with a regex it will create a matcher function."),"for-each":l("for-each",function(e){var t;F("for-each",e,"function");for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}n.forEach(function(e,t){F("for-each",e,["pair","nil"],t+1)});var a=(t=K.get("map")).call.apply(t,[this,e].concat(n));if(qu(a)){return a.then(function(){})}},"(for-each fn . lists)\n\n        Higher-order function that calls function `fn` on each\n        value of the argument. If you provide more than one list\n        it will take each value from each list and call `fn` function\n        with that many arguments as number of list arguments."),map:l("map",function e(r){var n=this;for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++){i[a-1]=arguments[a]}F("map",r,"function");var u=K.get("list?");i.forEach(function(e,t){F("map",e,["pair","nil"],t+1);if(e instanceof $&&!u.call(n,e)){throw new Error("map: argument ".concat(t+1," is not a list"))}});if(i.length===0){return V}if(i.some(function(e){return e===V})){return V}var o=i.map(function(e){return e.car});var s=this.env,c=this.dynamic_env,f=this.use_dynamic;var l=Ks(r,o,{env:s,dynamic_env:c,use_dynamic:f});return w(l,function(t){return w(e.call.apply(e,[n,r].concat(U(i.map(function(e){return e.cdr})))),function(e){return new $(t,e)})})},"(map fn . lists)\n\n        Higher-order function that calls function `fn` with each\n        value of the list. If you provide more then one list as argument\n        it will take each value from each list and call `fn` function\n        with that many argument as number of list arguments. The return\n        values of the fn calls are accumulated in a result list and\n        returned by map."),"list?":l("list?",function(e){var t=e;while(true){if(t===V){return true}if(!(t instanceof $)){return false}if(t.haveCycles("cdr")){return false}t=t.cdr}},'(list? obj)\n\n        Predicate that tests if value is a proper linked list structure.\n        The car of each pair can be any value. It returns false on cyclic lists."'),some:l("some",function t(r,n){F("some",r,"function");F("some",n,["pair","nil"]);if(Iu(n)){return false}else{return w(r(n.car),function(e){return e||t(r,n.cdr)})}},"(some fn list)\n\n        Higher-order function that calls fn on each element of the list.\n        It stops and returns true when fn returns true for a value.\n        If none of the values give true, some will return false.\n        Analogous to Python any(map(fn, list))."),fold:l("fold",Co("fold",function(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),a=3;a<n;a++){i[a-3]=arguments[a]}F("fold",t,"function");i.forEach(function(e,t){F("fold",e,["pair","nil"],t+1)});if(i.some(function(e){return e===V})){return r}var u=e.call.apply(e,[this,t,r].concat(U(i.map(function(e){return e.cdr}))));return w(u,function(e){return t.apply(void 0,U(i.map(function(e){return e.car})).concat([e]))})}),"(fold fn init . lists)\n\n         Function fold is left-to-right reversal of reduce. It call `fn`\n         on each pair of elements of the list and returns a single value.\n         e.g. it computes (fn 'a 'x (fn 'b 'y (fn 'c 'z 'foo)))\n         for: (fold fn 'foo '(a b c) '(x y z))"),pluck:l("pluck",function e(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++){a[r]=arguments[r]}return function(t){a=a.map(function(e){return e instanceof Y?e.__name__:e});if(a.length===0){return V}else if(a.length===1){var e=a,r=b(e,1),n=r[0];return t[n]}var i={};a.forEach(function(e){i[e]=t[e]});return i}},"(pluck . strings)\n\n        If called with a single string it will return a function that when\n        called with an object will return that key from the object.\n        If called with more then one string the returned function will\n        create a new object by copying all properties from the given object."),reduce:l("reduce",Co("reduce",function(t,r,e){var n=this;for(var i=arguments.length,a=new Array(i>3?i-3:0),u=3;u<i;u++){a[u-3]=arguments[u]}F("reduce",r,"function");a.forEach(function(e,t){F("reduce",e,["pair","nil"],t+1)});if(a.some(function(e){return e===V})){return e}return w(r.apply(void 0,U(a.map(function(e){return e.car})).concat([e])),function(e){return t.call.apply(t,[n,r,e].concat(U(a.map(function(e){return e.cdr}))))})}),"(reduce fn init list . lists)\n\n         Higher-order function that takes each element of the list and calls\n         the fn with result of previous call or init and the next element\n         of the list until each element is processed, and returns a single value\n         as result of last call to `fn` function.\n         e.g. it computes (fn 'c 'z (fn 'b 'y (fn 'a 'x 'foo)))\n         for: (reduce fn 'foo '(a b c) '(x y z))"),filter:l("filter",function e(t,r){F("filter",t,["regex","function"]);F("filter",r,["pair","nil"]);var i=K.get("list->array")(r);var a=[];var u=Oa("filter",t);return function t(r){function e(e){if(e&&e!==V){a.push(n)}return t(++r)}if(r===i.length){return $.fromArray(a)}var n=i[r];return w(u(n),e)}(0)},"(filter fn list)\n        (filter regex list)\n\n        Higher-order function that calls `fn` for each element of the list\n        and return a new list for only those elements for which fn returns\n        a truthy value. If called with a regex it will create a matcher function."),compose:l(ko,"(compose . fns)\n\n         Higher-order function that creates a new function that applies all functions\n         from right to left and returns the last value. Reverse of pipe.\n         e.g.:\n         ((compose (curry + 2) (curry * 3)) 10) --\x3e (+ 2 (* 3 10)) --\x3e 32"),pipe:l(Fo,"(pipe . fns)\n\n         Higher-order function that creates a new function that applies all functions\n         from left to right and returns the last value. Reverse of compose.\n         e.g.:\n         ((pipe (curry + 2) (curry * 3)) 10) --\x3e (* 3 (+ 2 10)) --\x3e 36"),curry:l(Io,"(curry fn . args)\n\n         Higher-order function that creates a curried version of the function.\n         The result function will have partially applied arguments and it\n         will keep returning one-argument functions until all arguments are provided,\n         then it calls the original function with the accumulated arguments.\n\n         e.g.:\n         (define (add a b c d) (+ a b c d))\n         (define add1 (curry add 1))\n         (define add12 (add 2))\n         (display (add12 3 4))"),gcd:l("gcd",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}Ms("lcm",r,"number");return r.reduce(function(e,t){return e.gcd(t)})},"(gcd n1 n2 ...)\n\n        Function that returns the greatest common divisor of the arguments."),lcm:l("lcm",function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}Ms("lcm",r,"number");var i=r.length,a=gu(r[0]);for(var u=1;u<i;u++){var o=gu(r[u]),s=a;while(a&&o){a>o?a%=o:o%=a}a=gu(s*r[u])/(a+o)}return j(a)},"(lcm n1 n2 ...)\n\n        Function that returns the least common multiple of the arguments."),"odd?":l("odd?",So(function(e){return j(e).isOdd()}),"(odd? number)\n\n         Checks if number is odd."),"even?":l("even?",So(function(e){return j(e).isEven()}),"(even? number)\n\n         Checks if number is even."),"*":l("*",jo(function(e,t){return j(e).mul(t)},j(1)),"(* . numbers)\n\n        Multiplies all numbers passed as arguments. If single value is passed\n        it will return that value."),"+":l("+",jo(function(e,t){return j(e).add(t)},j(0)),"(+ . numbers)\n\n        Sums all numbers passed as arguments. If single value is passed it will\n        return that value."),"-":l("-",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length===0){throw new Error("-: procedure require at least one argument")}Ms("-",t,"number");if(t.length===1){return j(t[0]).sub()}if(t.length){return t.reduce(Bo(function(e,t){return j(e).sub(t)}))}},"(- n1 n2 ...)\n        (- n)\n\n        Subtracts n2 and subsequent numbers from n1. If only one argument is passed\n        it will negate the value."),"/":l("/",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length===0){throw new Error("/: procedure require at least one argument")}Ms("/",t,"number");if(t.length===1){return j(1).div(t[0])}return t.reduce(Bo(function(e,t){return j(e).div(t)}))},"(/ n1 n2 ...)\n        (/ n)\n\n        Divides n1 by n2 and subsequent arguments one by one. If single argument\n        is passed it will calculate (/ 1 n)."),abs:l("abs",So(function(e){return j(e).abs()}),"(abs number)\n\n         Function that returns the absolute value (magnitude) of number."),truncate:l("truncate",function(e){F("truncate",e,"number");if(j.isFloat(e)){if(e instanceof j){e=e.valueOf()}return g(Au(e))}return e},"(truncate n)\n\n        Function that returns the integer part (floor) of a real number."),sqrt:l("sqrt",So(function(e){return j(e).sqrt()}),"(sqrt number)\n\n         Function that returns the square root of the number."),"**":l("**",Bo(function(e,t){e=j(e);t=j(t);if(t.cmp(0)===-1&&j.isInteger(t)){return E({num:1,denom:e.pow(t.sub())})}var r=e.coerce(t);var n=b(r,2);e=n[0];t=n[1];return e.pow(t)}),"(** a b)\n\n         Function that calculates number a to to the power of b."),"1+":l("1+",So(function(e){return j(e).add(1)}),"(1+ number)\n\n         Function that adds 1 to the number and return result."),"1-":l(So(function(e){return j(e).sub(1)}),"(1- number)\n\n         Function that subtracts 1 from the number and return result."),"%":l("%",function(e,t){Ms("%",[e,t],"number");return j(e).rem(t)},"(% n1 n2)\n\n        Function returns the remainder of n1/n2 (modulo)."),"==":l("==",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Ms("==",t,"number");return bu(function(e,t){return j(e).cmp(t)===0},t)},"(== x1 x2 ...)\n\n        Function that compares its numerical arguments and checks if they are\n        all equal."),">":l(">",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Ls(">",t,["bigint","float","rational"]);return bu(function(e,t){return j(e).cmp(t)===1},t)},"(> x1 x2 x3 ...)\n\n        Function that compares its numerical arguments and checks if they are\n        monotonically decreasing, i.e. x1 > x2 and x2 > x3 and so on."),"<":l("<",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Ls("<",t,["bigint","float","rational"]);return bu(function(e,t){return j(e).cmp(t)===-1},t)},"(< x1 x2 ...)\n\n        Function that compares its numerical arguments and checks if they are\n        monotonically increasing, i.e. x1 < x2 and x2 < x3 and so on."),"<=":l("<=",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Ls("<=",t,["bigint","float","rational"]);return bu(function(e,t){return[0,-1].includes(j(e).cmp(t))},t)},"(<= x1 x2 ...)\n\n        Function that compares its numerical arguments and checks if they are\n        monotonically nondecreasing, i.e. x1 <= x2 and x2 <= x3 and so on."),">=":l(">=",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}Ls(">=",t,["bigint","float","rational"]);return bu(function(e,t){return[0,1].includes(j(e).cmp(t))},t)},"(>= x1 x2 ...)\n\n        Function that compares its numerical arguments and checks if they are\n        monotonically nonincreasing, i.e. x1 >= x2 and x2 >= x3 and so on."),"eq?":l("eq?",wu,"(eq? a b)\n\n         Function that compares two values if they are identical."),or:l(new J("or",function(e,t){var i=t.use_dynamic,a=t.error;var u=K.get("list->array")(e);var o=this;var s=o;if(!u.length){return false}var c;return function t(){function e(e){c=e;if(c!==false){return c}else{return t()}}if(!u.length){if(c!==false){return c}else{return false}}else{var r=u.shift();var n=k(r,{env:o,dynamic_env:s,use_dynamic:i,error:a});return w(n,e)}}()}),"(or . expressions)\n\n         Macro that executes the values one by one and returns the first that is\n         a truthy value. If there are no expressions that evaluate to true it\n         returns false."),and:l(new J("and",function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=t.use_dynamic,n=t.error;var i=K.get("list->array")(e);var a=this;var u=a;if(!i.length){return true}var o;var s={env:a,dynamic_env:u,use_dynamic:r,error:n};return function t(){function e(e){o=e;if(o===false){return false}else{return t()}}if(!i.length){if(o!==false){return o}else{return false}}else{var r=i.shift();return w(k(r,s),e)}}()}),"(and . expressions)\n\n         Macro that evaluates each expression in sequence and if any value returns false\n         it will stop and return false. If each value returns true it will return the\n         last value. If it's called without arguments it will return true."),"|":l("|",function(e,t){return j(e).or(t)},"(| a b)\n\n        Function that calculates the bitwise or operation."),"&":l("&",function(e,t){return j(e).and(t)},"(& a b)\n\n        Function that calculates the bitwise and operation."),"~":l("~",function(e){return j(e).neg()},"(~ number)\n\n        Function that calculates the bitwise inverse (flip all the bits)."),">>":l(">>",function(e,t){return j(e).shr(t)},"(>> a b)\n\n        Function that right shifts the value a by value b bits."),"<<":l("<<",function(e,t){return j(e).shl(t)},"(<< a b)\n\n        Function that left shifts the value a by value b bits."),not:l("not",function e(t){if(Iu(t)){return true}return!t},"(not object)\n\n        Function that returns the Boolean negation of its argument.")},undefined,"global");var xs=K.inherit("user-env");function Fs(e,t){e.constant("**internal-env**",t);e.doc("**internal-env**","**internal-env**\n\n         Constant used to hide stdin, stdout and stderr so they don't interfere\n         with variables with the same name. Constants are an internal type\n         of variable that can't be redefined, defining a variable with the same name\n         will throw an error.");K.set("**interaction-environment**",e)}Fs(xs,Ds);K.doc("**interaction-environment**","**interaction-environment**\n\n    Internal dynamic, global variable used to find interpreter environment.\n    It's used so the read and write functions can locate **internal-env**\n    that contains the references to stdin, stdout and stderr.");function ks(e){xs.get("**internal-env**").set("fs",e)}(function(){var e={ceil:"ceiling"};["floor","round","ceil"].forEach(function(t){var r=e[t]?e[t]:t;K.set(r,l(r,function(e){F(r,e,"number");if(e instanceof j){return e[t]()}},"(".concat(r," number)\n\n            Function that calculates the ").concat(r," of a number.")))})})();function Cs(e){if(e.length===1){return e[0]}else{var t=[];var r=Cs(e.slice(1));for(var n=0;n<r.length;n++){for(var i=0;i<e[0].length;i++){t.push(e[0][i]+r[n])}}return t}}function Os(e,t,r){var n=[];for(var i=t;i<=r;++i){var a=[];for(var u=0;u<i;++u){a.push(e)}n=n.concat(Cs(a))}return n}Os(["d","a"],2,5).forEach(function(e){var t=e.split("");var r=t.slice().reverse();var n=t.map(function(e){return"(c".concat(e,"r")}).join(" ")+" arg"+")".repeat(t.length);var i="c"+e+"r";K.set(i,l(i,function(e){return r.reduce(function(e,t){F(i,e,"pair");if(t==="a"){return e.car}else{return e.cdr}},e)},"(".concat(i," arg)\n\n        Function that calculates ").concat(n)))});function Ss(e,t){var r=e.split(ai.sep).filter(Boolean);for(var n=r.length;n--;){var i;var a=(i=ai).join.apply(i,["/"].concat(U(r.slice(0,n+1))));if(t(a)){return a}}}function Bs(e){return Ss(e,function(e){return ii.existsSync(ai.join(e,"node_modules"))})}function js(){return typeof global!=="undefined"&&global.global===global}var Is=function e(){};function Ps(){return Ns.apply(this,arguments)}function Ns(){Ns=ie(C.mark(function e(){var r,n,i,a,u;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return import("mod"+"ule");case 2:r=t.sent;n=r.createRequire;ui=n(typeof document==="undefined"&&typeof location==="undefined"?require("u"+"rl").pathToFileURL(u).href:typeof document==="undefined"?location.href:o&&o.src||new URL("lips.js",document.baseURI).href);t.next=7;return Promise.resolve().then(function(){return Lc});case 7:ii=t.sent;t.next=10;return Promise.resolve().then(function(){return tf});case 10:ai=t.sent;K.set("global",global);K.set("self",global);K.set("window",undefined);i=new URL(typeof document==="undefined"&&typeof location==="undefined"?require("u"+"rl").pathToFileURL(u).href:typeof document==="undefined"?location.href:o&&o.src||new URL("lips.js",document.baseURI).href);a=ai.dirname(i.pathname);u=ai.basename(i.pathname);K.set("__dirname",a);K.set("__filename",u);K.set("require.resolve",l("require.resolve",function(e){F("require.resolve",e,"string");var t=e.valueOf();return ui.resolve(t)},"(require.resolve path)\n\n        Returns the path relative to the current module.\n\n        Only available when LIPS is running under Node.js."));K.set("require",l("require",function(t){F("require",t,"string");t=t.valueOf();var e=process.cwd();var r;try{if(t.match(/^\s*\./)){r=ui(ai.join(e,t))}else{var n=Bs(e);if(n){r=ui(ai.join(n,"node_modules",t))}else{r=ui(t)}}}catch(e){r=ui(t)}return Qu(r,global)},"(require module)\n\n        Function used inside Node.js to import a module."));process.on("unhandledRejection",function(e,t){if(e instanceof _s){t["catch"](Is)}});case 22:case"end":return t.stop()}},e)}));return Ns.apply(this,arguments)}if(js()){Ps()}else if(typeof window!=="undefined"&&window===ti){K.set("window",window);K.set("global",undefined);K.set("self",window)}else if(typeof self!=="undefined"&&typeof WorkerGlobalScope!=="undefined"){K.set("self",self);K.set("window",undefined);K.set("global",undefined)}function Rs(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var i=e?" in expression `".concat(e,"`"):"";if(n!==null){i+=" (argument ".concat(n,")")}if(d(r)){return"Invalid type: got ".concat(t).concat(i)}if(r instanceof Array){if(r.length===1){var a=r[0].toLowerCase();r="a"+("aeiou".includes(a)?"n ":" ")+r[0]}else{r=new Intl.ListFormat("en",{style:"long",type:"disjunction"}).format(r)}}return"Expecting ".concat(r," got ").concat(t).concat(i)}function Ts(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;F(e,t,"number",n);var i=t.__type__;var a;if(r instanceof $){r=r.to_array()}if(r instanceof Array){r=r.map(function(e){return e.valueOf()})}if(r instanceof Array){r=r.map(function(e){return e.valueOf().toLowerCase()});if(r.includes(i)){a=true}}else{r=r.valueOf().toLowerCase()}if(!a&&i!==r){throw new Error(Rs(e,i,r,n))}}function Ls(r,e,n){e.forEach(function(e,t){Ts(r,e,n,t+1)})}function Ms(r,e,n){e.forEach(function(e,t){F(r,e,n,t+1)})}function Us(e,t,r){F(e,t,r);if(t.__type__===ss){throw new Error(Rs(e,"binary-port","textual-port"))}}function F(e,t,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;e=e.valueOf();var i=H(t).toLowerCase();if(d(r)){if(!r(t)){throw new Error(Rs(e,i,r,n))}return}var a=false;if(r instanceof $){r=r.to_array()}if(r instanceof Array){r=r.map(function(e){return e.valueOf()})}if(r instanceof Array){r=r.map(function(e){return e.valueOf().toLowerCase()});if(r.includes(i)){a=true}}else{r=r.valueOf().toLowerCase()}if(!a&&i!==r){throw new Error(Rs(e,i,r,n))}}function qs(r){var n=new WeakMap;return function(e){var t=n.get(e);if(!t){t=r(e)}return t}}H=qs(H);function H(e){var t=ni.get(e);if(t){return t}if(p(e)==="object"){for(var r=0,n=Object.entries(ri);r<n.length;r++){var i=b(n[r],2),a=i[0],u=i[1];if(e instanceof u){return a}}if(Vu(e)){if(d(e.typeOf)){return e.typeOf()}return"instance"}if(e.constructor){if(e.constructor.__class__){return e.constructor.__class__}if(e.constructor===Object){if(Yu(e,Symbol.iterator)){return"iterator"}if(Yu(e,Symbol.asyncIterator)){return"async-iterator"}}if(e.constructor.name===""){return"object"}return e.constructor.name.toLowerCase()}}return p(e)}function zs(e){var t=[];r(e);if(t.length){return a(e)}return e;function r(e){if(qu(e)){t.push(e)}else if(e instanceof $){if(!e.haveCycles("car")){r(e.car)}if(!e.haveCycles("cdr")){r(e.cdr)}}else if(e instanceof Array){e.forEach(r)}}function n(e){return i.apply(this,arguments)}function i(){i=ie(C.mark(function e(r){var n;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.t0=$;if(!r.haveCycles("car")){t.next=5;break}t.t1=r.car;t.next=8;break;case 5:t.next=7;return a(r.car);case 7:t.t1=t.sent;case 8:t.t2=t.t1;if(!r.haveCycles("cdr")){t.next=13;break}t.t3=r.cdr;t.next=16;break;case 13:t.next=15;return a(r.cdr);case 15:t.t3=t.sent;case 16:t.t4=t.t3;n=new t.t0(t.t2,t.t4);if(r[oo]){n[oo]=true}return t.abrupt("return",n);case 20:case"end":return t.stop()}},e)}));return i.apply(this,arguments)}function a(e){if(e instanceof Array){return fa(e.map(a))}if(e instanceof $&&t.length){return n(e)}return e}}function Ys(e,t){var r=t.use_dynamic,n=he(t,Yn);var i=[];var a=e;mu(a);function u(){return i}return function t(){if(a instanceof $){var e=k(a.car,q({use_dynamic:r},n));if(r){e=w(e,function(e){if(Do(e)){return e.bind(dynamic_env)}return e})}return w(zs(e),function(e){i.push(e);if(a.haveCycles("cdr")){return u()}a=a.cdr;return t()})}else if(a===V){return u()}else{throw new Error("Syntax Error: improper list found in apply")}}()}function Vs(e,t,r){var n=e.invoke(t,r);return w(zs(n),function(e){if(e instanceof $){e.markCycles()}return ys(e)})}function $s(e,t,r){function n(e){if(e instanceof $){e.markCycles();return e}return ys(e)}var i=e.invoke(t,r);return w(zs(i),function e(t){if(!t||t&&t[oo]||$u(t)){return t}else{return w(k(t,r),n)}},function(e){throw e})}function Js(e,t){if(to(e)&&!eo(e)&&(!ro(e)||io(e))){t=t.map(Gu)}if(!wo(e)&&t.some(ou)&&!ou(e)&&!uu(e)){var r=[],n=t.length;var i=function e(){var i=t[n];if(ou(i)){a=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return w(i.apply(this,r),Gu)};yo(a,"__bound__",true);yo(a,"__fn__",i);a.prototype=i.prototype;r[n]=a}else{r[n]=i}},a;while(n--){i()}t=r}return t}function Ks(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},n=r.env,i=r.dynamic_env,a=r.use_dynamic;var u=n===null||n===void 0?void 0:n.new_frame(e,t);var o=i===null||i===void 0?void 0:i.new_frame(e,t);var s=new Qs({env:u,use_dynamic:a,dynamic_env:o});return zs(e.apply(s,t))}function Hs(n,e){var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},i=t.env,a=t.dynamic_env,u=t.use_dynamic,r=t.error,o=r===void 0?function(){}:r;e=Ys(e,{env:i,dynamic_env:a,error:o,use_dynamic:u});return w(e,function(e){if(wo(n)){n=Zu(n)}e=Js(n,e);var t=e.slice();var r=Ks(n,t,{env:i,dynamic_env:a,use_dynamic:u});return w(r,function(e){if(e instanceof $){e.markCycles();return ys(e)}return Hu(e)},o)})}var Ws=new WeakMap;var Gs=function(){function n(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;ae(this,n);fe(this,"__value__",void 0);fe(this,"__fn__",void 0);$n(this,Ws,{writable:true,value:void 0});this.__value__=e;if(t){if(!d(t)){throw new Error("Section argument to Parameter need to be function "+"".concat(H(t)," given"))}this.__fn__=t}if(r){I(this,Ws,r)}}ce(n,[{key:"__name__",get:function e(){return t(this,Ws)},set:function e(t){I(this,Ws,t);if(this.__fn__){this.__fn__.__name__="fn-".concat(t)}}},{key:"invoke",value:function e(){if(d(this.__fn__)){return this.__fn__(this.__value__)}return this.__value__}},{key:"inherit",value:function e(t){return new n(t,this.__fn__,this.__name__)}}]);return n}();var Qs=function(){function t(e){ae(this,t);fe(this,"env",void 0);fe(this,"dynamic_env",void 0);fe(this,"use_dynamic",void 0);Object.assign(this,e)}ce(t,[{key:"__name__",get:function e(){return this.env.__name__}},{key:"__parent__",get:function e(){return this.env.__parent__}},{key:"get",value:function e(){var t;return(t=this.env).get.apply(t,arguments)}}]);return t}();function Zs(e,t){var r=e.get(t.__name__,{throwError:false});if(Ru(r)&&r!==t){return r}var n=xs.get("**interaction-environment**");while(true){var i=e.get("parent.frame",{throwError:false});e=i(0);if(e===n){break}r=e.get(t.__name__,{throwError:false});if(Ru(r)&&r!==t){return r}}return t}var Xs=function(){function t(e){ae(this,t);fe(this,"__value__",void 0);this.__value__=e}ce(t,[{key:"invoke",value:function e(){if(this.__value__===null){throw new Error("Continuations are not implemented yet")}}}]);return t}();function k(o){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},s=e.env,c=e.dynamic_env,f=e.use_dynamic,t=e.error,l=t===void 0?Is:t,r=he(e,Vn);return function(e){try{if(!Lu(c)){c=s===true?xs:s||xs}if(f){s=c}else if(s===true){s=xs}else{s=s||K}var t={env:s,dynamic_env:c,use_dynamic:f,error:l};var r;if(Iu(o)){return o}if(o instanceof Y){return s.get(o)}if(!(o instanceof $)){return o}var n=o.car;var e=o.cdr;if(n instanceof $){r=zs(k(n,t));if(qu(r)){return r.then(function(e){if(!Mu(e)){throw new Error(H(e)+" "+s.get("repr")(e)+" is not callable while evaluating "+o.toString())}return k(new $(e,o.cdr),t)})}else if(!Mu(r)){throw new Error(H(r)+" "+s.get("repr")(r)+" is not callable while evaluating "+o.toString())}}if(n instanceof Y){r=s.get(n)}else if(d(n)){r=n}var i;if(r instanceof Cu){i=Vs(r,o,t)}else if(r instanceof J){i=$s(r,e,t)}else if(d(r)){i=Hs(r,e,t)}else if(r instanceof Ou){i=Vs(r._syntax,o,t)}else if(Ru(r)){var a=Zs(c,r);if(Iu(o.cdr)){i=a.invoke()}else{return w(k(o.cdr.car,t),function(e){a.__value__=e})}}else if(Pu(r)){i=r.invoke()}else if(o instanceof $){r=n&&n.toString();throw new Error("".concat(H(n)," ").concat(r," is not a function"))}else{return o}var u=s.get(Symbol["for"]("__promise__"),{throwError:false});if(u===true&&qu(i)){i=i.then(function(e){if(e instanceof $&&!r[oo]){return k(e,t)}return e});return new ca(i)}return i}catch(e){l&&l.call(s,e,o)}}(r)}var ec=rc(function(e){return e});var tc=rc(function(e,t){return t});function rc(d){return function(){var t=ie(function(l){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},h=e.env,p=e.dynamic_env,_=e.use_dynamic;return C.mark(function e(){var r,n,i,a,u,o,s,c,f;return C.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:if(!Lu(p)){p=h===true?xs:h||xs}if(h===true){h=xs}else{h=h||xs}r=[];n=Array.isArray(l)?l:Ea(l);i=false;a=false;t.prev=6;o=Xn(n);case 8:t.next=10;return o.next();case 10:if(!(i=!(s=t.sent).done)){t.next=24;break}c=s.value;f=k(c,{env:h,dynamic_env:p,use_dynamic:_,error:function e(t,r){if(t&&t.message){if(t.message.match(/^Error:/)){var n=/^(Error:)\s*([^:]+:\s*)/;t.message=t.message.replace(n,"$1 $2")}if(r){if(!(t.__code__ instanceof Array)){t.__code__=[]}t.__code__.push(r.toString(true))}}if(!(t instanceof _s)){throw t}}});t.t0=r;t.t1=d;t.t2=c;t.next=18;return f;case 18:t.t3=t.sent;t.t4=(0,t.t1)(t.t2,t.t3);t.t0.push.call(t.t0,t.t4);case 21:i=false;t.next=8;break;case 24:t.next=30;break;case 26:t.prev=26;t.t5=t["catch"](6);a=true;u=t.t5;case 30:t.prev=30;t.prev=31;if(!(i&&o["return"]!=null)){t.next=35;break}t.next=35;return o["return"]();case 35:t.prev=35;if(!a){t.next=38;break}throw u;case 38:return t.finish(35);case 39:return t.finish(30);case 40:return t.abrupt("return",r);case 41:case"end":return t.stop()}},e,null,[[6,26,30,40],[31,,35,39]])})()});function e(e){return t.apply(this,arguments)}return e}()}function nc(e){var t={"[":"]","(":")"};var r;if(typeof e==="string"){r=na(e)}else{r=e.map(function(e){return e&&e.token?e.token:e})}var n=Object.keys(t);var i=Object.values(t).concat(n);r=r.filter(function(e){return i.includes(e)});var a=new Qi;var u=Wn(r),o;try{for(u.s();!(o=u.n()).done;){var s=o.value;if(n.includes(s)){a.push(s)}else if(!a.is_empty()){var c=a.top();var f=t[c];if(s===f){a.pop()}else{throw new Error("Syntax error: missing closing ".concat(f))}}else{throw new Error("Syntax error: not matched closing ".concat(s))}}}catch(e){u.e(e)}finally{u.f()}return a.is_empty()}function ic(e){var t="("+e.toString()+")()";var r=window.URL||window.webkitURL;var n;try{n=new Blob([t],{type:"application/javascript"})}catch(e){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;n=new i;n.append(t);n=n.getBlob()}return new ti.Worker(r.createObjectURL(n))}function ac(){return Rc.version.match(/^(\{\{VER\}\}|DEV)$/)}function uc(){if(js()){return}var e;if(document.currentScript){e=document.currentScript}else{var t=document.querySelectorAll("script");if(!t.length){return}e=t[t.length-1]}var r=e.getAttribute("src");return r}var oc=uc();function sc(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var t="dist/std.xcb";if(e===""){if(oc){e=oc.replace(/[^/]*$/,"std.xcb")}else if(ac()){e="https://cdn.jsdelivr.net/gh/jcubic/lips@devel/".concat(t)}else{e="https://cdn.jsdelivr.net/npm/@jcubic/lips@".concat(Rc.version,"/").concat(t)}}var r=K.get("load");return r.call(xs,e,K)}function cc(e){this.url=e;var u=this.worker=ic(function(){var u;var o;self.addEventListener("message",function(e){var r=e.data;var t=r.id;if(r.type!=="RPC"||t===null){return}function n(e){self.postMessage({id:t,type:"RPC",result:e})}function i(e){self.postMessage({id:t,type:"RPC",error:e})}if(r.method==="eval"){if(!o){i("Worker RPC: LIPS not initialized, call init first");return}o.then(function(){var e=r.params[0];var t=r.params[1];u.exec(e,{use_dynamic:t}).then(function(e){e=e.map(function(e){return e&&e.valueOf()});n(e)})["catch"](function(e){i(e)})})}else if(r.method==="init"){var a=r.params[0];if(typeof a!=="string"){i("Worker RPC: url is not a string")}else{importScripts("".concat(a,"/dist/lips.min.js"));u=new Rc.Interpreter("worker");o=sc(a);o.then(function(){n(true)})}}})});this.rpc=function(){var n=0;return function e(t,r){var a=++n;return new Promise(function(n,i){u.addEventListener("message",function e(t){var r=t.data;if(r&&r.type==="RPC"&&r.id===a){if(r.error){i(r.error)}else{n(r.result)}u.removeEventListener("message",e)}});u.postMessage({type:"RPC",method:t,id:a,params:r})})}}();this.rpc("init",[e])["catch"](function(e){console.error(e)});this.exec=function(e,t){var r=t.use_dynamic,n=r===void 0?false:r;return this.rpc("eval",[e,n])}}var fc={pair:function e(t){var r=b(t,2),n=r[0],i=r[1];return $(n,i)},number:function e(t){if(D.isString(t)){return j([t,10])}return j(t)},regex:function e(t){var r=b(t,2),n=r[0],i=r[1];return new RegExp(n,i)},nil:function e(){return V},symbol:function e(t){if(D.isString(t)){return Y(t)}else if(Array.isArray(t)){return Y(Symbol["for"](t[0]))}},string:D,character:h};var lc=Object.keys(fc);var hc={};for(var pc=0,_c=Object.entries(lc);pc<_c.length;pc++){var dc=b(_c[pc],2),vc=dc[0],yc=dc[1];hc[yc]=+vc}function mc(e){return hc[e]}function gc(e){return lc[e]}function bc(e){return JSON.stringify(e,function(e,t){var r=this[e];if(r){if(r instanceof RegExp){return{"@":mc("regex"),"#":[r.source,r.flags]}}var n=mc(r.constructor.__class__);if(!zu(n)){return{"@":n,"#":r.serialize()}}}return t})}function wc(e){return JSON.parse(e,function(e,t){if(t&&p(t)==="object"){if(!zu(t["@"])){var r=gc(t["@"]);if(fc[r]){return fc[r](t["#"])}}}return t})}var Dc=function(){var e={pair:$,symbol:Y,number:j,string:D,character:h,nil:V.constructor,regex:RegExp};function t(e,t){return{deserialize:t,Class:e}}var r=new tn;var a={};for(var n=0,i=Object.entries(fc);n<i.length;n++){var u=b(i[n],2),o=u[0],s=u[1];var c=e[o];a[o]=t(c,s)}var f=43311;Object.keys(a).forEach(function(e){var t=a[e];if(typeof t==="function"){var r=t;_n({Class:r,tag:f,encode:function e(t,r){r(t.serialize())},decode:function e(t){return new r(t)}})}else{var n=t.deserialize,i=t.Class;_n({Class:i,tag:f,encode:function e(t,r){if(t instanceof RegExp){return r([t.source,t.flags])}r(t.serialize())},decode:function e(t){return n(t)}})}f++});return r}();function Ec(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}if(t.length>1){var n=t.reduce(function(e,t){return e+t.length},0);var i=new Uint8Array(n);var a=0;t.forEach(function(e){i.set(e,a);a+=e.length});return i}else if(t.length){return t[0]}}function Ac(){var e=1;var t=new TextEncoder("utf-8");return t.encode("LIPS".concat(e.toString().padStart(3," ")))}var xc=7;function Fc(e){var t=new TextDecoder("utf-8");var r=t.decode(e.slice(0,xc));var n=r.substring(0,4);if(n==="LIPS"){var i=r.match(/^(....).*([0-9]+)$/);if(i){return{type:i[1],version:Number(i[2])}}}return{type:"unknown"}}function kc(e){var t=Ac();var r=Dc.encode(e);return Ec(t,Rn(r,{magic:false}))}function Cc(e){var t=Fc(e),r=t.type,n=t.version;if(r==="LIPS"&&n===1){var i=Tn(e.slice(xc),{magic:false});return Dc.decode(i)}else{throw new Error("Invalid file format ".concat(r))}}function Oc(e){console.error(e.message||e);if(Array.isArray(e.code)){console.error(e.code.map(function(e,t){return"[".concat(t+1,"]: ").concat(e)}))}}function Sc(){var u=["text/x-lips","text/x-scheme"];var o;function s(r){return new Promise(function(t){var e=r.getAttribute("src");if(e){return fetch(e).then(function(e){return e.text()}).then(tc).then(t)["catch"](function(e){Oc(e);t()})}else{return tc(r.innerHTML).then(t)["catch"](function(e){Oc(e);t()})}})}function e(){return new Promise(function(i){var a=Array.from(document.querySelectorAll("script"));return function e(){var t=a.shift();if(!t){i()}else{var r=t.getAttribute("type");if(u.includes(r)){var n=t.getAttribute("bootstrap");if(!o&&typeof n==="string"){return sc(n).then(function(){return s(t)}).then(e)}else{return s(t).then(e)}}else if(r&&r.match(/lips|lisp/)){console.warn("Expecting "+u.join(" or ")+" found "+r)}return e()}}()})}if(!window.document){return Promise.resolve()}else if(Bc){var t=Bc;var r=t.getAttribute("bootstrap");if(typeof r==="string"){return sc(r).then(function(){o=true;return e()})}}return e()}var Bc=typeof window!=="undefined"&&window.document&&document.currentScript;if(typeof window!=="undefined"){si(window,Sc)}var jc=function(){var e=D("Fri, 09 Feb 2024 15:49:46 +0000").valueOf();var t=e==="{{"+"DATE}}"?new Date:new Date(e);var r=function e(t){return t.toString().padStart(2,"0")};var n=t.getFullYear();var i=[n,r(t.getMonth()+1),r(t.getDate())].join("-");var a="\n  __ __                          __\n / / \\ \\       _    _  ___  ___  \\ \\\n| |   \\ \\     | |  | || . \\/ __>  | |\n| |    > \\    | |_ | ||  _/\\__ \\  | |\n| |   / ^ \\   |___||_||_|  <___/  | |\n \\_\\ /_/ \\_\\                     /_/\n\nLIPS Interpreter DEV (".concat(i,") <https://lips.js.org>\nCopyright (c) 2018-").concat(n," Jakub T. Jankiewicz\n\nType (env) to see environment with functions macros and variables. You can also\nuse (help name) to display help for specific function or macro, (apropos name)\nto display list of matched names in environment and (dir object) to list\nproperties of an object.\n").replace(/^.*\n/,"");return a}();f(Na,"__class__","ahead");f($,"__class__","pair");f(eu,"__class__","nil");f(Ra,"__class__","pattern");f(Pa,"__class__","formatter");f(J,"__class__","macro");f(Cu,"__class__","syntax");f(Cu.Parameter,"__class__","syntax-parameter");f(x,"__class__","environment");f(Qo,"__class__","input-port");f(Zo,"__class__","output-port");f(Xo,"__class__","output-port");f(es,"__class__","output-string-port");f(rs,"__class__","input-string-port");f(as,"__class__","input-file-port");f(ts,"__class__","output-file-port");f(ps,"__class__","lips-error");[j,m,E,g,A].forEach(function(e){f(e,"__class__","number")});f(h,"__class__","character");f(Y,"__class__","symbol");f(D,"__class__","string");f(ca,"__class__","promise");f(Gs,"__class__","parameter");var Ic="DEV";var Pc="Fri, 09 Feb 2024 15:49:46 +0000";var Nc=ko(ka,Ea);var Rc={version:Ic,banner:jc,date:Pc,exec:tc,parse:Nc,tokenize:na,evaluate:k,compile:ec,serialize:bc,unserialize:wc,serialize_bin:kc,unserialize_bin:Cc,bootstrap:sc,Environment:x,env:xs,Worker:cc,Interpreter:hs,balanced_parenthesis:nc,balancedParenthesis:nc,balanced:nc,Macro:J,Syntax:Cu,Pair:$,Values:vs,QuotedPromise:ca,Error:ps,quote:ys,InputPort:Qo,OutputPort:Zo,BufferedOutputPort:Xo,InputFilePort:as,OutputFilePort:ts,InputStringPort:rs,OutputStringPort:es,InputByteVectorPort:ns,OutputByteVectorPort:is,InputBinaryFilePort:us,OutputBinaryFilePort:os,set_fs:ks,Formatter:Pa,Parser:wa,Lexer:s,specials:pa,repr:ru,nil:V,eof:fs,LSymbol:Y,LNumber:j,LFloat:g,LComplex:m,LRational:E,LBigInteger:A,LCharacter:h,LString:D,Parameter:Gs,rationalize:Wo};K.set("lips",Rc);var Tc={};var Lc=Object.freeze({__proto__:null,default:Tc});function Mc(e,t){var r=0;for(var n=e.length-1;n>=0;n--){var i=e[n];if(i==="."){e.splice(n,1)}else if(i===".."){e.splice(n,1);r++}else if(r){e.splice(n,1);r--}}if(t){for(;r--;r){e.unshift("..")}}return e}var Uc=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var qc=function(e){return Uc.exec(e).slice(1)};function zc(){var e="",t=false;for(var r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:"/";if(typeof n!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!n){continue}e=n+"/"+e;t=n.charAt(0)==="/"}e=Mc(Xc(e.split("/"),function(e){return!!e}),!t).join("/");return(t?"/":"")+e||"."}function Yc(e){var t=Vc(e),r=ef(e,-1)==="/";e=Mc(Xc(e.split("/"),function(e){return!!e}),!t).join("/");if(!e&&!t){e="."}if(e&&r){e+="/"}return(t?"/":"")+e}function Vc(e){return e.charAt(0)==="/"}function $c(){var e=Array.prototype.slice.call(arguments,0);return Yc(Xc(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))}function Jc(e,t){e=zc(e).substr(1);t=zc(t).substr(1);function r(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break}var r=e.length-1;for(;r>=0;r--){if(e[r]!=="")break}if(t>r)return[];return e.slice(t,r-t+1)}var n=r(e.split("/"));var i=r(t.split("/"));var a=Math.min(n.length,i.length);var u=a;for(var o=0;o<a;o++){if(n[o]!==i[o]){u=o;break}}var s=[];for(var o=u;o<n.length;o++){s.push("..")}s=s.concat(i.slice(u));return s.join("/")}var Kc="/";var Hc=":";function Wc(e){var t=qc(e),r=t[0],n=t[1];if(!r&&!n){return"."}if(n){n=n.substr(0,n.length-1)}return r+n}function Gc(e,t){var r=qc(e)[2];if(t&&r.substr(-1*t.length)===t){r=r.substr(0,r.length-t.length)}return r}function Qc(e){return qc(e)[3]}var Zc={extname:Qc,basename:Gc,dirname:Wc,sep:Kc,delimiter:Hc,relative:Jc,join:$c,isAbsolute:Vc,normalize:Yc,resolve:zc};function Xc(e,t){if(e.filter)return e.filter(t);var r=[];for(var n=0;n<e.length;n++){if(t(e[n],n,e))r.push(e[n])}return r}var ef="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){if(t<0)t=e.length+t;return e.substr(t,r)};var tf=Object.freeze({__proto__:null,basename:Gc,default:Zc,delimiter:Hc,dirname:Wc,extname:Qc,isAbsolute:Vc,join:$c,normalize:Yc,relative:Jc,resolve:zc,sep:Kc});e.BufferedOutputPort=Xo;e.Environment=x;e.Error=ps;e.Formatter=Pa;e.InputBinaryFilePort=us;e.InputByteVectorPort=ns;e.InputFilePort=as;e.InputPort=Qo;e.InputStringPort=rs;e.Interpreter=hs;e.LBigInteger=A;e.LCharacter=h;e.LComplex=m;e.LFloat=g;e.LNumber=j;e.LRational=E;e.LString=D;e.LSymbol=Y;e.Lexer=s;e.Macro=J;e.OutputBinaryFilePort=os;e.OutputByteVectorPort=is;e.OutputFilePort=ts;e.OutputPort=Zo;e.OutputStringPort=es;e.Pair=$;e.Parameter=Gs;e.Parser=wa;e.QuotedPromise=ca;e.Syntax=Cu;e.Values=vs;e.Worker=cc;e.balanced=nc;e.balancedParenthesis=nc;e.balanced_parenthesis=nc;e.banner=jc;e.bootstrap=sc;e.compile=ec;e.date=Pc;e.env=xs;e.eof=fs;e.evaluate=k;e.exec=tc;e.nil=V;e.parse=Nc;e.quote=ys;e.rationalize=Wo;e.repr=ru;e.serialize=bc;e.serialize_bin=kc;e.set_fs=ks;e.specials=pa;e.tokenize=na;e.unserialize=wc;e.unserialize_bin=Cc;e.version=Ic});